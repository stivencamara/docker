import{_ as B}from"./form-513671f9.js";import{m as S,N as M,x as P,u as K,r as n,y as R,A as m,I as G,O as D,L as j,n as u,s as i,a as b,b as _,c as E,w as p,d as f,f as e,i as k}from"./index-920dbb37.js";import{s as y}from"./helpers-65b02008.js";import{u as x}from"./service-e327b247.js";import{s as I}from"./service-6e6aa2ba.js";import"./helpers-4c156364.js";/* empty css                                                                     */import{_ as N}from"./detail-actions-cf004e7e.js";import"./index.esm-d0811cb6.js";import"./base-information-c108b44d.js";import"./index.esm-d064d6e3.js";import"./point-of-care-98c47a98.js";import"./form-90b3a9cf.js";import"./settings-bb7269a2.js";import"./comments-3b769030.js";import"./generic-9b68486a.js";import"./point-of-care-5c4c4d1a.js";import"./organization-481d97d6.js";import"./helpers-db4b16e6.js";import"./helpers-6935922b.js";import"./helpers-93ac209f.js";import"./helpers-cd5e71d3.js";import"./helpers-952742ca.js";const pe={__name:"detail",setup(U){const A=S(),v=M();P();const L=K(),C=x();let s=n(!0),o=R(y.newForm()),r=n(m.language.pt);n([]);let w=R(y.formRules()),c=n(0),d=n(0);const T=G(()=>v.path.toLowerCase().indexOf("tarefas")>-1);async function O(){s.value=!0;const t=await I.getById(c.value,d.value);u.validateResponse(t,null,()=>{let a=t.data;a.eventTypeId=a.lifeEventId?m.eventType.life:m.eventType.business,a.processingTime.type=a.processingTime.weeks?m.processingTimeType.simplified:m.processingTimeType.advanced,Object.assign(o,a),L.emit(i.emitter.OBJECT_LOADED,t.data),C.setFormToCompare(u.cloneObject(a))}),s.value=!1}async function F(){s.value=!0;const t=await I.getLists(r.value);u.validateResponse(t,null,()=>{C.setLists(t.data)}),s.value=!1}return D(()=>r.value,()=>{F()}),j(async()=>{c.value=u.decodeId(v.params.serviceId),d.value=u.decodeId(v.params.serviceVersion),!c.value||!d.value?A.push({name:i.router.BACKOFFICE_SERVICE_PAGE.name}):(await F(),await O())}),(t,a)=>{const g=b("breadcrumb-item"),h=b("breadcrumb"),V=b("page");return _(),E(V,{title:t._lang.backoffice.service.editPageTitle},{breadcrumb:p(()=>[f(h,{"has-home":!0},{default:p(()=>[e(T)?(_(),E(g,{key:0,label:t._lang.backoffice.tasks.breadcrumbTitle,"router-path":e(i).router.BACKOFFICE_TASKS_PAGE.path},null,8,["label","router-path"])):(_(),E(g,{key:1,label:t._lang.backoffice.service.breadcrumbTitle,"router-path":e(i).router.BACKOFFICE_SERVICE_PAGE.path},null,8,["label","router-path"])),f(g,{label:t._lang.backoffice.service.detailPageTitle},null,8,["label"])]),_:1})]),actions:p(()=>[f(N,{loading:e(s),selectedLang:e(r),"onUpdate:selectedLang":a[0]||(a[0]=l=>k(r)?r.value=l:r=l),service:e(I),backRoute:e(i).router.BACKOFFICE_SERVICE_PAGE.name,editRoute:e(i).router.BACKOFFICE_EDIT_SERVICE_PAGE.name,itemIdField:"serviceId",itemVersionField:"serviceVersion",itemId:e(c),itemVersion:e(d),formModel:e(o),"show-record-state-actions":e(T)},null,8,["loading","selectedLang","service","backRoute","editRoute","itemId","itemVersion","formModel","show-record-state-actions"])]),default:p(()=>[f(B,{formModel:e(o),"onUpdate:formModel":a[1]||(a[1]=l=>k(o)?o.value=l:o=l),disabled:!0,loading:e(s),selectedLang:e(r),validateForm:!0,rules:e(w),isExternalEdit:!1},null,8,["formModel","loading","selectedLang","rules"])]),_:1},8,["title"])}}};export{pe as default};
