import{m as w,N as G,x as U,y as g,r as i,V as v,A as E,L as V,n as d,s as m,a as c,b as y,c as N,w as l,d as o,f as e,i as S}from"./index-920dbb37.js";import{h as O,_ as P}from"./form-31deabe6.js";import{u as M}from"./index.esm-d064d6e3.js";import"./helpers-4c156364.js";import{u as D,a as I}from"./users-c4c4ce38.js";import{_ as K}from"./edit-actions-48107c1a.js";import"./index.esm-d0811cb6.js";import"./cancel-confirm-33e0b7cc.js";import"./settings-bb7269a2.js";const X={__name:"edit",setup(L){const h=w(),T=G();U();const C=g(O.formRules()),p=D(),f=i(v.havePermission(E.permissions.users.createEdit)),k=i(v.havePermission(E.permissions.users.delete));let t=i(!1),n=i(0),s=g({name:null,email:null,profiles:[],active:!0});const _=M(C,s);V(async()=>{n.value=d.decodeId(T.params.userId),n.value?await R():h.push({name:m.router.BACKOFFICE_SETTINGS_USERS_PAGE.name})});async function R(){t.value=!0;const a=await I.getById(n.value);d.validateResponse(a,null,()=>{Object.assign(s,a.data),p.setFormToCompare(d.cloneObject(a.data))}),t.value=!1}return(a,u)=>{const b=c("breadcrumb-item"),A=c("breadcrumb"),B=c("card"),F=c("page");return y(),N(F,{title:a._lang.backoffice.settings.users.update.pageTitle},{breadcrumb:l(()=>[o(A,{"has-home":!0},{default:l(()=>[o(b,{label:a._lang.backoffice.settings.users.pageTitle,"router-path":e(m).router.BACKOFFICE_SETTINGS_USERS_PAGE.path},null,8,["label","router-path"]),o(b,{label:a._lang.backoffice.settings.users.update.pageTitle},null,8,["label"])]),_:1})]),actions:l(()=>[o(K,{loading:e(t),"onUpdate:loading":u[0]||(u[0]=r=>S(t)?t.value=r:t=r),service:e(I),itemId:e(n),formModel:e(s),vuelidate:e(_),store:e(p),resource:a._lang.backoffice.settings.users,"back-route":e(m).router.BACKOFFICE_SETTINGS_USERS_PAGE.name,showLangSelector:!1,canEdit:f.value,canDelete:k.value},null,8,["loading","service","itemId","formModel","vuelidate","store","resource","back-route","canEdit","canDelete"])]),default:l(()=>[o(B,{shadow:!0},{body:l(()=>[o(P,{modelValue:e(s),"onUpdate:modelValue":u[1]||(u[1]=r=>S(s)?s.value=r:s=r),required:!0,vuelidator:e(_),disabled:!f.value},null,8,["modelValue","vuelidator","disabled"])]),_:1})]),_:1},8,["title"])}}};export{X as default};
