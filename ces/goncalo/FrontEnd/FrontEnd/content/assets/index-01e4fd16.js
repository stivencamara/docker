import{_ as q}from"./delete-confirm-976340c2.js";import{g as W,i as $,r,v as f,j as k,u as _,o as x,l as n,c as H,m as J,n as s,q as l,s as t,V as Q,Y as X,K as b,B as S}from"./index-34a71b79.js";import{r as E}from"./refusal-types-77a3a253.js";const le={__name:"index",setup(Z){const y=W();$();let i=r(!1),d=r([]),m=r([]),p=r(f.tableSelectedState.none),o=k(I()),g=r(_.createEmptyDataSource());k({});let T=r(0);function I(){return{pageNumber:1,sortBy:"refusalTypeId",refusalTypeId:null,refusalTypeIds:[],caeDesignation:null}}x(async()=>{await u()});function v(e){y.push({name:S.router.BACKOFFICE_SETTINGS_EDIT_REFUSAL_TYPES_PAGE.name,params:{refusalTypeId:_.encodeId(e.refusalTypeId)}})}async function w(){Object.assign(o,I()),await C()}async function C(){o.pageNumber=1,await u()}function A(){y.push({name:S.router.BACKOFFICE_SETTINGS_CREATE_REFUSAL_TYPES_PAGE.name})}async function B(e){o.sortBy=e,await u()}async function F(e){o.pageNumber=e,await u()}async function u(){i.value=!0,o.refusalTypeId?o.refusalTypeIds=[o.refusalTypeId]:o.refusalTypeIds=[];let e=await E.search(o);_.validateResponse(e,null,()=>{g.value=e.data}),i.value=!1}async function N(e){T.value=e.refusalTypeId}async function P(){_.closeModalById("confirm-delete"),await u()}return(e,c)=>{const R=n("breadcrumb-item"),U=n("breadcrumb"),h=n("cbutton"),V=n("form-field"),D=n("row"),G=n("cfilter"),M=n("ccolumn"),z=n("table-action-edit"),K=n("table-action-delete"),L=n("ctable"),O=n("card"),Y=n("page");return H(),J(Y,{title:e._lang.backoffice.settings.refusalType.pageTitle},{breadcrumb:s(()=>[l(U,{"has-home":!0},{default:s(()=>[l(R,{label:e._lang.backoffice.settings.refusalType.breadcrumbTitle},null,8,["label"])]),_:1})]),actions:s(()=>[l(h,{class:"col-12 col-sm-auto",type:t(f).buttonType.secondary,size:t(f).buttonSize.medium,title:e._lang.common.toAdd,icon:Q,onClick:A},null,8,["type","size","title"])]),default:s(()=>[l(O,{shadow:!0},{body:s(()=>[l(G,{title:e._lang.common.filter,disabled:t(i),"clear-click":w,"apply-click":C,loading:t(i),collapsed:!0},{default:s(()=>[l(D,null,{default:s(()=>[l(V,{id:"refusalTypeName",modelValue:t(o).name,"onUpdate:modelValue":c[0]||(c[0]=a=>t(o).name=a),class:"mb-3 col-12",label:e._lang.label.name,type:t(f).inputs.text,maxlength:45,disabled:t(i)},null,8,["modelValue","label","type","disabled"])]),_:1})]),_:1},8,["title","disabled","loading"]),l(X,null,{default:s(()=>[l(L,{onSort:B,onChangePage:F,selectedItems:t(d),"onUpdate:selectedItems":c[1]||(c[1]=a=>b(d)?d.value=a:d=a),unselectedItems:t(m),"onUpdate:unselectedItems":c[2]||(c[2]=a=>b(m)?m.value=a:m=a),selectedState:t(p),"onUpdate:selectedState":c[3]||(c[3]=a=>b(p)?p.value=a:p=a),data:t(g),checkbox:!1,loading:t(i),defaultSort:"refusalTypeId"},{columns:s(()=>[l(M,{name:e._lang.label.name,field:"name",sortable:!0},null,8,["name"])]),actions:s(a=>[l(z,{onClick:j=>v(a.item)},null,8,["onClick"]),l(K,{onClick:j=>N(a.item)},null,8,["onClick"])]),_:1},8,["selectedItems","unselectedItems","selectedState","data","loading"])]),_:1})]),_:1}),l(q,{"item-id":t(T),resource:e._lang.backoffice.settings.refusalType,action:P,service:t(E)},null,8,["item-id","resource","service"])]),_:1},8,["title"])}}};export{le as default};
