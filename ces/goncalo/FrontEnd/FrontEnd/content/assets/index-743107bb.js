import{b as S,h as U,r as C,K as O,o as ne,z as V,u,j as $,k as n,c as L,l as K,w as g,n as a,t as be,v as ge,p as e,s as f,i as G,N as ye,m as ae,I as Q,y as me,R as fe,G as N,e as W,F as de,U as J,ad as _e,_ as ve}from"./index-c417b10a.js";import{b as x}from"./helpers-422844e7.js";import{s as le}from"./settings-fb41674a.js";import{s as ke}from"./service-e178ddc5.js";import{u as Ce}from"./service-d66d7fcd.js";import{u as Te}from"./index.esm-5fe78185.js";import{_ as Ie}from"./custom-label-f0cdc292.js";import{t as he}from"./treeview-48140ddb.js";import"./index.esm-29b873a2.js";const X={search:l=>S.post("/organizations/organizationrelatedtype/search",l),getById:l=>S.get(`/organizations/organizationrelatedtype/${l}`),delete:l=>S.delete(`/organizations/organizationrelatedtype/${l}`),create:l=>S.post("/organizations/organizationrelatedtype",l),update:l=>S.put("/organizations/organizationrelatedtype",l)},Y={search:l=>S.post("/service/servicetype/search",l),getById:l=>S.get(`/service/servicetype/${l}`),delete:l=>S.delete(`/service/servicetype/${l}`),create:l=>S.post("/service/servicetype",l),update:l=>S.put("/service/servicetype",l)},Z={search:l=>S.post("/poc/channeltype/search",l),getById:l=>S.get(`/poc/channeltype/${l}`),delete:l=>S.delete(`/poc/channeltype/${l}`),create:l=>S.post("/poc/channeltype",l),update:l=>S.put("/poc/channeltype",l)},ee={search:l=>S.post("/service/servicecategory/search",l),getById:l=>S.get(`/service/servicecategory/${l}`),delete:l=>S.delete(`/service/servicecategory/${l}`),create:l=>S.post("/service/servicecategory",l),update:l=>S.put("/service/servicecategory",l)},te={search:l=>S.post("/service/recipienttype/search",l),getById:l=>S.get(`/service/recipienttype/${l}`),delete:l=>S.delete(`/service/recipienttype/${l}`),create:l=>S.post("/service/recipienttype",l),update:l=>S.put("/service/recipienttype",l)},ce={search:l=>S.post("/settings/checklist/search",l),getById:l=>S.get(`/settings/checklist/${l}`),delete:l=>S.delete(`/settings/checklist/${l}`),create:l=>S.post("/settings/checklist",l),update:l=>S.put("/settings/checklist",l)},we={__name:"delete-modal",props:{modelValue:{type:[Number,String,Boolean,Object]},itsNew:{type:Boolean,default:!0}},emits:["update:modelValue","updated"],setup(l,{emit:k}){const m=l,b="confirm-delete",v=U();C([]),C("pt");let d=C("Eliminar"),s=C("Eliminar?"),i,h,P;O(async()=>{}),ne(()=>{v.on(V.emitter.PARAMS_CONFIRM_DELETE,I=>{d.value=I.modalTitle,i=I.service,h=I.itemId,P=I.search,u.showModalById(b)})}),$({get(){return m.modelValue},set(I){k("update:modelValue",I)}});function c(){u.closeModalById(b)}async function z(){let I=await i.delete(h);u.validateResponse(I,"Eliminado com sucesso",()=>{P(),u.closeModalById(b)})}return(I,T)=>{const o=n("row"),y=n("cbutton"),j=n("modal");return L(),K(j,{id:b,title:e(d),size:e(f).modalSize.medium,"remove-padding":!1},{body:g(()=>[a(o,null,{default:g(()=>[be(ge(e(s)),1)]),_:1})]),footer:g(()=>[a(y,{type:e(f).buttonType.link,class:"ms-auto",title:I._lang.common.cancel,onClick:c,size:e(f).buttonSize.medium,disabled:!1},null,8,["type","title","size"]),a(y,{type:e(f).buttonType.primary,title:I._lang.common.delete,onClick:z,size:e(f).buttonSize.medium,disabled:!1},null,8,["type","title","size"])]),_:1},8,["title","size"])}}},je={class:"col-12 mb-3"},Se={__name:"edit-modal",props:{modelValue:{type:[Number,String,Boolean,Object]}},emits:["update:modelValue"],setup(l,{emit:k}){const m=l,b="edit",v=U(),d=Ce();let s=C([]),i=C("pt"),h=C("Eliminar"),P,c,z=C(!1),I=C(!1),T=C(!1),o=C("name"),y=C("description"),j=C(F());const t=G(),r={texts:{$each:x.forEachField([o.value])}},w=Te(r,j);O(async()=>{await A()}),ne(()=>{v.on(V.emitter.PARAMS_EDIT,async _=>{o.value=_.value1??"name",y.value=_.value2??"description",h.value=_.modalTitle,P=_.service,j.value=_.form,c=_.search,z.value=_.itsNew,I.value=_.haveParent,u.showModalById(b),w.value.$reset(),I.value&&await M()})}),$({get(){return m.modelValue},set(_){k("update:modelValue",_)}});async function A(){let _=await le.getLanguages();u.validateResponse(_,null,()=>{s.value=_.data})}function p(){u.closeModalById(b)}async function B(){if(T.value=!0,await w.value.$validate(),w.value.$error)fe.warning(t.common.objectParamsRequired.replace("{0}",t.label[o.value]));else if(z.value){let _=await P.create(j.value);u.validateResponse(_,"Criado com sucesso",()=>{c(),u.closeModalById(b)})}else{let _=await P.update(j.value);u.validateResponse(_,"Guardado com sucesso",()=>{c(),u.closeModalById(b)})}T.value=!1}const R=$({get(){return x.getFieldByLangAndName(j.value,i.value,o.value)},set(_){x.setFieldByLangAndName(j.value,i.value,o.value,_)}}),E=$({get(){return x.getFieldByLangAndName(j.value,i.value,y.value)},set(_){x.setFieldByLangAndName(j.value,i.value,y.value,_)}});function F(){return{texts:[{language:"pt",[o.value]:null,[y.value]:null},{language:"en",[o.value]:null,[y.value]:null}]}}async function M(){T.value=!0;const _=await ke.getLists(i.value);u.validateResponse(_,null,()=>{d.setLists(_.data)}),T.value=!1}return ye(()=>i.value,async()=>{I.value&&await M()}),(_,D)=>{const re=n("lang-selector"),ie=n("row"),ue=n("table-actions"),q=n("form-field"),se=n("cbutton"),pe=n("modal");return L(),K(pe,{id:b,title:e(h),size:e(f).modalSize.extraLarge,"remove-padding":!1},{body:g(()=>[a(ue,null,{default:g(()=>[a(ie,null,{default:g(()=>[ae("div",je,[a(re,{options:e(s),selectedLang:e(i),"onUpdate:selectedLang":D[0]||(D[0]=H=>Q(i)?i.value=H:i=H),disabled:!1},null,8,["options","selectedLang"])])]),_:1})]),_:1}),a(ie,null,{default:g(()=>[a(q,{id:"value1Computed",class:"mb-3 col-12 col-md-6",modelValue:e(R),"onUpdate:modelValue":D[1]||(D[1]=H=>Q(R)?R.value=H:null),label:_._lang.label[e(o)],disabled:e(T),type:e(f).inputs.text,language:e(i),showError:_._showErrorFieldWhenTexts(e(w).texts,e(o)),"error-message":_._errorMessageFieldWhenTexts(e(w).texts,e(o))},null,8,["modelValue","label","disabled","type","language","showError","error-message"]),e(I)?(L(),K(q,{key:0,id:"serviceCategoryParent",class:"mb-3 col-12 col-md-6",modelValue:e(j).serviceCategoryParentId,"onUpdate:modelValue":D[2]||(D[2]=H=>e(j).serviceCategoryParentId=H),label:_._lang.label.serviceCategoryParent,disabled:e(T),type:e(f).inputs.multiselect,options:e(d).serviceCategoryList},null,8,["modelValue","label","disabled","type","options"])):me("",!0),a(q,{id:"value2Computed",class:"mb-3 col-12 col-md-6",modelValue:e(E),"onUpdate:modelValue":D[3]||(D[3]=H=>Q(E)?E.value=H:null),label:_._lang.label[e(y)],disabled:e(T),type:e(f).inputs.text,language:e(i)},null,8,["modelValue","label","disabled","type","language"])]),_:1})]),footer:g(()=>[a(se,{type:e(f).buttonType.link,class:"ms-auto",title:_._lang.common.cancel,onClick:p,size:e(f).buttonSize.medium,disabled:e(T)},null,8,["type","title","size","disabled"]),a(se,{type:e(f).buttonType.primary,title:_._lang.common.save,onClick:B,size:e(f).buttonSize.medium,disabled:e(T)},null,8,["type","title","size","disabled"])]),_:1},8,["title","size"])}}},Pe={class:"col-12 hstack gap-2 mt-3"},oe={__name:"search",props:{value1:{type:String,default:"name"},value2:{type:String,default:"description"},createFilterModel:{type:Function}},emits:["applyClick","clearClick"],setup(l,{emit:k}){const m=l;var b=N(m.createFilterModel());O(async()=>{}),ne(()=>{});function v(){k("applyClick",b)}function d(){Object.assign(b,m.createFilterModel()),k("clearClick")}return(s,i)=>{const h=n("form-field"),P=n("row"),c=n("cbutton");return L(),W(de,null,[a(P,null,{default:g(()=>[a(h,{id:"value1",class:"mb-3 col-12 col-md-6",modelValue:e(b)[m.value1],"onUpdate:modelValue":i[0]||(i[0]=z=>e(b)[m.value1]=z),label:s._lang.label[m.value1],disabled:!1,type:e(f).inputs.text},null,8,["modelValue","label","type"]),a(h,{id:"value2",class:"mb-3 col-12 col-md-6",modelValue:e(b)[m.value2],"onUpdate:modelValue":i[1]||(i[1]=z=>e(b)[m.value2]=z),label:s._lang.label[m.value2],disabled:!1,type:e(f).inputs.text},null,8,["modelValue","label","type"])]),_:1}),a(P,null,{default:g(()=>[ae("div",Pe,[a(c,{type:e(f).buttonType.link,class:"ms-auto",title:s._lang.common.clear,onClick:d,size:e(f).buttonSize.medium,disabled:m.disabled||m.disabledClearButton},null,8,["type","title","size","disabled"]),a(c,{type:e(f).buttonType.primary,title:s._lang.common.apply,onClick:v,size:e(f).buttonSize.medium,disabled:m.disabled},null,8,["type","title","size","disabled"])])]),_:1})],64)}}},ze={__name:"index",setup(l){const k=U(),m=G();let b=C(u.uuid()),v=C(u.createEmptyDataSource()),d=N(i());N(y());let s=C(!1);O(async()=>{await c()});function i(){return{pageNumber:1,sortBy:"OrganizationRelatedTypeId",organizationRelatedTypeIds:[],name:null,description:null}}async function h(t){Object.assign(d,t),c()}async function P(){Object.assign(d,i()),c()}async function c(){s.value=!0;let t=await X.search(d);u.validateResponse(t,null,async()=>{v.value=t.data,v.value.items=t.data.items.map(r=>({organizationRelatedTypeId:r.organizationRelatedTypeId,name:r.texts[0].name,description:r.texts[0].description}))}),s.value=!1}async function z(t){d.sortBy=t,await c()}async function I(t){d.pageNumber=t,await c()}async function T(t){s.value=!0;let r=await X.getById(t.organizationRelatedTypeId);u.validateResponse(r,null,async()=>{const w={form:r.data,service:X,modalTitle:m.backoffice.objectParams.organizationRelatedType.title,search:c,itsNew:!1};k.emit(V.emitter.PARAMS_EDIT,w)}),s.value=!1}function o(){const t={form:y(),service:X,modalTitle:m.backoffice.objectParams.organizationRelatedType.title,search:c,itsNew:!0};k.emit(V.emitter.PARAMS_EDIT,t)}function y(){return{texts:[{language:"pt",name:null,description:null},{language:"en",name:null,description:null}]}}function j(t){const r={itemId:t.organizationRelatedTypeId,service:X,modalTitle:m.backoffice.objectParams.organizationRelatedType.title,search:c};k.emit(V.emitter.PARAMS_CONFIRM_DELETE,r)}return(t,r)=>{const w=n("cbutton"),A=n("table-actions"),p=n("ccolumn"),B=n("table-action-edit"),R=n("table-action-delete"),E=n("ctable"),F=n("accordion");return L(),W("div",null,[a(F,{id:e(b),title:t._lang.backoffice.objectParams.organizationRelatedType.title,collapsed:!1,class:"mb-4"},{default:g(()=>[a(A,null,{default:g(()=>[a(w,{target:"create-contact",class:"d-inline",type:e(f).buttonType.secondary,title:t._lang.common.toAdd,disabled:!1,icon:J,onClick:o},null,8,["type","title"])]),_:1}),a(oe,{onApplyClick:h,onClearClick:P,createFilterModel:i}),a(E,{onSort:z,onChangePage:I,data:e(v),checkbox:!1,loading:e(s),defaultSort:"OrganizationRelatedTypeId"},{columns:g(()=>[a(p,{name:t._lang.label.name,field:"name",sortable:!0},null,8,["name"]),a(p,{name:t._lang.label.description,field:"description",sortable:!1},null,8,["name"])]),actions:g(M=>[a(B,{onClick:_=>T(M.item)},null,8,["onClick"]),a(R,{onClick:_=>j(M.item)},null,8,["onClick"])]),_:1},8,["data","loading"])]),_:1},8,["id","title"])])}}},Ae={__name:"index",setup(l){const k=U(),m=G();let b=C(u.uuid()),v=C(u.createEmptyDataSource()),d=N(i());N(y());let s=C(!1);O(async()=>{await c()});function i(){return{pageNumber:1,sortBy:"channelTypeId",channelTypeIds:[],name:null,description:null}}async function h(t){Object.assign(d,t),c()}async function P(){Object.assign(d,i()),c()}async function c(){s.value=!0;let t=await Z.search(d);u.validateResponse(t,null,async()=>{v.value=t.data,v.value.items=t.data.items.map(r=>({channelTypeId:r.channelTypeId,name:r.texts[0].name,description:r.texts[0].description}))}),s.value=!1}async function z(t){d.sortBy=t,await c()}async function I(t){d.pageNumber=t,await c()}async function T(t){s.value=!0;let r=await Z.getById(t.channelTypeId);u.validateResponse(r,null,async()=>{const w={form:r.data,service:Z,modalTitle:m.backoffice.objectParams.channelType.title,search:c,itsNew:!1};k.emit(V.emitter.PARAMS_EDIT,w)}),s.value=!1}function o(){const t={form:y(),service:Z,modalTitle:m.backoffice.objectParams.channelType.title,search:c,itsNew:!0};k.emit(V.emitter.PARAMS_EDIT,t)}function y(){return{texts:[{language:"pt",name:null,description:null},{language:"en",name:null,description:null}]}}function j(t){const r={itemId:t.channelTypeId,service:Z,modalTitle:m.backoffice.objectParams.channelType.title,search:c};k.emit(V.emitter.PARAMS_CONFIRM_DELETE,r)}return(t,r)=>{const w=n("cbutton"),A=n("table-actions"),p=n("ccolumn"),B=n("table-action-edit"),R=n("table-action-delete"),E=n("ctable"),F=n("accordion");return L(),W("div",null,[a(F,{id:e(b),title:t._lang.backoffice.objectParams.channelType.title,collapsed:!1,class:"mb-4"},{default:g(()=>[a(A,null,{default:g(()=>[a(w,{target:"create-contact",class:"d-inline",type:e(f).buttonType.secondary,title:t._lang.common.toAdd,disabled:!1,icon:J,onClick:o},null,8,["type","title"])]),_:1}),a(oe,{onApplyClick:h,onClearClick:P,createFilterModel:i}),a(E,{onSort:z,onChangePage:I,data:e(v),checkbox:!1,loading:e(s),defaultSort:"channelTypeId"},{columns:g(()=>[a(p,{name:t._lang.label.name,field:"name",sortable:!0},null,8,["name"]),a(p,{name:t._lang.label.description,field:"description",sortable:!1},null,8,["name"])]),actions:g(M=>[a(B,{onClick:_=>T(M.item)},null,8,["onClick"]),a(R,{onClick:_=>j(M.item)},null,8,["onClick"])]),_:1},8,["data","loading"])]),_:1},8,["id","title"])])}}},Be={__name:"index",setup(l){const k=U(),m=G();let b=C(u.uuid()),v=C(u.createEmptyDataSource()),d=N(i());N(y());let s=C(!1);O(async()=>{await c()});function i(){return{pageNumber:1,sortBy:"recipientTypeId",recipientTypeIds:[],name:null,description:null}}async function h(t){Object.assign(d,t),c()}async function P(){Object.assign(d,i()),c()}async function c(){s.value=!0;let t=await te.search(d);u.validateResponse(t,null,async()=>{v.value=t.data,v.value.items=t.data.items.map(r=>({recipientTypeId:r.recipientTypeId,name:r.texts[0].name,description:r.texts[0].description}))}),s.value=!1}async function z(t){d.sortBy=t,await c()}async function I(t){d.pageNumber=t,await c()}async function T(t){s.value=!0;let r=await te.getById(t.recipientTypeId);u.validateResponse(r,null,async()=>{const w={form:r.data,service:te,modalTitle:m.backoffice.objectParams.recipientType.title,search:c,itsNew:!1};k.emit(V.emitter.PARAMS_EDIT,w)}),s.value=!1}function o(){const t={form:y(),service:te,modalTitle:m.backoffice.objectParams.recipientType.title,search:c,itsNew:!0};k.emit(V.emitter.PARAMS_EDIT,t)}function y(){return{texts:[{language:"pt",name:null,description:null},{language:"en",name:null,description:null}]}}function j(t){const r={itemId:t.recipientTypeId,service:te,modalTitle:m.backoffice.objectParams.recipientType.title,search:c};k.emit(V.emitter.PARAMS_CONFIRM_DELETE,r)}return(t,r)=>{const w=n("cbutton"),A=n("table-actions"),p=n("ccolumn"),B=n("table-action-edit"),R=n("table-action-delete"),E=n("ctable"),F=n("accordion");return L(),W("div",null,[a(F,{id:e(b),title:t._lang.backoffice.objectParams.recipientType.title,collapsed:!1,class:"mb-4"},{default:g(()=>[a(A,null,{default:g(()=>[a(w,{target:"create-contact",class:"d-inline",type:e(f).buttonType.secondary,title:t._lang.common.toAdd,disabled:!1,icon:J,onClick:o},null,8,["type","title"])]),_:1}),a(oe,{onApplyClick:h,onClearClick:P,createFilterModel:i}),a(E,{onSort:z,onChangePage:I,data:e(v),checkbox:!1,loading:e(s),defaultSort:"recipientTypeId"},{columns:g(()=>[a(p,{name:t._lang.label.name,field:"name",sortable:!0},null,8,["name"]),a(p,{name:t._lang.label.description,field:"description",sortable:!1},null,8,["name"])]),actions:g(M=>[a(B,{onClick:_=>T(M.item)},null,8,["onClick"]),a(R,{onClick:_=>j(M.item)},null,8,["onClick"])]),_:1},8,["data","loading"])]),_:1},8,["id","title"])])}}},Me={__name:"index",setup(l){const k=U(),m=G();let b=C(u.uuid()),v=C(u.createEmptyDataSource()),d=N(i());N(y());let s=C(!1);O(async()=>{await c()});function i(){return{pageNumber:1,sortBy:"serviceTypeId",serviceTypeIds:[],name:null,description:null}}async function h(t){Object.assign(d,t),c()}async function P(){Object.assign(d,i()),c()}async function c(){s.value=!0;let t=await Y.search(d);u.validateResponse(t,null,async()=>{v.value=t.data,v.value.items=t.data.items.map(r=>({serviceTypeId:r.serviceTypeId,name:r.texts[0].name,description:r.texts[0].description}))}),s.value=!1}async function z(t){d.sortBy=t,await c()}async function I(t){d.pageNumber=t,await c()}async function T(t){s.value=!0;let r=await Y.getById(t.serviceTypeId);u.validateResponse(r,null,async()=>{const w={form:r.data,service:Y,modalTitle:m.backoffice.objectParams.channelType.title,search:c,itsNew:!1};k.emit(V.emitter.PARAMS_EDIT,w)}),s.value=!1}function o(){const t={form:y(),service:Y,modalTitle:m.backoffice.objectParams.channelType.title,search:c,itsNew:!0};k.emit(V.emitter.PARAMS_EDIT,t)}function y(){return{texts:[{language:"pt",name:null,description:null},{language:"en",name:null,description:null}]}}function j(t){const r={itemId:t.serviceTypeId,service:Y,modalTitle:m.backoffice.objectParams.channelType.title,search:c};k.emit(V.emitter.PARAMS_CONFIRM_DELETE,r)}return(t,r)=>{const w=n("cbutton"),A=n("table-actions"),p=n("ccolumn"),B=n("table-action-edit"),R=n("table-action-delete"),E=n("ctable"),F=n("accordion");return L(),W("div",null,[a(F,{id:e(b),title:t._lang.backoffice.objectParams.serviceType.title,collapsed:!1,class:"mb-4"},{default:g(()=>[a(A,null,{default:g(()=>[a(w,{target:"create-contact",class:"d-inline",type:e(f).buttonType.secondary,title:t._lang.common.toAdd,disabled:!1,icon:J,onClick:o},null,8,["type","title"])]),_:1}),a(oe,{onApplyClick:h,onClearClick:P,createFilterModel:i}),a(E,{onSort:z,onChangePage:I,data:e(v),checkbox:!1,loading:e(s),defaultSort:"serviceTypeId"},{columns:g(()=>[a(p,{name:t._lang.label.name,field:"name",sortable:!0},null,8,["name"]),a(p,{name:t._lang.label.description,field:"description",sortable:!1},null,8,["name"])]),actions:g(M=>[a(B,{onClick:_=>T(M.item)},null,8,["onClick"]),a(R,{onClick:_=>j(M.item)},null,8,["onClick"])]),_:1},8,["data","loading"])]),_:1},8,["id","title"])])}}},Ve={__name:"index",setup(l){const k=U(),m=G();let b=C(u.uuid()),v=C(u.createEmptyDataSource()),d=N(i());N(y());let s=C(!1);O(async()=>{await c()});function i(){return{pageNumber:1,sortBy:"serviceCategoryId",serviceCategoryIds:[],name:null,description:null}}async function h(t){Object.assign(d,t),c()}async function P(){Object.assign(d,i()),c()}async function c(){s.value=!0;let t=await ee.search(d);u.validateResponse(t,null,async()=>{v.value=t.data,v.value.items=t.data.items.map(r=>({serviceCategoryId:r.serviceCategoryId,serviceCategoryParentName:r.serviceCategoryParentName,name:r.texts[0].name,description:r.texts[0].description}))}),s.value=!1}async function z(t){d.sortBy=t,await c()}async function I(t){d.pageNumber=t,await c()}async function T(t){s.value=!0;let r=await ee.getById(t.serviceCategoryId);u.validateResponse(r,null,async()=>{const w={form:r.data,service:ee,modalTitle:m.backoffice.objectParams.serviceCategory.title,search:c,itsNew:!1,haveParent:!0};k.emit(V.emitter.PARAMS_EDIT,w)}),s.value=!1}function o(){const t={form:y(),service:ee,modalTitle:m.backoffice.objectParams.serviceCategory.title,search:c,itsNew:!0,haveParent:!0};k.emit(V.emitter.PARAMS_EDIT,t)}function y(){return{texts:[{language:"pt",name:null,description:null},{language:"en",name:null,description:null}]}}function j(t){const r={itemId:t.serviceCategoryId,service:ee,modalTitle:m.backoffice.objectParams.serviceCategory.title,search:c};k.emit(V.emitter.PARAMS_CONFIRM_DELETE,r)}return(t,r)=>{const w=n("cbutton"),A=n("table-actions"),p=n("ccolumn"),B=n("table-action-edit"),R=n("table-action-delete"),E=n("ctable"),F=n("accordion");return L(),W("div",null,[a(F,{id:e(b),title:t._lang.backoffice.objectParams.serviceCategory.title,collapsed:!1,class:"mb-4"},{default:g(()=>[a(A,null,{default:g(()=>[a(w,{target:"create-contact",class:"d-inline",type:e(f).buttonType.secondary,title:t._lang.common.toAdd,disabled:!1,icon:J,onClick:o},null,8,["type","title"])]),_:1}),a(oe,{onApplyClick:h,onClearClick:P,createFilterModel:i}),a(E,{onSort:z,onChangePage:I,data:e(v),checkbox:!1,loading:e(s),defaultSort:"serviceCategoryId"},{columns:g(()=>[a(p,{name:t._lang.label.name,field:"name",sortable:!0,sortField:"serviceCategoryId"},null,8,["name"]),a(p,{name:t._lang.label.serviceCategoryParent,field:"serviceCategoryParentName",sortField:"serviceCategoryParentId",sortable:!0},null,8,["name"]),a(p,{name:t._lang.label.description,field:"description",sortable:!1},null,8,["name"])]),actions:g(M=>[a(B,{onClick:_=>T(M.item)},null,8,["onClick"]),a(R,{onClick:_=>j(M.item)},null,8,["onClick"])]),_:1},8,["data","loading"])]),_:1},8,["id","title"])])}}},Re={__name:"edit-modal",props:{modelValue:{type:[Number,String,Boolean,Object]},itsNew:{type:Boolean,default:!0},search:{type:Function}},emits:["update:modelValue"],setup(l,{emit:k}){const m=l,b="edit-check-list";U();const v=G();let d=C([]),s=C(f.language.pt);O(async()=>{await h()}),ne(()=>{});const i=$({get(){return m.modelValue},set(o){k("update:modelValue",o)}});async function h(){let o=await le.getLanguages();u.validateResponse(o,null,()=>{d.value=o.data})}function P(){u.closeModalById(b)}async function c(){if(m.itsNew){u.isNullOrEmpty(u.getObjByLang(i.value.questionTexts,"en").defaultAnswer)&&(u.getObjByLang(i.value.questionTexts,"en").defaultAnswer=u.getObjByLang(i.value.questionTexts,"pt").defaultAnswer),u.isNullOrEmpty(u.getObjByLang(i.value.questionTexts,"en").question)&&(u.getObjByLang(i.value.questionTexts,"en").question=u.getObjByLang(i.value.questionTexts,"pt").question);let o=await ce.create(i.value);u.validateResponse(o,"Criado com sucesso",()=>{m.search(),u.closeModalById(b)})}else{let o=await ce.update(i.value);u.validateResponse(o,"Guardado com sucesso",()=>{m.search(),u.closeModalById(b)})}}const z=$(()=>u.convertEnumToArray(v.enums.checkListbjectType)),I=$({get(){return x.getFieldByLangAndName(i.value,s.value,"defaultAnswer","questionTexts")},set(o){x.setFieldByLangAndName(i.value,s.value,"defaultAnswer",o,"questionTexts")}}),T=$({get(){return x.getFieldByLangAndName(i.value,s.value,"question","questionTexts")},set(o){x.setFieldByLangAndName(i.value,s.value,"question",o,"questionTexts")}});return(o,y)=>{const j=n("lang-selector"),t=n("form-field"),r=n("row"),w=n("cbutton"),A=n("modal");return L(),K(A,{id:b,title:o._lang.backoffice.objectParams.checkList.title,size:e(f).modalSize.extraLarge,"remove-padding":!1},_e({footer:g(()=>[a(w,{type:e(f).buttonType.link,class:"ms-auto",title:o._lang.common.cancel,onClick:P,size:e(f).buttonSize.medium,disabled:!1},null,8,["type","title","size"]),a(w,{type:e(f).buttonType.primary,title:o._lang.common.save,onClick:c,size:e(f).buttonSize.medium,disabled:!1},null,8,["type","title","size"])]),_:2},[m.modelValue!=null?{name:"body",fn:g(()=>[a(j,{style:{"text-align":"-webkit-right"},options:e(d),selectedLang:e(s),"onUpdate:selectedLang":y[0]||(y[0]=p=>Q(s)?s.value=p:s=p)},null,8,["options","selectedLang"]),a(r,null,{default:g(()=>[a(t,{id:"objectTypeId",class:"mb-3 col-12 col-md-6",modelValue:e(i).objectTypeId,"onUpdate:modelValue":y[1]||(y[1]=p=>e(i).objectTypeId=p),label:o._lang.label.objectTypeId,disabled:!1,type:e(f).inputs.multiselect,options:e(z)},null,8,["modelValue","label","type","options"]),a(t,{id:"order",class:"mb-3 col-12 col-md-6",modelValue:e(i).order,"onUpdate:modelValue":y[2]||(y[2]=p=>e(i).order=p),label:o._lang.label.order,disabled:!1,type:e(f).inputs.number},null,8,["modelValue","label","type"]),a(t,{id:"question",class:"mb-3 col-12",modelValue:e(T),"onUpdate:modelValue":y[3]||(y[3]=p=>Q(T)?T.value=p:null),label:o._lang.label.question,disabled:!1,type:e(f).inputs.text,language:e(s)},null,8,["modelValue","label","type","language"]),a(t,{id:"defaultAnswer",class:"mb-3 col-12",modelValue:e(I),"onUpdate:modelValue":y[4]||(y[4]=p=>Q(I)?I.value=p:null),label:o._lang.label.defaultAnswer,disabled:!1,type:e(f).inputs.textarea,language:e(s),maxlength:1e4},null,8,["modelValue","label","type","language"])]),_:1})]),key:"0"}:void 0]),1032,["title","size"])}}},Ne={class:"col-12 hstack gap-2 mt-3"},Ee={__name:"index",setup(l){const k=U(),m=G(),b="edit-check-list";let v=C(u.uuid()),d=C(u.createEmptyDataSource()),s=N(c()),i=N(r()),h=C(!1),P=C(!0);O(async()=>{await T()});function c(){return{pageNumber:1,sortBy:"ObjectTypeId",objectTypeId:null}}async function z(p){Object.assign(s,p),T()}async function I(){Object.assign(s,c()),T()}async function T(){h.value=!0;let p=await ce.search(s);u.validateResponse(p,null,async()=>{d.value=p.data,d.value.items=p.data.items.map(B=>({id:B.id,checkListQuestionId:B.id,objectTypeId:B.objectTypeId,question:B.questionTexts[0].question,questionTexts:B.questionTexts,order:B.order}))}),h.value=!1}async function o(p){s.sortBy=p,await T()}async function y(p){s.pageNumber=p,await T()}async function j(p){P.value=!1,Object.assign(i,p),u.showModalById(b)}function t(){P.value=!0,Object.assign(i,r()),u.showModalById(b)}function r(){return{objectTypeId:null,checkListQuestionId:null,order:null,questionTexts:[{language:"pt",question:null,defaultAnswer:null},{language:"en",question:null,defaultAnswer:null}]}}function w(p){const B={itemId:p.id,service:ce,modalTitle:m.backoffice.objectParams.channelType.title,search:T};k.emit(V.emitter.PARAMS_CONFIRM_DELETE,B)}const A=$(()=>u.convertEnumToArray(m.enums.checkListbjectType));return(p,B)=>{const R=n("cbutton"),E=n("table-actions"),F=n("form-field"),M=n("row"),_=n("ccolumn"),D=n("table-action-edit"),re=n("table-action-delete"),ie=n("ctable"),ue=n("accordion");return L(),W(de,null,[ae("div",null,[a(ue,{id:e(v),title:p._lang.backoffice.objectParams.checkList.title,collapsed:!1,class:"mb-4"},{default:g(()=>[a(E,null,{default:g(()=>[a(R,{target:"create-contact",class:"d-inline",type:e(f).buttonType.secondary,title:p._lang.common.toAdd,disabled:!1,icon:J,onClick:t},null,8,["type","title"])]),_:1}),a(M,null,{default:g(()=>[a(F,{id:"objectTypeId",class:"mb-3 col-12",modelValue:e(s).objectTypeId,"onUpdate:modelValue":B[0]||(B[0]=q=>e(s).objectTypeId=q),label:p._lang.label.objectTypeId,disabled:!1,type:e(f).inputs.multiselect,options:e(A)},null,8,["modelValue","label","type","options"])]),_:1}),a(M,null,{default:g(()=>[ae("div",Ne,[a(R,{type:e(f).buttonType.link,class:"ms-auto",title:p._lang.common.clear,onClick:I,size:e(f).buttonSize.medium,disabled:e(h)},null,8,["type","title","size","disabled"]),a(R,{type:e(f).buttonType.primary,title:p._lang.common.apply,onClick:z,size:e(f).buttonSize.medium,disabled:e(h)},null,8,["type","title","size","disabled"])])]),_:1}),a(ie,{onSort:o,onChangePage:y,data:e(d),checkbox:!1,loading:e(h),defaultSort:"objectTypeId"},{columns:g(()=>[a(_,{name:p._lang.label.objectTypeId,field:"objectTypeId",sortable:!0,options:e(A),custom:Ie},null,8,["name","options"]),a(_,{name:p._lang.label.question,field:"question",sortable:!1},null,8,["name"]),a(_,{name:p._lang.label.order,field:"order",sortable:!0},null,8,["name"])]),actions:g(q=>[a(D,{onClick:se=>j(q.item)},null,8,["onClick"]),a(re,{onClick:se=>w(q.item)},null,8,["onClick"])]),_:1},8,["data","loading"])]),_:1},8,["id","title"])]),a(Re,{modelValue:e(i),"onUpdate:modelValue":B[1]||(B[1]=q=>Q(i)?i.value=q:i=q),itsNew:e(P),search:T},null,8,["modelValue","itsNew"])],64)}}},Le={__name:"edit-modal",props:{modelValue:{type:[Number,String,Boolean,Object]}},emits:["update:modelValue","search"],setup(l,{emit:k}){const m=l;O(async()=>{await c()}),ne(()=>{});const b=$({get(){return m.modelValue},set(o){k("update:modelValue",o)}});let v=C([]),d=C("pt"),s=C(!1);const i="edit-icon",h=G();let P=C(h.common.editIconModalTitle);async function c(){let o=await le.getLanguages();u.validateResponse(o,null,()=>{v.value=o.data})}function z(){u.closeModalById(i)}async function I(){s.value=!0;let o=await le.updateIcon(b.value);u.validateResponse(o,h.backoffice.objectParams.icons.update,()=>{k("search"),u.closeModalById(i)}),s.value=!1}const T=$({get(){return x.getFieldByLangAndName(b.value,d.value,"name")}});return(o,y)=>{const j=n("form-field"),t=n("row"),r=n("cbutton"),w=n("modal");return L(),K(w,{id:i,title:e(P),size:e(f).modalSize.extraLarge,"remove-padding":!1},{body:g(()=>[a(t,null,{default:g(()=>[a(j,{id:"name",class:"mb-3 col-12",modelValue:e(T),"onUpdate:modelValue":y[0]||(y[0]=A=>Q(T)?T.value=A:null),label:o._lang.label.name,disabled:!0,type:e(f).inputs.text,language:e(d)},null,8,["modelValue","label","type","language"]),a(j,{id:"icon",class:"mb-3 col-12",modelValue:e(b).icon,"onUpdate:modelValue":y[1]||(y[1]=A=>e(b).icon=A),label:o._lang.label.icon,disabled:m.disabled,loading:m.loading,type:e(f).inputs.file,required:!1,showPreview:!0,accept:".jpeg,.svg,.jpg,.png"},null,8,["modelValue","label","disabled","loading","type"])]),_:1})]),footer:g(()=>[a(r,{type:e(f).buttonType.link,class:"ms-auto",title:o._lang.common.cancel,onClick:z,size:e(f).buttonSize.medium,disabled:e(s)},null,8,["type","title","size","disabled"]),a(r,{type:e(f).buttonType.primary,title:o._lang.common.save,onClick:I,size:e(f).buttonSize.medium,disabled:e(s)},null,8,["type","title","size","disabled"])]),_:1},8,["title","size"])}}};const Fe=["src"],$e={__name:"icon",props:{value:{type:Object,required:!1}},setup(l){const k=l,m=$(()=>{var v,d;let b=null;return k.value&&(b=`data:${(v=k.value)==null?void 0:v.mime};base64,${(d=k.value)==null?void 0:d.data}`),b});return(b,v)=>e(m)!=null?(L(),W("img",{key:0,src:e(m),class:"previewImg"},null,8,Fe)):me("",!0)}},Oe=ve($e,[["__scopeId","data-v-44cd3c43"]]),qe={__name:"index",setup(l){U(),G();let k=C(u.uuid()),m=C(u.createEmptyDataSource()),b=N(i());N(I());let v=C(!1),d=N(T());const s="edit-icon";O(async()=>{await h()});function i(){return{pageNumber:1,sortBy:"serviceTypeId",serviceTypeIds:[],name:null,description:null}}async function h(){v.value=!0;let o=await he.getIcons();u.validateResponse(o,null,async()=>{m.value.items=o.data,m.value.total=o.data.length}),v.value=!1}async function P(o){b.sortBy=o,await h()}async function c(o){b.pageNumber=o,await h()}async function z(o){v.value=!0;let y=await le.getIconById(o.id);u.validateResponse(y,null,async()=>{Object.assign(d,y.data),u.showModalById(s)}),v.value=!1}function I(){return{texts:[{language:"pt",name:null,description:null},{language:"en",name:null,description:null}]}}function T(){return{icon:null,id:null,texts:[{language:"pt",name:null,description:null},{language:"en",name:null,description:null}]}}return(o,y)=>{const j=n("ccolumn"),t=n("table-action-edit"),r=n("ctable"),w=n("accordion");return L(),W(de,null,[ae("div",null,[a(w,{id:e(k),title:o._lang.backoffice.objectParams.icons.title,collapsed:!1,class:"mb-4"},{default:g(()=>[a(r,{onSort:P,onChangePage:c,data:e(m),checkbox:!1,loading:e(v),defaultSort:"serviceTypeId"},{columns:g(()=>[a(j,{name:o._lang.label.name,field:"name",sortable:!1},null,8,["name"]),a(j,{name:o._lang.label.icon,field:"icon",sortable:!1,align:e(f).columnAlign.center,custom:Oe},null,8,["name","align"])]),actions:g(A=>[a(t,{onClick:p=>z(A.item)},null,8,["onClick"])]),_:1},8,["data","loading"])]),_:1},8,["id","title"])]),a(Le,{modelValue:e(d),"onUpdate:modelValue":y[0]||(y[0]=A=>Q(d)?d.value=A:d=A),onSearch:h},null,8,["modelValue"])],64)}}},Xe={__name:"index",setup(l){return(k,m)=>{const b=n("breadcrumb-item"),v=n("breadcrumb"),d=n("card"),s=n("page");return L(),K(s,{title:k._lang.backoffice.objectParams.pageTitle},{breadcrumb:g(()=>[a(v,{"has-home":!0},{default:g(()=>[a(b,{label:k._lang.backoffice.objectParams.pageTitle},null,8,["label"])]),_:1})]),default:g(()=>[a(d,{shadow:!0},{body:g(()=>[a(ze),a(Ae),a(Me),a(Ve),a(Be),a(Ee),a(qe),a(we),a(Se)]),_:1})]),_:1},8,["title"])}}};export{Xe as default};
