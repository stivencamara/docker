import{_ as z}from"./delete-confirm-e6e6978f.js";import{g as J,i as q,J as H,r as u,s as S,G as C,u as i,o as Q,K as X,k as s,c as Y,l as Z,w as r,n as a,p as l,W as $,I as g,z as x}from"./index-c417b10a.js";import{u as ee,p as I}from"./params-0ba19dd7.js";import"./helpers-422844e7.js";import"./index.esm-29b873a2.js";const re={__name:"index",setup(ae){const w=J();q();const B=ee(),D=H();let c=u(!1),m=u([]),p=u([]),f=u(S.tableSelectedState.none),o=C(k()),b=u(i.createEmptyDataSource());C({});let v=u(0);function k(){return{pageNumber:1,sortBy:"description",name:null}}Q(async()=>{await d()});function E(e){w.push({name:x.router.BACKOFFICE_SETTINGS_EDIT_PARAMS_PAGE.name,params:{parameterId:i.encodeId(e.parameterId)}})}async function M(){Object.assign(o,k()),await y()}async function y(){o.pageNumber=1,await d()}async function T(e){o.sortBy=e,await d()}async function h(e){o.pageNumber=e,await d()}async function d(){c.value=!0,o.parameterId?o.parameterIds=[o.parameterId]:o.parameterIds=[];let e=await I.search(o);i.validateResponse(e,null,()=>{b.value=e.data,b.value.items.forEach(n=>{i.isDate(n.value)&&(n.value=i.formatDate(new Date(n.value)))})}),c.value=!1}async function L(e){v.value=e.parameterId}async function N(){i.closeModalById("confirm-delete"),await d()}return X(async()=>{c.value=!0;const e=await I.getLists(D.getLanguage);i.validateResponse(e,null,()=>{B.setLists(e.data)}),c.value=!1}),(e,n)=>{const P=s("breadcrumb-item"),R=s("breadcrumb"),A=s("form-field"),U=s("row"),V=s("cfilter"),_=s("ccolumn"),F=s("table-action-edit"),G=s("table-action-delete"),K=s("ctable"),O=s("card"),W=s("page");return Y(),Z(W,{title:e._lang.backoffice.settings.params.pageTitle},{breadcrumb:r(()=>[a(R,{"has-home":!0},{default:r(()=>[a(P,{label:e._lang.backoffice.settings.params.breadcrumbTitle},null,8,["label"])]),_:1})]),default:r(()=>[a(O,{shadow:!0},{body:r(()=>[a(V,{title:e._lang.common.filter,disabled:l(c),"clear-click":M,"apply-click":y,loading:l(c),collapsed:!0},{default:r(()=>[a(U,null,{default:r(()=>[a(A,{id:"name",modelValue:l(o).name,"onUpdate:modelValue":n[0]||(n[0]=t=>l(o).name=t),class:"mb-3 col-12",label:e._lang.label.name,type:l(S).inputs.text,maxlength:45,disabled:l(c)},null,8,["modelValue","label","type","disabled"])]),_:1})]),_:1},8,["title","disabled","loading"]),a($,null,{default:r(()=>[a(K,{onSort:T,onChangePage:h,selectedItems:l(m),"onUpdate:selectedItems":n[1]||(n[1]=t=>g(m)?m.value=t:m=t),unselectedItems:l(p),"onUpdate:unselectedItems":n[2]||(n[2]=t=>g(p)?p.value=t:p=t),selectedState:l(f),"onUpdate:selectedState":n[3]||(n[3]=t=>g(f)?f.value=t:f=t),data:l(b),checkbox:!1,loading:l(c),defaultSort:"description"},{columns:r(()=>[a(_,{name:e._lang.label.name,field:"name",sortable:!0},null,8,["name"]),a(_,{name:e._lang.label.description,field:"description",sortable:!0},null,8,["name"]),a(_,{name:e._lang.label.value,field:"value",sortable:!0},null,8,["name"])]),actions:r(t=>[a(F,{onClick:j=>E(t.item)},null,8,["onClick"]),a(G,{onClick:j=>L(t.item)},null,8,["onClick"])]),_:1},8,["selectedItems","unselectedItems","selectedState","data","loading"])]),_:1})]),_:1}),a(z,{"item-id":l(v),resource:e._lang.backoffice.settings.params,action:N,service:l(I)},null,8,["item-id","resource","service"])]),_:1},8,["title"])}}};export{re as default};
