import{_ as j}from"./form-112566e6.js";import{g as H,f as U,i as q,r as o,G as R,s as D,j as y,N as B,K as Y,u as n,z as m,k as O,c as F,l as x,w as I,n as l,p as e,e as V,F as z,I as E}from"./index-a14ad215.js";import{p as h}from"./point-of-care-4055b36e.js";import{p as C}from"./helpers-bdeacb10.js";import{u as J}from"./point-of-care-86564745.js";import{u as Q}from"./index.esm-97dcd533.js";import{b as W}from"./helpers-71142cd6.js";import{e as X}from"./edit-actions-913d0dbe.js";import"./contacts-5142be00.js";import"./location-504e7ab6.js";import"./address-809a8351.js";import"./organization-4f7bdfd2.js";import"./address.vue_vue_type_style_index_0_scoped_5480b292_lang-b87b4179.js";import"./service-9ca2bd37.js";import"./refusal-4e803a93.js";import"./index.esm-88a1129f.js";import"./generic-90322b29.js";import"./service-a0c37778.js";import"./helpers-11fd24aa.js";import"./helpers-a264fdb9.js";import"./cancel-confirm-ab082f5c.js";import"./settings-739a4c13.js";/* empty css                                                                     */const Fe={__name:"edit",setup(Z){const L=H(),d=U(),w=q(),f=J();let r=o(!0),a=R(C.newForm()),i=o(D.language.pt);o([]);let k=R(C.formRules()),g=o(0),b=o(0),p=o(0),M=o(0),_=o(0),v=o([]);const T=Q(k,a),N=y(()=>_.value===100&&!r.value);async function S(){r.value=!0;const t=await h.getById(g.value,b.value);n.validateResponse(t,null,()=>{Object.assign(a,t.data),f.setFormToCompare(n.cloneObject(t.data))}),r.value=!1}async function A(){r.value=!0;const t=await h.getLists(i.value);n.validateResponse(t,null,()=>{f.setLists(t.data)}),r.value=!1}B(()=>i.value,()=>{A()}),Y(async()=>{g.value=n.decodeId(d.params.pointOfCareId),b.value=n.decodeId(d.params.pointOfCareVersion),p.value=n.decodeId(d.params.organizationId),M.value=n.decodeId(d.params.organizationVersion),!g.value||!b.value?L.push({name:m.router.BACKOFFICE_POINT_OF_CARE_PAGE.name}):(await A(),await S())}),B(()=>[a.texts[0].name,a.organization,a.organizationHost,a.startDate,a.channel.channelTypeId,a.address.zipCode,a.address.islandId,a.address.countyId,a.address.parishId,a.address.locality,a.address.address],()=>{a.channel.channelTypeId==6||a.channel.channelTypeId==2?(v.value=C.progressFieldsAddress(),a.address.isRequired=!0):(v.value=C.progressFields(),a.address.isRequired=!1),W.calculatePercentage(a,v.value,t=>{f.setProgress(t),_.value=t})});const P=y(()=>p.value>0?`${m.router.BACKOFFICE_EDIT_ENTITY_PAGE.path.replace(":organizationId",d.params.organizationId).replace(":organizationVersion",d.params.organizationVersion)}#pontosatendimento`:m.router.BACKOFFICE_POINT_OF_CARE_PAGE.name);return(t,u)=>{const c=O("breadcrumb-item"),G=O("breadcrumb"),K=O("page");return F(),x(K,{title:t._lang.backoffice.pointOfCare.editPageTitle},{breadcrumb:I(()=>[l(G,{"has-home":!0},{default:I(()=>[e(p)>0?(F(),V(z,{key:0},[l(c,{label:t._lang.backoffice.entities.breadcrumbTitle,"router-path":e(m).router.BACKOFFICE_ENTITIES_PAGE.path},null,8,["label","router-path"]),l(c,{label:e(w).common.entity,"router-path":e(P)},null,8,["label","router-path"]),l(c,{label:t._lang.backoffice.pointOfCare.editPageTitle},null,8,["label"])],64)):(F(),V(z,{key:1},[l(c,{label:t._lang.backoffice.pointOfCare.breadcrumbTitle,"router-path":e(m).router.BACKOFFICE_POINT_OF_CARE_PAGE.path},null,8,["label","router-path"]),l(c,{label:t._lang.backoffice.pointOfCare.editPageTitle},null,8,["label"])],64))]),_:1})]),actions:I(()=>[l(X,{loading:e(r),"onUpdate:loading":u[0]||(u[0]=s=>E(r)?r.value=s:r=s),canSubmit:e(N),selectedLang:e(i),"onUpdate:selectedLang":u[1]||(u[1]=s=>E(i)?i.value=s:i=s),backRoute:e(P),directBackRoute:e(p)>0,service:e(h),itemId:e(g),itemVersion:e(b),formModel:e(a),vuelidate:e(T),store:e(f),resource:t._lang.backoffice.pointOfCare,itemIdField:"pointOfCareId",progressFields:e(v)},null,8,["loading","canSubmit","selectedLang","backRoute","directBackRoute","service","itemId","itemVersion","formModel","vuelidate","store","resource","progressFields"])]),default:I(()=>[l(j,{formModel:e(a),"onUpdate:formModel":u[2]||(u[2]=s=>E(a)?a.value=s:a=s),disabled:!1,validateForm:!0,loading:e(r),selectedLang:e(i),rules:e(k),isExternalEdit:e(p)>0,vuelidate:e(T),progressValue:e(_),"show-progress":!0},null,8,["formModel","loading","selectedLang","rules","isExternalEdit","vuelidate","progressValue"])]),_:1},8,["title"])}}};export{Fe as default};
