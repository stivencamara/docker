import{_ as q}from"./delete-confirm-682a5f75.js";import{g as H,i as J,K as z,r as u,t as S,H as C,u as i,o as Q,L as X,k as s,c as Y,l as Z,m as r,p as a,q as l,W as $,J as g,A as x}from"./index-61b82425.js";import{u as ee,p as v}from"./params-96071d13.js";import"./helpers-6dcc39e2.js";import"./index.esm-8d490d0e.js";const re={__name:"index",setup(ae){const w=H();J();const B=ee(),D=z();let c=u(!1),m=u([]),p=u([]),f=u(S.tableSelectedState.none),o=C(k()),b=u(i.createEmptyDataSource());C({});let I=u(0);function k(){return{pageNumber:1,sortBy:"description",name:null}}Q(async()=>{await d()});function E(e){w.push({name:x.router.BACKOFFICE_SETTINGS_EDIT_PARAMS_PAGE.name,params:{parameterId:i.encodeId(e.parameterId)}})}async function L(){Object.assign(o,k()),await y()}async function y(){o.pageNumber=1,await d()}async function M(e){o.sortBy=e,await d()}async function T(e){o.pageNumber=e,await d()}async function d(){c.value=!0,o.parameterId?o.parameterIds=[o.parameterId]:o.parameterIds=[];let e=await v.search(o);i.validateResponse(e,null,()=>{b.value=e.data,b.value.items.forEach(n=>{i.isDate(n.value)&&(n.value=i.formatDate(new Date(n.value)))})}),c.value=!1}async function h(e){I.value=e.parameterId}async function A(){i.closeModalById("confirm-delete"),await d()}return X(async()=>{c.value=!0;const e=await v.getLists(D.getLanguage);i.validateResponse(e,null,()=>{B.setLists(e.data)}),c.value=!1}),(e,n)=>{const N=s("breadcrumb-item"),P=s("breadcrumb"),R=s("form-field"),U=s("row"),V=s("cfilter"),_=s("ccolumn"),F=s("table-action-edit"),G=s("table-action-delete"),K=s("ctable"),O=s("card"),W=s("page");return Y(),Z(W,{title:e._lang.backoffice.settings.params.pageTitle},{breadcrumb:r(()=>[a(P,{"has-home":!0},{default:r(()=>[a(N,{label:e._lang.backoffice.settings.params.breadcrumbTitle},null,8,["label"])]),_:1})]),default:r(()=>[a(O,{shadow:!0},{body:r(()=>[a(V,{title:e._lang.common.filter,disabled:l(c),"clear-click":L,"apply-click":y,loading:l(c),collapsed:!0},{default:r(()=>[a(U,null,{default:r(()=>[a(R,{id:"name",modelValue:l(o).name,"onUpdate:modelValue":n[0]||(n[0]=t=>l(o).name=t),class:"mb-3 col-12",label:e._lang.label.name,type:l(S).inputs.text,maxlength:45,disabled:l(c)},null,8,["modelValue","label","type","disabled"])]),_:1})]),_:1},8,["title","disabled","loading"]),a($,null,{default:r(()=>[a(K,{onSort:M,onChangePage:T,selectedItems:l(m),"onUpdate:selectedItems":n[1]||(n[1]=t=>g(m)?m.value=t:m=t),unselectedItems:l(p),"onUpdate:unselectedItems":n[2]||(n[2]=t=>g(p)?p.value=t:p=t),selectedState:l(f),"onUpdate:selectedState":n[3]||(n[3]=t=>g(f)?f.value=t:f=t),data:l(b),checkbox:!1,loading:l(c),defaultSort:"description"},{columns:r(()=>[a(_,{name:e._lang.label.name,field:"name",sortable:!0},null,8,["name"]),a(_,{name:e._lang.label.description,field:"description",sortable:!0},null,8,["name"]),a(_,{name:e._lang.label.value,field:"value",sortable:!0},null,8,["name"])]),actions:r(t=>[a(F,{onClick:j=>E(t.item)},null,8,["onClick"]),a(G,{onClick:j=>h(t.item)},null,8,["onClick"])]),_:1},8,["selectedItems","unselectedItems","selectedState","data","loading"])]),_:1})]),_:1}),a(q,{"item-id":l(I),resource:e._lang.backoffice.settings.params,action:A,service:l(v)},null,8,["item-id","resource","service"])]),_:1},8,["title"])}}};export{re as default};
