import{g as q,ai as z,E as Q,r as b,k as a,c as S,l as D,w as d,n as s,p as e,s as t,z as P,u as G}from"./index-255cb3f5.js";import{u as T}from"./users-626c46cb.js";import{b as g}from"./helpers-3a01797c.js";import{u as h}from"./index.esm-a0301e1b.js";import"./index.esm-d39b5f1a.js";const N={__name:"index",setup(I){const _=q(),u=new z,y=`MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDMYJLQ2EcdtPKDiy3jV0BonMAg\r
7sjv7j/0UsISY1rQg5nv3i2nRcAnUQE3FLYIoJJzjDiL+BNC3rflW8kEwXUgbWIy\r
RsVcsvrn6t+BcsYFYgdSbTqCT4pL/XSPV0HL/ouk9M68Nig4B6/AiYpzO0TDtqNu\r
ebO+pHtamPoGpZR4yQIDAQAB`;u.setPublicKey(y);var r=Q({oldPassword:"",newPassword:""}),i=b(!1),c=b(!1);const v={oldPassword:{required:g.requiredMessage()},newPassword:{required:g.requiredMessage()}},l=h(v,r);function E(){m(P.router.HOME_PAGE.name)}async function k(){if(i.value=!0,c.value=!0,await l.value.$validate(),!l.value.$error){const o={newPassword:u.encrypt(r.newPassword),oldPassword:u.encrypt(r.oldPassword)},n=await T.changePassword(o);G.validateResponse(n,"Palavra pass alterada",()=>{m(P.router.HOME_PAGE.name),c.value=!1})}i.value=!1}function m(o){_.push({name:o})}return(o,n)=>{const w=a("form-field"),A=a("row"),f=a("cbutton"),M=a("table-actions"),C=a("container-wrapper"),V=a("card"),B=a("page");return S(),D(B,{title:o._lang.backoffice.changePassword.pageTitle},{default:d(()=>[s(V,{shadow:!0},{body:d(()=>[s(C,null,{default:d(()=>[s(A,null,{default:d(()=>[s(w,{type:e(t).inputs.password,id:"oldPassword",label:o._lang.label.oldPassword,required:!0,class:"mb-3 col-12 col-md-6",modelValue:e(r).oldPassword,"onUpdate:modelValue":n[0]||(n[0]=p=>e(r).oldPassword=p),disabled:e(i),showError:e(c)&&e(l).oldPassword.$error,"error-message":o._errorMessageField(e(l).oldPassword)},null,8,["type","label","modelValue","disabled","showError","error-message"]),s(w,{id:"newPassword",modelValue:e(r).newPassword,"onUpdate:modelValue":n[1]||(n[1]=p=>e(r).newPassword=p),class:"mb-3 col-12 col-md-6",label:o._lang.label.newPassword,type:e(t).inputs.password,disabled:e(i),required:!0,showError:e(c)&&e(l).newPassword.$error,"error-message":o._errorMessageField(e(l).newPassword)},null,8,["modelValue","label","type","disabled","showError","error-message"])]),_:1}),s(M,{title:""},{default:d(()=>[s(f,{class:"col-12 col-sm-auto",type:e(t).buttonType.secondary,size:e(t).buttonSize.large,title:o._lang.common.cancel,onClick:E},null,8,["type","size","title"]),s(f,{class:"col-12 col-sm-auto",type:e(t).buttonType.primary,size:e(t).buttonSize.large,title:o._lang.common.confirm,onClick:k},null,8,["type","size","title"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])}}};export{N as default};
