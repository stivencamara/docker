import{r as y,k as $,H as be,N as ne,v as r,u as I,l as i,c as E,m as q,n as _,q as l,s as e,L as A,A as z,i as ee,h as ve,j as x,o as le,B as G,Y as Ce,P as te,e as Z,U as ye,V as _e,W as Ve,F as ie,x as Se,M as we,C as Le,f as Oe,g as Te,y as Fe,O as Ee}from"./index-ecfd29ec.js";import{u as ae}from"./service-82dbcbc8.js";import{r as Be}from"./index.esm-8adcd136.js";import{b as J}from"./helpers-42575dad.js";import{a as he,_ as Ue}from"./address.vue_vue_type_style_index_0_scoped_5480b292_lang-2f6bbb17.js";import{s as oe}from"./service-e9b4c2c0.js";import{_ as Ie}from"./form-10750d2b.js";import{s as $e}from"./settings-1fa7723b.js";import{u as ge}from"./index.esm-cb17d3b3.js";import{s as X}from"./helpers-29ad8680.js";import{l as fe}from"./legislation-4a52b094.js";import{u as Ae}from"./organization-8990d7d0.js";import{h as me}from"./helpers-93b2601c.js";import{_ as qe,a as Me}from"./refusal-64a629f9.js";import{_ as Pe}from"./generic-a111898d.js";import{p as pe}from"./point-of-care-242a3b32.js";import{u as Re}from"./point-of-care-6e2088e5.js";import{p as je}from"./helpers-52c527b5.js";const Ne={__name:"description",props:{modelValue:{type:Object,required:!0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},selectedLang:{type:[String,Number],required:!0},validateForm:{type:Boolean,default:!1},rules:{type:Object,default:{}},vuelidate:{type:Object,default:null}},emits:["update:modelValue"],setup(C,{emit:s}){const n=C,t=ae();let v=y(!0),g=y([]);const a=$(()=>{let c=be.getUser();return!c||!c.name?!1:c.name.toLowerCase()==="guest"});ne(async()=>{a.value||await b()});const o=$({get(){return n.modelValue},set(c){s("update:modelValue",c)}}),u=$(()=>n.selectedLang),V=$({get(){return J.getFieldByLangAndName(o.value,u.value,"description")},set(c){J.setFieldByLangAndName(o.value,u.value,"description",c)}});$({get(){return J.getFieldByLangAndName(o.value,u.value,"serviceProcedure")},set(c){J.setFieldByLangAndName(o.value,u.value,"serviceProcedure",c)}});const f=$(()=>u.value===r.language.en);async function b(){v.value=!0;const c=await oe.checklist();I.validateResponse(c,null,()=>{g.value=c.data}),v.value=!1}return(c,S)=>{const p=i("form-field"),O=i("row"),L=i("accordion");return E(),q(L,{id:"description",title:c._lang.common.description,collapsed:!1,class:"mb-4"},{default:_(()=>[l(O,null,{default:_(()=>{var T,F,U;return[l(p,{id:"economicActivityId",class:"mb-3 col-12",modelValue:e(o).economicActivityId,"onUpdate:modelValue":S[0]||(S[0]=d=>e(o).economicActivityId=d),label:c._lang.label.economicActivityId,disabled:n.disabled||e(f),loading:n.loading,type:e(r).inputs.multiselect,required:n.validateForm,placeholder:c._lang.common.selectOption,showError:n.validateForm&&((F=(T=n.vuelidate)==null?void 0:T.economicActivityId)==null?void 0:F.$error),"error-message":c._errorMessageField((U=n.vuelidate)==null?void 0:U.economicActivityId),options:e(t).economicActivityList},null,8,["modelValue","label","disabled","loading","type","required","placeholder","showError","error-message","options"])]}),_:1}),e(v)?z("",!0):(E(),q(p,{key:0,id:"description",class:"mb-3 col-12",modelValue:e(V),"onUpdate:modelValue":S[1]||(S[1]=T=>A(V)?V.value=T:null),label:c._lang.label.description,disabled:n.disabled,loading:n.loading,type:e(r).inputs.richtext,language:e(u),maxlength:4e3,templates:e(g)},null,8,["modelValue","label","disabled","loading","type","language","templates"]))]),_:1},8,["title"])}}},ze={__name:"create",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(C,{emit:s}){const n=C,t=ee();ve();const v="create-legislation";let g=y([]),a=x(X.legislationNewForm()),o=y(!1),u=y(r.language.pt);const V=ge(X.legislationFormRules(),a,{$scope:!1}),f=$({get(){return n.modelValue},set(p){s("update:modelValue",p)}});async function b(){o.value=!0;let p=await $e.getLanguages();I.validateResponse(p,null,()=>{g.value=p.data}),o.value=!1}function c(){a=Object.assign(a,X.legislationNewForm()),V.value.$reset()}async function S(){if(o.value=!0,await V.value.$validate(),!V.value.$error){const p={legislationId:a.legislationId,name:a.texts[0].name,code:a.code,document:a.document,texts:a.texts};f.value.find(L=>L.name===p.name&&L.description===p.description)?G.warning(t.backoffice.service.legislationExists):(f.value.push(p),a=Object.assign(a,X.legislationNewForm()),V.value.$reset(),I.closeModalById(v),G.success(t.backoffice.service.legislationAdded))}o.value=!1}return le(async()=>{await b()}),(p,O)=>{const L=i("lang-selector"),T=i("top-actions"),F=i("cbutton"),U=i("modal");return E(),q(U,{id:v,title:p._lang.backoffice.service.addLegislation,size:e(r).modalSize.extraLarge},{body:_(()=>[l(T,null,{default:_(()=>[l(L,{options:e(g),selectedLang:e(u),"onUpdate:selectedLang":O[0]||(O[0]=d=>A(u)?u.value=d:u=d),disabled:e(o)},null,8,["options","selectedLang","disabled"])]),_:1}),l(Ie,{modelValue:e(a),"onUpdate:modelValue":O[1]||(O[1]=d=>A(a)?a.value=d:a=d),selectedLang:e(u),loading:e(o),disabled:e(o),vuelidate:e(V)},null,8,["modelValue","selectedLang","loading","disabled","vuelidate"])]),footer:_(()=>[l(F,{title:p._lang.common.cancel,type:e(r).buttonType.secondary,"data-bs-dismiss":"modal","aria-label":"Close",disabled:e(o),onClick:c},null,8,["title","type","disabled"]),l(F,{title:p._lang.common.save,onClick:S,disabled:e(o)},null,8,["title","disabled"])]),_:1},8,["title","size"])}}},xe={__name:"search-legislation",props:{modelValue:{type:Object,required:!0},selectedLang:{type:[String,Number],required:!0},vuelidate:{type:Object,default:null}},emits:["update:modelValue","apply"],setup(C,{emit:s}){const n=C;Ae();const t="search-legislation";let v=y(!1),g=y(0),a=y(!1),o=x(I.createEmptyDataSource()),u=x(S()),V=x(n.modelValue);ne(async()=>{await L()});const f=$({get(){return n.modelValue},set(d){s("update:modelValue",d)}});async function b(d){u.sortBy=d,await L()}async function c(d){u.pageIndex=d,await L()}function S(){return{pageNumber:1,sortBy:"legislationId",name:null,code:null}}async function p(){Object.assign(u,S()),await U()}async function O(){await L()}async function L(){v.value=!0,u.legislationId?u.legislationIds=[u.legislationId]:u.legislationIds=[];let d=await fe.search(u);I.validateResponse(d,null,()=>{o=d.data}),v.value=!1}async function T(d){const B=await fe.getById(d.legislationId,d.legislationVersion);I.validateResponse(B,null,()=>{Object.assign(V,B.data),f.value=B.data,a.value=!0}),g.value++}function F(){}function U(){s("apply")}return(d,B)=>{const M=i("form-field"),N=i("row"),j=i("cfilter"),R=i("ccolumn"),Q=i("table-action-detail"),W=i("ctable"),P=i("accordion"),D=i("cbutton"),k=i("modal");return E(),q(k,{id:t,title:d._lang.backoffice.settings.legislation.searchTitle,size:e(r).modalSize.extraLarge,"remove-padding":!0},{body:_(()=>[l(j,{title:d._lang.common.filter,"clear-click":p,"apply-click":O,loading:e(v),collapsed:!1},{default:_(()=>[l(N,null,{default:_(()=>[l(M,{id:"code-filter",class:"mb-3 col-12 col-md-6",label:d._lang.label.code,type:e(r).inputs.text,maxlength:45,modelValue:e(u).organizationId,"onUpdate:modelValue":B[0]||(B[0]=m=>e(u).organizationId=m)},null,8,["label","type","modelValue"]),l(M,{id:"name-filter",class:"mb-3 col-12 col-md-6",label:d._lang.label.name,type:e(r).inputs.text,maxlength:45,modelValue:e(u).name,"onUpdate:modelValue":B[1]||(B[1]=m=>e(u).name=m)},null,8,["label","type","modelValue"])]),_:1})]),_:1},8,["title","loading"]),l(Ce,null,{default:_(()=>[l(W,{onSort:b,onChangePage:c,data:e(o),loading:e(v),checkbox:!1},{columns:_(()=>[l(R,{name:d._lang.label.code,field:"code",sortable:!0},null,8,["name"]),l(R,{name:d._lang.label.name,field:"name",sortable:!0},null,8,["name"])]),actions:_(m=>[l(Q,{onClick:w=>T(m.item)},null,8,["onClick"])]),_:1},8,["data","loading"])]),_:1}),(E(),q(P,{id:"legislation",title:d._lang.backoffice.entities.legislation,collapsed:e(a),class:"mt-4",key:e(g)},{default:_(()=>[l(Ie,{modelValue:e(V),"onUpdate:modelValue":B[2]||(B[2]=m=>A(V)?V.value=m:V=m),disabled:!1,validateForm:!1,vuelidate:n.vuelidate,selectedLang:n.selectedLang},null,8,["modelValue","vuelidate","selectedLang"])]),_:1},8,["title","collapsed"]))]),footer:_(()=>[l(D,{type:"primary",size:"large",title:d._lang.common.apply,"data-bs-dismiss":"modal",onClick:U},null,8,["title"]),l(D,{type:"secondary",size:"large",title:d._lang.common.cancel,"data-bs-dismiss":"modal",onClick:F},null,8,["title"])]),_:1},8,["title","size"])}}},De={__name:"legislations",props:{modelValue:{type:Array,required:!0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},rules:{type:Object,default:{}},selectedLang:{type:[String,Number],required:!0}},emits:["update:modelValue"],setup(C,{emit:s}){const n=C,t=ee();let v=y(!1),g=y(0),a=x(me.newForm()),o=x(me.formRules());const u=$(()=>I.createEmptyDataSource(b.value)),V=ge(o,a,{$scope:!1}),f="confirm-delete-legislation",b=$({get(){return n.modelValue},set(d){s("update:modelValue",d)}});let c=y(null);const S=y(te.havePermission(r.permissions.service.createEdit));function p(d){c.value=d}function O(){c.value&&(I.removeItemOfArray(b.value,c),G.success(t.backoffice.service.legislationRemoved),c.value=null)}function L(d){I.sortArrayOffline(d,u.value.items)}function T(d){d.download&&I.downloadFile(d.download)}async function F(){if(v.value=!0,await V.value.$validate(),!V.value.$error){const d={legislationId:a.legislationId,name:a.texts[0].name,code:a.code,document:a.document,texts:a.texts};b.value.find(M=>M.name===d.name&&M.description===d.description)?G.warning(t.backoffice.service.legislationExists):(b.value.push(d),a=Object.assign(a,X.legislationNewForm()),V.value.$reset(),G.success(t.backoffice.service.legislationAdded))}v.value=!1}function U(){Object.assign(a,me.newForm())}return(d,B)=>{const M=i("table-actions"),N=i("ccolumn"),j=i("table-action-download"),R=i("table-action-delete"),Q=i("ctable"),W=i("confirm-delete-modal");return E(),Z(ie,null,[l(Ve,{id:"legislations",title:d._lang.backoffice.service.legislations,collapsed:!1,class:"mb-4"},{default:_(()=>[S.value?(E(),q(M,{key:0},{default:_(()=>[l(ye,{target:"search-legislation",class:"d-inline",type:e(r).buttonType.secondary,title:d._lang.common.toAdd,disabled:n.disabled,icon:_e,onClick:U},null,8,["type","title","disabled"])]),_:1})):z("",!0),l(Q,{data:e(u),loading:e(v),checkbox:!1,showPagination:!1,onSort:L},{columns:_(()=>[l(N,{name:d._lang.label.code,field:"code",sortable:!0},null,8,["name"]),l(N,{name:d._lang.common.name,field:"name",sortable:!0},null,8,["name"])]),actions:_(P=>[P.item.download?(E(),q(j,{key:0,onClick:D=>T(P.item)},null,8,["onClick"])):z("",!0),l(R,{id:f,onClick:D=>p(P.item)},null,8,["onClick"])]),_:1},8,["data","loading"])]),_:1},8,["title"]),l(ze,{modelValue:e(b),"onUpdate:modelValue":B[0]||(B[0]=P=>A(b)?b.value=P:null)},null,8,["modelValue"]),l(W,{id:f,title:d._lang.backoffice.service.deleteLegislation,message:d._lang.backoffice.service.deleteLegislationQuestion,action:O},null,8,["title","message"]),(E(),q(xe,{modelValue:e(a),"onUpdate:modelValue":B[1]||(B[1]=P=>A(a)?a.value=P:a=P),key:e(g),onApply:F,selectedLang:n.selectedLang,vuelidate:e(V)},null,8,["modelValue","selectedLang","vuelidate"]))],64)}}},He={__name:"create",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(C,{emit:s}){const n=C,t=ae(),v=ee();ve();const g="create-recipient";let a=x(f()),o=y(!1);const u=ge(X.recipientFormRules(),a,{$scope:!1}),V=$({get(){return n.modelValue},set(S){s("update:modelValue",S)}});function f(){return{recipientId:null,name:null,description:null,informationLevel:!1,recipientTypeId:null,recipientType:null}}function b(){a=Object.assign(a,f()),u.value.$reset()}async function c(){if(o.value=!0,await u.value.$validate(),!u.value.$error){const S={recipientId:a.recipientId,recipientTypeId:a.recipientTypeId,recipientType:J.getLabel(t.recipientTypeList,a.recipientTypeId),name:a.name,description:a.description,document:a.document};V.value.find(O=>O.name===a.name&&O.description===a.description)?G.warning(v.backoffice.service.recipientExists):(V.value.push(S),a=Object.assign(a,f()),u.value.$reset(),I.closeModalById(g),G.success(v.backoffice.service.recipientAdded))}o.value=!1}return(S,p)=>{const O=i("form-field"),L=i("cbutton"),T=i("modal");return E(),q(T,{id:g,title:S._lang.backoffice.service.addRecipient,size:e(r).modalSize.extraLarge},{body:_(()=>[l(O,{id:"name",class:"mb-3 col-12",modelValue:e(a).name,"onUpdate:modelValue":p[0]||(p[0]=F=>e(a).name=F),label:S._lang.label.name,disabled:n.disabled,loading:n.loading,type:e(r).inputs.text,maxlength:255,required:!0,"show-error":e(u).name.$error,"error-message":S._errorMessageField(e(u).name)},null,8,["modelValue","label","disabled","loading","type","show-error","error-message"]),l(O,{id:"description",class:"mb-3 col-12",modelValue:e(a).description,"onUpdate:modelValue":p[1]||(p[1]=F=>e(a).description=F),label:S._lang.label.description,disabled:n.disabled,loading:n.loading,type:e(r).inputs.text,maxlength:255},null,8,["modelValue","label","disabled","loading","type"]),l(O,{id:"recipientTypeId",class:"mb-3 col-12",modelValue:e(a).recipientTypeId,"onUpdate:modelValue":p[2]||(p[2]=F=>e(a).recipientTypeId=F),label:S._lang.label.recipientTypeId,disabled:n.disabled,loading:n.loading,type:e(r).inputs.multiselect,placeholder:S._lang.common.selectOption,options:e(t).recipientTypeList},null,8,["modelValue","label","disabled","loading","type","placeholder","options"])]),footer:_(()=>[l(L,{title:S._lang.common.cancel,type:e(r).buttonType.secondary,"data-bs-dismiss":"modal","aria-label":"Close",disabled:e(o),onClick:b},null,8,["title","type","disabled"]),l(L,{title:S._lang.common.save,onClick:c,disabled:e(o)},null,8,["title","disabled"])]),_:1},8,["title","size"])}}},Ke={__name:"recipients",props:{modelValue:{type:Array,required:!0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},rules:{type:Object,default:{}}},emits:["update:modelValue"],setup(C,{emit:s}){const n=C,t=ee();let v=y(!1);const g=$(()=>I.createEmptyDataSource(o.value)),a="confirm-delete",o=$({get(){return n.modelValue},set(p){s("update:modelValue",p)}});let u=y(null);const V=y(te.havePermission(r.permissions.service.createEdit));function f(p){u.value=p}function b(){u.value&&(I.removeItemOfArray(o.value,u),G.success(t.backoffice.service.recipientRemoved),u.value=null)}function c(p){I.sortArrayOffline(p,g.value.items)}function S(p){p.download&&I.downloadFile(p.download)}return(p,O)=>{const L=i("table-actions"),T=i("ccolumn"),F=i("table-action-download"),U=i("table-action-delete"),d=i("ctable"),B=i("confirm-delete-modal");return E(),Z(ie,null,[l(Ve,{id:"recipients",title:p._lang.backoffice.service.recipients,collapsed:!1,class:"mb-4"},{default:_(()=>[V.value?(E(),q(L,{key:0},{default:_(()=>[l(ye,{target:"create-recipient",class:"d-inline",type:e(r).buttonType.secondary,title:p._lang.common.toAdd,disabled:n.disabled,icon:_e},null,8,["type","title","disabled"])]),_:1})):z("",!0),l(d,{data:e(g),loading:e(v),checkbox:!1,showPagination:!1,onSort:c},{columns:_(()=>[l(T,{name:p._lang.label.name,field:"name",sortable:!0},null,8,["name"]),l(T,{name:p._lang.label.description,field:"description",sortable:!0},null,8,["name"]),l(T,{name:p._lang.label.recipientTypeId,sortField:"recipientTypeId",field:"recipientType",sortable:!0},null,8,["name"])]),actions:_(M=>[M.item.download?(E(),q(F,{key:0,onClick:N=>S(M.item)},null,8,["onClick"])):z("",!0),l(U,{id:a,onClick:N=>f(M.item),disabled:n.disabled},null,8,["onClick","disabled"])]),_:1},8,["data","loading"])]),_:1},8,["title"]),l(He,{modelValue:e(o),"onUpdate:modelValue":O[0]||(O[0]=M=>A(o)?o.value=M:null)},null,8,["modelValue"]),l(B,{id:a,title:p._lang.backoffice.service.deleteRecipient,message:p._lang.backoffice.service.deleteRecipientQuestion,action:b},null,8,["title","message"])],64)}}},Ge={__name:"state-support",props:{vuelidate:{type:Object,default:{}},modelValue:{type:Object,required:!0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},validateForm:{type:Boolean,default:!1},rules:{type:Object,default:{}},selectedLang:{type:[String,Number],required:!0}},emits:["update:modelValue"],setup(C,{emit:s}){const n=C;ae(),y(!1),le(async()=>{});const t=$({get(){return n.modelValue},set(g){s("update:modelValue",g)}}),v=$(()=>n.selectedLang===r.language.en);return(g,a)=>{const o=i("form-field"),u=i("row"),V=i("accordion");return E(),q(V,{id:"stateSupport",title:g._lang.backoffice.service.stateSupport,collapsed:!1,class:"mb-4"},{default:_(()=>[l(u,null,{default:_(()=>{var f,b;return[l(o,{id:"stateSupport",class:"mb-3 col-12 col-md-6 col-lg-3",modelValue:e(t).stateSupport.isStateSupport,"onUpdate:modelValue":a[0]||(a[0]=c=>e(t).stateSupport.isStateSupport=c),label:g._lang.label.stateSupport,disabled:n.disabled||e(v),loading:n.loading,type:e(r).inputs.checkbox},null,8,["modelValue","label","disabled","loading","type"]),l(o,{id:"stateSupportUrl",class:"mb-3 col-12",modelValue:e(t).stateSupport.url,"onUpdate:modelValue":a[1]||(a[1]=c=>e(t).stateSupport.url=c),required:e(t).stateSupport.isStateSupport,label:g._lang.label.serviceUrl,disabled:n.disabled||e(v)||!e(t).stateSupport.isStateSupport,loading:n.loading,type:e(r).inputs.text,showError:n.validateForm&&((f=n.vuelidate)==null?void 0:f.stateSupport.url.$error),"error-message":g._errorMessageField((b=n.vuelidate)==null?void 0:b.stateSupport.url),maxlength:2048},null,8,["modelValue","required","label","disabled","loading","type","showError","error-message"]),l(o,{id:"externalSystemId",class:"mb-3 col-12 col-md-6",modelValue:e(t).stateSupport.externalSystemId,"onUpdate:modelValue":a[2]||(a[2]=c=>e(t).stateSupport.externalSystemId=c),required:!1,label:g._lang.label.externalSystemId,disabled:n.disabled||e(v)||!e(t).stateSupport.isStateSupport,loading:n.loading,type:e(r).inputs.text,maxlength:1024},null,8,["modelValue","label","disabled","loading","type"]),l(o,{id:"processId",class:"mb-3 col-12 col-md-6",modelValue:e(t).stateSupport.processId,"onUpdate:modelValue":a[3]||(a[3]=c=>e(t).stateSupport.processId=c),required:!1,label:g._lang.label.processId,disabled:n.disabled||e(v)||!e(t).stateSupport.isStateSupport,loading:n.loading,type:e(r).inputs.text,maxlength:1024},null,8,["modelValue","label","disabled","loading","type"])]}),_:1})]),_:1},8,["title"])}}},Qe={key:0,class:"mb-3 col-12"},We={__name:"virtual",props:{vuelidate:{type:Object,default:{}},modelValue:{type:Object,required:!0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},validateForm:{type:Boolean,default:!1},rules:{type:Object,default:{}},selectedLang:{type:[String,Number],required:!0}},emits:["update:modelValue"],setup(C,{emit:s}){const n=C;ae(),le(async()=>{}),y(null),y(null),y(null),y(null);const t=$({get(){return n.modelValue},set(g){s("update:modelValue",g)}}),v=$(()=>n.selectedLang===r.language.en);return(g,a)=>{const o=i("form-field"),u=i("row"),V=i("accordion");return E(),q(V,{id:"virtual",title:g._lang.backoffice.service.virtual,collapsed:!1,class:"mb-4"},{default:_(()=>[l(u,null,{default:_(()=>{var f,b;return[l(o,{id:"virtual",class:"col-12 col-md-6 col-lg-3",modelValue:e(t).virtual.isVirtual,"onUpdate:modelValue":a[0]||(a[0]=c=>e(t).virtual.isVirtual=c),label:g._lang.label.virtual,disabled:n.disabled||e(v),loading:n.loading,type:e(r).inputs.checkbox},null,8,["modelValue","label","disabled","loading","type"]),e(t).virtual.isVirtual?(E(),Z("span",Qe,Se(g._lang.backoffice.service.virtualText),1)):z("",!0),l(o,{id:"virtualUrl",class:"mb-3 col-12",modelValue:e(t).virtual.url,"onUpdate:modelValue":a[1]||(a[1]=c=>e(t).virtual.url=c),required:e(t).virtual.isVirtual,label:g._lang.label.serviceUrl,disabled:n.disabled||e(v)||!e(t).virtual.isVirtual,loading:n.loading,type:e(r).inputs.text,showError:n.validateForm&&((f=n.vuelidate)==null?void 0:f.virtual.url.$error),"error-message":g._errorMessageField((b=n.vuelidate)==null?void 0:b.virtual.url),maxlength:2048},null,8,["modelValue","required","label","disabled","loading","type","showError","error-message"]),l(o,{id:"externalSystemId",class:"mb-3 col-12 col-md-6",modelValue:e(t).virtual.externalSystemId,"onUpdate:modelValue":a[2]||(a[2]=c=>e(t).virtual.externalSystemId=c),required:!1,label:g._lang.label.externalSystemId,disabled:n.disabled||e(v)||!e(t).virtual.isVirtual,loading:n.loading,type:e(r).inputs.text,maxlength:1024},null,8,["modelValue","label","disabled","loading","type"]),l(o,{id:"processId",class:"mb-3 col-12 col-md-6",modelValue:e(t).virtual.processId,"onUpdate:modelValue":a[3]||(a[3]=c=>e(t).virtual.processId=c),required:!1,label:g._lang.label.processId,disabled:n.disabled||e(v)||!e(t).virtual.isVirtual,loading:n.loading,type:e(r).inputs.text,maxlength:1024},null,8,["modelValue","label","disabled","loading","type"]),l(o,{id:"canExecutedByThirdParty",class:"mb-3 col-12",modelValue:e(t).virtual.canExecutedByThirdParty,"onUpdate:modelValue":a[4]||(a[4]=c=>e(t).virtual.canExecutedByThirdParty=c),required:!1,label:g._lang.label.canExecutedByThirdParty,disabled:n.disabled||e(v)||!e(t).virtual.isVirtual,loading:n.loading,type:e(r).inputs.checkbox,maxlength:1024},null,8,["modelValue","label","disabled","loading","type"])]}),_:1})]),_:1},8,["title"])}}},Ye={__name:"general",props:{modelValue:{type:Object,required:!0},selectedLang:Be,disabled:{Boolean,default:!0},rules:{Boolean,default:!0},validateForm:{Boolean,default:!1},loading:{Object,default:{}},isExternalEdit:{type:Boolean,default:!1},showProgress:{type:Boolean,default:!0},progressValue:{type:Number,default:0},vuelidate:{type:Object,default:{}}},setup(C){const s=C,n=ae(),t=$({get(){return s.modelValue},set(a){emit("update:modelValue",a)}}),v=$(()=>s.selectedLang),g=$(()=>v.value===r.language.en);return(a,o)=>{const u=i("progress-bar"),V=i("container-wrapper");return E(),Z(ie,null,[s.showProgress?(E(),q(V,{key:0,"margin-top":!1},{default:_(()=>[l(u,{value:C.progressValue,label:a._lang.common.fill,class:"mb-4 col-12 float-end"},null,8,["value","label"])]),_:1})):z("",!0),l(qe,{modelValue:e(t),"onUpdate:modelValue":o[0]||(o[0]=f=>A(t)?t.value=f:null),store:e(n)},null,8,["modelValue","store"]),l(e(he),{modelValue:e(t),"onUpdate:modelValue":o[1]||(o[1]=f=>A(t)?t.value=f:null),disabled:s.disabled,loading:C.loading,selectedLang:s.selectedLang,validateForm:s.validateForm,rules:s.rules,isExternalEdit:s.isExternalEdit,vuelidate:s.vuelidate},null,8,["modelValue","disabled","loading","selectedLang","validateForm","rules","isExternalEdit","vuelidate"]),l(e(Ge),{modelValue:e(t),"onUpdate:modelValue":o[2]||(o[2]=f=>A(t)?t.value=f:null),disabled:s.disabled,loading:C.loading,selectedLang:s.selectedLang,validateForm:s.validateForm,rules:s.rules,isExternalEdit:s.isExternalEdit,vuelidate:s.vuelidate},null,8,["modelValue","disabled","loading","selectedLang","validateForm","rules","isExternalEdit","vuelidate"]),l(e(We),{modelValue:e(t),"onUpdate:modelValue":o[3]||(o[3]=f=>A(t)?t.value=f:null),disabled:s.disabled,loading:C.loading,selectedLang:s.selectedLang,validateForm:s.validateForm,rules:s.rules,isExternalEdit:s.isExternalEdit,vuelidate:s.vuelidate},null,8,["modelValue","disabled","loading","selectedLang","validateForm","rules","isExternalEdit","vuelidate"]),l(e(Ne),{modelValue:e(t),"onUpdate:modelValue":o[4]||(o[4]=f=>A(t)?t.value=f:null),disabled:s.disabled,loading:C.loading,selectedLang:s.selectedLang,validateForm:s.validateForm,rules:s.rules,vuelidate:s.vuelidate},null,8,["modelValue","disabled","loading","selectedLang","validateForm","rules","vuelidate"]),l(e(Ke),{modelValue:e(t).recipients,"onUpdate:modelValue":o[5]||(o[5]=f=>e(t).recipients=f),disabled:s.disabled||e(g),loading:C.loading},null,8,["modelValue","disabled","loading"]),l(e(De),{modelValue:e(t).legislations,"onUpdate:modelValue":o[6]||(o[6]=f=>e(t).legislations=f),disabled:s.disabled,loading:C.loading,selectedLang:s.selectedLang},null,8,["modelValue","disabled","loading","selectedLang"]),l(e(Me),{modelValue:e(t),"onUpdate:modelValue":o[7]||(o[7]=f=>A(t)?t.value=f:null),disabled:s.disabled,loading:C.loading,selectedLang:s.selectedLang},null,8,["modelValue","disabled","loading","selectedLang"]),l(Pe,{modelValue:e(t),"onUpdate:modelValue":o[8]||(o[8]=f=>A(t)?t.value=f:null),disabled:s.disabled,loading:C.loading,selectedLang:e(v)},null,8,["modelValue","disabled","loading","selectedLang"])],64)}}},Je={__name:"search-service-points-modal",props:{serviceId:{Number,required:!0},serviceVersion:{Number,required:!0}},emits:["apply"],setup(C,{emit:s}){const n=C,t=Re(),v="search-pointOfCare-modal",g=ee(),a=we();let o=x(B()),u=y([]),V=y([]),f=y(I.createEmptyDataSource()),b=y(!1),c=y(!1),S=y(0),p=y("pt"),O=y(""),L=x(d()),T=y([]),F=y([]),U=y(r.tableSelectedState.none);function d(){return je.newForm()}function B(){return{pageNumber:1,sortBy:"Code",recordStateIds:[r.recordStateType.published],active:!0}}ne(async()=>{b.value=!0,u.value=I.convertEnumToArray(g.enums.recordStateType);const m=await pe.getLists(a.getLanguage);I.validateResponse(m,null,()=>{t.setLists(m.data),u.value=I.convertEnumToArray(g.enums.recordStateType),V.value=I.concatItemsBadge(u.value,J.recordStateTypeBadgeOptions)}),b.value=!1}),le(async()=>{await j()});async function M(m){o.sortBy=m,await j()}async function N(m){o.pageNumber=m,await j()}async function j(){b.value=!0;let m=await pe.search(o);I.validateResponse(m,null,()=>{f.value=m.data,F.value=m.data.items}),b.value=!1}async function R(){Object.assign(o,B()),await j()}async function Q(){await j()}async function W(m){const w=await pe.getById(m.pointOfCareId,m.pointOfCareVersion);I.validateResponse(w,null,()=>{Object.assign(L,w.data),c.value=!0,O.value=m.code}),S.value++}function P(){}async function D(){r.tableSelectedState.some===U.value?f.value.items.filter(w=>T.value.includes(w.code)).forEach(async w=>{await k(w.pointOfCareId,w.pointOfCareVersion)}):r.tableSelectedState.all===U.value&&f.value.items.forEach(async m=>{await k(m.pointOfCareId,m.pointOfCareVersion)}),setTimeout(()=>{s("apply"),I.closeModalById(v)},200)}async function k(m,w){b.value=!0;const H=await oe.associationCreate(n.serviceId,n.serviceVersion,m,w);I.validateResponse(H,g.backoffice.pointOfCare.serviceAdded,()=>{}),b.value=!1}return(m,w)=>{const H=i("form-field"),K=i("row"),se=i("cfilter"),Y=i("ccolumn"),de=i("table-action-detail"),re=i("ctable"),ue=i("container-wrapper"),ce=i("cbutton"),ke=i("modal");return E(),q(ke,{id:v,title:m._lang.backoffice.pointOfCare.searchTitle,size:e(r).modalSize.extraLarge,"remove-padding":!0},{body:_(()=>[l(se,{title:m._lang.common.filter,disabled:e(b),"clear-click":R,"apply-click":Q,loading:e(b),collapsed:!0},{default:_(()=>[l(K,null,{default:_(()=>[l(H,{id:"code",modelValue:e(o).code,"onUpdate:modelValue":w[0]||(w[0]=h=>e(o).code=h),class:"mb-3 col-12 col-md-6 col-lg-4",label:m._lang.label.code,type:e(r).inputs.text,maxlength:45,disabled:e(b)},null,8,["modelValue","label","type","disabled"]),l(H,{id:"channelTypeIds",class:"mb-3 col-12 col-md-6 col-lg-4",modelValue:e(o).channelTypeIds,"onUpdate:modelValue":w[1]||(w[1]=h=>e(o).channelTypeIds=h),label:m._lang.label.channelTypeId,type:e(r).inputs.multiselect,options:e(t).channelTypeList,disabled:e(b),mode:e(r).multiselectMode.tags},null,8,["modelValue","label","type","options","disabled","mode"]),l(H,{id:"abreviation",class:"mb-3 col-12 col-lg-4",modelValue:e(o).abreviation,"onUpdate:modelValue":w[2]||(w[2]=h=>e(o).abreviation=h),label:m._lang.label.abreviation,type:e(r).inputs.text,maxlength:16,disabled:e(b)},null,8,["modelValue","label","type","disabled"]),l(H,{id:"name",class:"mb-3 col-12",modelValue:e(o).name,"onUpdate:modelValue":w[3]||(w[3]=h=>e(o).name=h),label:m._lang.label.name,type:e(r).inputs.text,maxlength:45,disabled:e(b)},null,8,["modelValue","label","type","disabled"]),l(H,{id:"organization",class:"mb-3 col-12 col-md-6",modelValue:e(o).organization,"onUpdate:modelValue":w[4]||(w[4]=h=>e(o).organization=h),label:m._lang.label.organizationHost,type:e(r).inputs.multiselect,options:e(t).organizationList,disabled:e(b),valueProp:e(r).multiselectValueProp.value3},null,8,["modelValue","label","type","options","disabled","valueProp"])]),_:1})]),_:1},8,["title","disabled","loading"]),l(ue,null,{default:_(()=>[l(re,{onSort:M,onChangePage:N,data:e(f),loading:e(b),selectedRow:e(O),defaultSort:"code",selectedRowField:"code",checkboxField:"code",checkbox:!0,selectedItems:e(T),"onUpdate:selectedItems":w[5]||(w[5]=h=>A(T)?T.value=h:T=h),unselectedItems:e(F),"onUpdate:unselectedItems":w[6]||(w[6]=h=>A(F)?F.value=h:F=h),selectedState:e(U),"onUpdate:selectedState":w[7]||(w[7]=h=>A(U)?U.value=h:U=h)},{columns:_(()=>[l(Y,{name:m._lang.label.code,field:"code",sortable:!0},null,8,["name"]),l(Y,{name:m._lang.label.channelTypeId,field:"channelType",sortField:"channelTypeId",sortable:!0},null,8,["name"]),l(Y,{name:m._lang.label.abreviation,field:"abreviation",sortable:!0},null,8,["name"]),l(Y,{name:m._lang.label.name,field:"name",sortable:!0},null,8,["name"]),l(Y,{name:m._lang.label.organizationHost,field:"organization",sortField:"organizationId",sortable:!0},null,8,["name"])]),actions:_(h=>[l(de,{onClick:el=>W(h.item)},null,8,["onClick"])]),_:1},8,["data","loading","selectedRow","selectedItems","unselectedItems","selectedState"])]),_:1}),(E(),q(e(Ue),{collapsed:e(c),class:"mt-5",key:e(S),modelValue:e(L),"onUpdate:modelValue":w[8]||(w[8]=h=>A(L)?L.value=h:L=h),disabled:!0,loading:e(b),selectedLang:e(p),validateForm:!1},null,8,["collapsed","modelValue","loading","selectedLang"]))]),footer:_(()=>[l(ce,{type:"primary",size:"large",title:m._lang.common.apply,onClick:D,disabled:e(U)===e(r).tableSelectedState.none},null,8,["title","disabled"]),l(ce,{type:"secondary",size:"large",title:m._lang.common.cancel,"data-bs-dismiss":"modal",onClick:P},null,8,["title"])]),_:1},8,["title","size"])}}},Xe=["id"],Ze={__name:"service-points",props:{formModel:{Object,required:!0}},setup(C){var P,D;const s=C,n=y(te.havePermission(r.permissions.service.createEdit)&&(((P=s.formModel)==null?void 0:P.recordStateTypeId)==r.recordStateType.draft||((D=s.formModel)==null?void 0:D.recordStateTypeId)==r.recordStateType.published)),t=y(te.havePermission(r.permissions.service.approve)),v=$(()=>{let k=be.getUser();return!k||!k.name?!1:k.name.toLowerCase()==="guest"});le(()=>{}),ne(async()=>{S.value=I.decodeId(u.params.serviceId),p.value=I.decodeId(u.params.serviceVersion),F.value=I.convertEnumToArray(V.enums.recordStateType),!S.value||!p.value?f.push({name:Le.router.BACKOFFICE_SERVICE_PAGE.name}):(L.serviceId=S.value,L.serviceVersion=p.value,await R(),F.value=I.convertEnumToArray(V.enums.recordStateType),U.value=I.concatItemsBadge(F.value,J.recordStateTypeBadgeOptions))});const g="search-pointOfCare-modal",a="delete-pointOfCare",o=I.uuid(),u=Oe(),V=ee(),f=Te();let b=y(!0),c=y(0),S=y(0),p=y(0),O=y(I.createEmptyDataSource()),L=x(B()),T=y(null),F=y([]),U=y([]),d=y(!1);function B(){let k=null;return v.value&&(k=[r.recordStateType.published]),{pageNumber:1,sortBy:"pointOfCareCode",active:!0,serviceId:null,serviceVersion:null,recordStateTypeIds:k}}function M(){c.value++,d.value=!0,window.setTimeout(function(){I.showModalById(g)},5)}async function N(k){L.sortBy=k,await R()}async function j(k){L.pageNumber=k,await R()}async function R(){b.value=!0;let k=await oe.associationSearch(L);I.validateResponse(k,null,()=>{O.value=k.data,O.value.items.forEach(m=>{m.recordStateTypeId=r.recordStateType.submitted,m.pointOfCareRecordStateTypeId===r.recordStateType.published&&m.serviceRecordStateTypeId===r.recordStateType.published?m.recordStateTypeId=r.recordStateType.published:(m.pointOfCareRecordStateTypeId===r.recordStateType.returned||m.serviceRecordStateTypeId===r.recordStateType.returned)&&(m.recordStateTypeId=r.recordStateType.returned)})}),b.value=!1}async function Q(k){T.value=k}async function W(){if(T.value){b.value=!0;const k=await oe.associationRemove(S.value,p.value,T.value.pointOfCareId,T.value.pointOfCareVersion);I.validateResponse(k,V.backoffice.service.pointOfCareRemoved,async()=>{await R()}),b.value=!1}}return(k,m)=>{const w=i("icon-plus"),H=i("table-actions"),K=i("ccolumn"),se=i("table-action-delete"),Y=i("ctable"),de=i("container-wrapper"),re=i("confirm-delete-modal");return E(),Z(ie,null,[l(de,null,{default:_(()=>[l(H,{title:k._lang.common.tableActionTitle},{default:_(()=>[n.value?(E(),Z("button",{key:0,class:"btn btn-primary",type:"button",id:e(o),onClick:M},[l(w,{color:"#FFF"}),Fe(" "+Se(k._lang.common.addServicePoint),1)],8,Xe)):z("",!0)]),_:1},8,["title"]),l(Y,{onSort:N,onChangePage:j,data:e(O),checkbox:!1,loading:e(b),defaultSort:"pointOfCareCode",checkboxField:"code"},{columns:_(()=>[l(K,{name:k._lang.label.code,field:"pointOfCareCode",sortable:!0},null,8,["name"]),l(K,{name:k._lang.label.channelTypeId,field:"pointOfCareChannelType",sortField:"pointOfCareChannelTypeId",sortable:!0},null,8,["name"]),l(K,{name:k._lang.label.abreviation,field:"pointOfCareAbreviation",sortField:"pointOfCareAbreviation",sortable:!0},null,8,["name"]),l(K,{name:k._lang.label.name,field:"pointOfCareName",sortable:!0},null,8,["name"]),l(K,{name:k._lang.label.organizationHost,field:"pointOfCareOrganization",sortField:"pointOfCareOrganizationId",sortable:!0},null,8,["name"]),l(K,{name:k._lang.label.state,field:"recordStateTypeId",sortField:"pointOfCareRecordStateTypeId",align:e(r).columnAlign.center,custom:Ee,options:e(U),sortable:!0},null,8,["name","align","options"])]),actions:_(ue=>[t.value?(E(),q(se,{key:0,id:a,onClick:ce=>Q(ue.item)},null,8,["onClick"])):z("",!0)]),_:1},8,["data","loading"])]),_:1}),!e(b)&&e(d)?(E(),q(Je,{key:e(c),serviceId:e(S),serviceVersion:e(p),onApply:R},null,8,["serviceId","serviceVersion"])):z("",!0),l(re,{id:a,title:k._lang.backoffice.service.pointOfCareDeleteTitle,message:k._lang.backoffice.service.pointOfCareDeleteQuestion,action:W},null,8,["title","message"])],64)}}},_l={__name:"form",props:{formModel:{Object,required:!0},loading:{type:Boolean,required:!0},validateForm:{type:Boolean,required:!0},disabled:{type:Boolean,required:!0},isExternalEdit:{type:Boolean,required:!0},selectedLang:{type:[Number,String],required:!0},rules:{type:Object,required:!0},vuelidate:{Object,default:null},progressValue:{type:Number,default:0},showProgress:{type:Boolean,default:!0}},emits:["update:formModel"],setup(C,{emit:s}){const n=C,t=$({get(){return n.formModel},set(v){s("update:formModel",v)}});return(v,g)=>{const a=i("tab-content"),o=i("tabs");return E(),q(o,null,{default:_(()=>[l(a,{id:"general",title:v._lang.common.general,active:!0,"always-refresh":!0},{default:_(()=>[l(Ye,{modelValue:e(t),"onUpdate:modelValue":g[0]||(g[0]=u=>A(t)?t.value=u:null),disabled:n.disabled,validateForm:n.validateForm,loading:n.loading,selectedLang:n.selectedLang,rules:n.rules,progressValue:n.progressValue,showProgress:n.showProgress,vuelidate:n.vuelidate},null,8,["modelValue","disabled","validateForm","loading","selectedLang","rules","progressValue","showProgress","vuelidate"])]),_:1},8,["title"]),l(a,{id:"service-points",title:v._lang.backoffice.menu.servicePoints,active:!1,disabled:!1,"always-refresh":!0},{default:_(()=>[l(Ze,{formModel:e(t)},null,8,["formModel"])]),_:1},8,["title"])]),_:1})}}};export{_l as _};
