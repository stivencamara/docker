import{_ as H}from"./form-f58f35db.js";import{g as j,f as U,i as D,r as o,E as B,s as Y,j as R,N as V,K as q,u as n,z as c,k as _,c as O,l as x,w as v,n as i,p as e,e as z,F as y,H as E}from"./index-f9e60098.js";import{p as F}from"./point-of-care-71dd5696.js";import{p as k}from"./helpers-4005990d.js";import{u as J}from"./point-of-care-07bdb05e.js";import{u as Q}from"./index.esm-cf21939f.js";import{b as W}from"./helpers-c3825dec.js";import{e as X}from"./edit-actions-4d12a9ca.js";import"./contacts-b46689c8.js";import"./location-a89f8fd9.js";import"./address-bf8dfb97.js";import"./organization-c676f695.js";import"./address.vue_vue_type_style_index_0_scoped_2266ba05_lang-a12e0ec9.js";import"./service-20d09ff7.js";import"./refusal-59842998.js";import"./index.esm-7b4c8e23.js";import"./generic-3abf2d5e.js";import"./service-83e15c92.js";import"./helpers-b2b11f1a.js";import"./helpers-4fff0916.js";import"./cancel-confirm-1eaa0e1f.js";import"./settings-d00b4206.js";/* empty css                                                                     */const Ee={__name:"edit",setup(Z){const L=j(),u=U(),w=D(),f=J();let r=o(!0),a=B(k.newForm()),l=o(Y.language.pt);o([]);let P=B(k.formRules()),g=o(0),b=o(0),p=o(0),M=o(0),C=o(0),I=o([]);const T=Q(P,a),N=R(()=>C.value===100&&!r.value);async function S(){r.value=!0;const t=await F.getById(g.value,b.value);n.validateResponse(t,null,()=>{Object.assign(a,t.data),f.setFormToCompare(n.cloneObject(t.data))}),r.value=!1}async function h(){r.value=!0;const t=await F.getLists(l.value);n.validateResponse(t,null,()=>{f.setLists(t.data)}),r.value=!1}V(()=>l.value,()=>{h()}),q(async()=>{g.value=n.decodeId(u.params.pointOfCareId),b.value=n.decodeId(u.params.pointOfCareVersion),p.value=n.decodeId(u.params.organizationId),M.value=n.decodeId(u.params.organizationVersion),!g.value||!b.value?L.push({name:c.router.BACKOFFICE_POINT_OF_CARE_PAGE.name}):(await h(),await S())}),V(()=>[a.texts[0].name,a.organization,a.organizationHost,a.startDate,a.channel.channelTypeId,a.address.zipCode,a.address.islandId,a.address.countyId,a.address.parishId,a.address.locality,a.address.address],()=>{I.value=k.progressFields(),W.calculatePercentage(a,I.value,t=>{f.setProgress(t),C.value=t})});const A=R(()=>p.value>0?`${c.router.BACKOFFICE_EDIT_ENTITY_PAGE.path.replace(":organizationId",u.params.organizationId).replace(":organizationVersion",u.params.organizationVersion)}#pontosatendimento`:c.router.BACKOFFICE_POINT_OF_CARE_PAGE.name);return(t,d)=>{const m=_("breadcrumb-item"),K=_("breadcrumb"),G=_("page");return O(),x(G,{title:t._lang.backoffice.pointOfCare.editPageTitle},{breadcrumb:v(()=>[i(K,{"has-home":!0},{default:v(()=>[e(p)>0?(O(),z(y,{key:0},[i(m,{label:t._lang.backoffice.entities.breadcrumbTitle,"router-path":e(c).router.BACKOFFICE_ENTITIES_PAGE.path},null,8,["label","router-path"]),i(m,{label:e(w).common.entity,"router-path":e(A)},null,8,["label","router-path"]),i(m,{label:t._lang.backoffice.pointOfCare.editPageTitle},null,8,["label"])],64)):(O(),z(y,{key:1},[i(m,{label:t._lang.backoffice.pointOfCare.breadcrumbTitle,"router-path":e(c).router.BACKOFFICE_POINT_OF_CARE_PAGE.path},null,8,["label","router-path"]),i(m,{label:t._lang.backoffice.pointOfCare.editPageTitle},null,8,["label"])],64))]),_:1})]),actions:v(()=>[i(X,{loading:e(r),"onUpdate:loading":d[0]||(d[0]=s=>E(r)?r.value=s:r=s),canSubmit:e(N),selectedLang:e(l),"onUpdate:selectedLang":d[1]||(d[1]=s=>E(l)?l.value=s:l=s),backRoute:e(A),directBackRoute:e(p)>0,service:e(F),itemId:e(g),itemVersion:e(b),formModel:e(a),vuelidate:e(T),store:e(f),resource:t._lang.backoffice.pointOfCare,itemIdField:"pointOfCareId",progressFields:e(I)},null,8,["loading","canSubmit","selectedLang","backRoute","directBackRoute","service","itemId","itemVersion","formModel","vuelidate","store","resource","progressFields"])]),default:v(()=>[i(H,{formModel:e(a),"onUpdate:formModel":d[2]||(d[2]=s=>E(a)?a.value=s:a=s),disabled:!1,validateForm:!0,loading:e(r),selectedLang:e(l),rules:e(P),isExternalEdit:e(p)>0,vuelidate:e(T),progressValue:e(C),"show-progress":!0},null,8,["formModel","loading","selectedLang","rules","isExternalEdit","vuelidate","progressValue"])]),_:1},8,["title"])}}};export{Ee as default};
