import{i as k,r as E,j as T,o as O,k as v,c as q,l as C,w as m,n as o,p as e,I as F,s as V,g as P,f as R,G as h,K as U,u as B,z as S}from"./index-a14ad215.js";import{b as _}from"./helpers-71142cd6.js";import{u as N,p as I}from"./params-fbc51dd7.js";import{_ as x}from"./edit-actions-88cd0d6d.js";import{u as G}from"./index.esm-97dcd533.js";import"./index.esm-88a1129f.js";import"./cancel-confirm-ab082f5c.js";import"./settings-739a4c13.js";const j={__name:"form",props:{modelValue:{type:Object,required:!0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},validateForm:{type:Boolean,default:!1},rules:{type:Object,default:{}},selectedLang:{type:[String,Number],required:!0},vuelidate:{type:Object,required:!0}},emits:["update:modelValue"],setup(c,{emit:A}){const a=c,w=N();k();let u=E([]);const t=T({get(){return a.modelValue},set(l){A("update:modelValue",l)}}),i=T({get(){return _.getFieldByLangAndName(a.modelValue,a.selectedLang,"name")},set(l){_.setFieldByLangAndName(a.modelValue,a.selectedLang,"name",l)}}),p=T({get(){return _.getFieldByLangAndName(a.modelValue,a.selectedLang,"description")},set(l){_.setFieldByLangAndName(a.modelValue,a.selectedLang,"description",l)}});return O(()=>{u.value=w.parameterTypeList}),(l,n)=>{const b=v("form-field"),s=v("row"),g=v("container-wrapper");return q(),C(g,null,{default:m(()=>[o(s,null,{default:m(()=>{var d,f,y,L;return[o(b,{id:"name",modelValue:e(i),"onUpdate:modelValue":n[0]||(n[0]=r=>F(i)?i.value=r:null),class:"mb-3 col-12 col-md-8",label:l._lang.label.name,type:e(V).inputs.text,maxlength:45,disabled:!0,required:!0,showError:l._showErrorFieldWhenTexts((d=a.vuelidate)==null?void 0:d.texts,"name"),"error-message":l._errorMessageFieldWhenTexts((f=a.vuelidate)==null?void 0:f.texts,"name"),language:c.selectedLang},null,8,["modelValue","label","type","showError","error-message","language"]),o(b,{id:"unity",modelValue:e(t).unity,"onUpdate:modelValue":n[1]||(n[1]=r=>e(t).unity=r),class:"mb-3 col-12 col-md-4",label:l._lang.label.unity,type:e(V).inputs.multiselect,disabled:c.loading,required:a.validateForm,showError:a.validateForm&&((y=a.vuelidate)==null?void 0:y.unity.$error),"error-message":l._errorMessageField((L=a.vuelidate)==null?void 0:L.unity),options:e(u)},null,8,["modelValue","label","type","disabled","required","showError","error-message","options"]),o(b,{id:"value",modelValue:e(t).value,"onUpdate:modelValue":n[2]||(n[2]=r=>e(t).value=r),class:"mb-3 col-12",label:l._lang.label.value,type:e(V).inputs.textarea,disabled:c.loading},null,8,["modelValue","label","type","disabled"])]}),_:1}),o(s,null,{default:m(()=>{var d,f;return[o(b,{id:"description",modelValue:e(p),"onUpdate:modelValue":n[3]||(n[3]=y=>F(p)?p.value=y:null),class:"mb-3 col-12",label:l._lang.label.description,type:e(V).inputs.textarea,rows:3,maxlength:2048,disabled:c.loading,required:!0,showError:l._showErrorFieldWhenTexts((d=a.vuelidate)==null?void 0:d.texts,"description"),"error-message":l._errorMessageFieldWhenTexts((f=a.vuelidate)==null?void 0:f.texts,"description"),language:a.selectedLang},null,8,["modelValue","label","type","disabled","showError","error-message","language"])]}),_:1}),o(s,null,{default:m(()=>[o(b,{id:"notes",modelValue:e(t).notes,"onUpdate:modelValue":n[4]||(n[4]=d=>e(t).notes=d),class:"mb-3 col-12",label:l._lang.label.notes,type:e(V).inputs.textarea,maxlength:512,disabled:c.loading},null,8,["modelValue","label","type","disabled"])]),_:1})]),_:1})}}},M={newForm(){return{validateForm:!1,value:null,group:null,notes:null,unity:null,field:null,texts:[{language:"pt",name:null,description:null},{language:"en",name:null,description:null}]}},formRules(){return{unity:{required:_.requiredMessage()},texts:{$each:_.forEachField(["name","description"])}}}},X={__name:"edit",setup(c){const A=P(),a=R();k();const w=N();let u=E(!0),t=h(M.newForm()),i=E(V.language.pt),p=E(0),l=h(M.formRules());const n=G(l,t);async function b(){u.value=!0;const s=await I.getById(p.value);B.validateResponse(s,null,()=>{Object.assign(t,s.data),w.setFormToCompare(B.cloneObject(s.data))}),u.value=!1}return U(async()=>{p.value=B.decodeId(a.params.parameterId),p.value?await b():A.push({name:S.router.BACKOFFICE_SETTINGS_PARAMS_PAGE.name})}),(s,g)=>{const d=v("breadcrumb-item"),f=v("breadcrumb"),y=v("card"),L=v("page");return q(),C(L,{title:s._lang.backoffice.settings.params.editPageTitle},{breadcrumb:m(()=>[o(f,{"has-home":!0},{default:m(()=>[o(d,{label:s._lang.backoffice.settings.params.breadcrumbTitle,"router-path":e(S).router.BACKOFFICE_SETTINGS_PARAMS_PAGE.path},null,8,["label","router-path"]),o(d,{label:s._lang.backoffice.settings.params.editPageTitle},null,8,["label"])]),_:1})]),actions:m(()=>[o(x,{loading:e(u),"onUpdate:loading":g[0]||(g[0]=r=>F(u)?u.value=r:u=r),selectedLang:e(i),"onUpdate:selectedLang":g[1]||(g[1]=r=>F(i)?i.value=r:i=r),service:e(I),itemId:e(p),formModel:e(t),vuelidate:e(n),store:e(w),resource:s._lang.backoffice.settings.params,"back-route":e(S).router.BACKOFFICE_SETTINGS_PARAMS_PAGE.name,"show-lang-selector":!0,"can-delete":!1,"can-edit":!0},null,8,["loading","selectedLang","service","itemId","formModel","vuelidate","store","resource","back-route"])]),default:m(()=>[o(y,{shadow:!0},{body:m(()=>[o(j,{modelValue:e(t),"onUpdate:modelValue":g[2]||(g[2]=r=>F(t)?t.value=r:t=r),selectedLang:e(i),loading:e(u),disabled:e(u),vuelidate:e(n),"validate-form":!0,rules:e(l)},null,8,["modelValue","selectedLang","loading","disabled","vuelidate","rules"])]),_:1})]),_:1},8,["title"])}}};export{X as default};
