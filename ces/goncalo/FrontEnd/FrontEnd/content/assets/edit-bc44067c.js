import{g as A,f as G,i as U,E as g,r as i,M as v,s as E,K as M,u as m,z as d,k as c,c as O,l as P,w as l,n as o,p as e,H as S}from"./index-255cb3f5.js";import{u as I}from"./users-626c46cb.js";import{h as V,_ as y}from"./form-3cc48a74.js";import{u as K}from"./index.esm-a0301e1b.js";import"./helpers-3a01797c.js";import{u as N}from"./users-386063ec.js";import{_ as D}from"./edit-actions-33925003.js";import"./index.esm-d39b5f1a.js";import"./cancel-confirm-7ef04aba.js";import"./settings-5eb417a0.js";const Z={__name:"edit",setup(j){const h=A(),T=G();U();const k=g(V.formRules()),p=N(),f=i(v.havePermission(E.permissions.users.createEdit)),C=i(v.havePermission(E.permissions.users.delete));let t=i(!1),u=i(0),s=g({name:null,email:null,profiles:[],active:!0});const _=K(k,s);M(async()=>{u.value=m.decodeId(T.params.userId),u.value?await R():h.push({name:d.router.BACKOFFICE_SETTINGS_USERS_PAGE.name})});async function R(){t.value=!0;const a=await I.getById(u.value);m.validateResponse(a,null,()=>{Object.assign(s,a.data),p.setFormToCompare(m.cloneObject(a.data))}),t.value=!1}return(a,n)=>{const b=c("breadcrumb-item"),B=c("breadcrumb"),F=c("card"),w=c("page");return O(),P(w,{title:a._lang.backoffice.settings.users.update.pageTitle},{breadcrumb:l(()=>[o(B,{"has-home":!0},{default:l(()=>[o(b,{label:a._lang.backoffice.settings.users.pageTitle,"router-path":e(d).router.BACKOFFICE_SETTINGS_USERS_PAGE.path},null,8,["label","router-path"]),o(b,{label:a._lang.backoffice.settings.users.update.pageTitle},null,8,["label"])]),_:1})]),actions:l(()=>[o(D,{loading:e(t),"onUpdate:loading":n[0]||(n[0]=r=>S(t)?t.value=r:t=r),service:e(I),itemId:e(u),formModel:e(s),vuelidate:e(_),store:e(p),resource:a._lang.backoffice.settings.users,"back-route":e(d).router.BACKOFFICE_SETTINGS_USERS_PAGE.name,showLangSelector:!1,canEdit:f.value,canDelete:C.value},null,8,["loading","service","itemId","formModel","vuelidate","store","resource","back-route","canEdit","canDelete"])]),default:l(()=>[o(F,{shadow:!0},{body:l(()=>[o(y,{modelValue:e(s),"onUpdate:modelValue":n[1]||(n[1]=r=>S(s)?s.value=r:s=r),required:!0,vuelidator:e(_),disabled:!f.value},null,8,["modelValue","vuelidator","disabled"])]),_:1})]),_:1},8,["title"])}}};export{Z as default};
