import{_ as j}from"./delete-confirm-e6e6978f.js";import{g as $,i as q,r,s as f,G as k,u as _,o as x,k as n,c as H,l as J,w as s,n as l,p as t,U as Q,W as X,I as b,z as S}from"./index-c417b10a.js";import{r as E}from"./refusal-types-7b901b38.js";const le={__name:"index",setup(Z){const y=$();q();let i=r(!1),d=r([]),m=r([]),p=r(f.tableSelectedState.none),o=k(I()),g=r(_.createEmptyDataSource());k({});let T=r(0);function I(){return{pageNumber:1,sortBy:"refusalTypeId",refusalTypeId:null,refusalTypeIds:[],caeDesignation:null}}x(async()=>{await u()});function v(e){y.push({name:S.router.BACKOFFICE_SETTINGS_EDIT_REFUSAL_TYPES_PAGE.name,params:{refusalTypeId:_.encodeId(e.refusalTypeId)}})}async function w(){Object.assign(o,I()),await C()}async function C(){o.pageNumber=1,await u()}function A(){y.push({name:S.router.BACKOFFICE_SETTINGS_CREATE_REFUSAL_TYPES_PAGE.name})}async function B(e){o.sortBy=e,await u()}async function F(e){o.pageNumber=e,await u()}async function u(){i.value=!0,o.refusalTypeId?o.refusalTypeIds=[o.refusalTypeId]:o.refusalTypeIds=[];let e=await E.search(o);_.validateResponse(e,null,()=>{g.value=e.data}),i.value=!1}async function N(e){T.value=e.refusalTypeId}async function U(){_.closeModalById("confirm-delete"),await u()}return(e,c)=>{const P=n("breadcrumb-item"),R=n("breadcrumb"),h=n("cbutton"),G=n("form-field"),z=n("row"),D=n("cfilter"),M=n("ccolumn"),V=n("table-action-edit"),L=n("table-action-delete"),O=n("ctable"),K=n("card"),W=n("page");return H(),J(W,{title:e._lang.backoffice.settings.refusalType.pageTitle},{breadcrumb:s(()=>[l(R,{"has-home":!0},{default:s(()=>[l(P,{label:e._lang.backoffice.settings.refusalType.breadcrumbTitle},null,8,["label"])]),_:1})]),actions:s(()=>[l(h,{class:"col-12 col-sm-auto",type:t(f).buttonType.secondary,size:t(f).buttonSize.medium,title:e._lang.common.toAdd,icon:Q,onClick:A},null,8,["type","size","title"])]),default:s(()=>[l(K,{shadow:!0},{body:s(()=>[l(D,{title:e._lang.common.filter,disabled:t(i),"clear-click":w,"apply-click":C,loading:t(i),collapsed:!0},{default:s(()=>[l(z,null,{default:s(()=>[l(G,{id:"refusalTypeName",modelValue:t(o).name,"onUpdate:modelValue":c[0]||(c[0]=a=>t(o).name=a),class:"mb-3 col-12",label:e._lang.label.name,type:t(f).inputs.text,maxlength:45,disabled:t(i)},null,8,["modelValue","label","type","disabled"])]),_:1})]),_:1},8,["title","disabled","loading"]),l(X,null,{default:s(()=>[l(O,{onSort:B,onChangePage:F,selectedItems:t(d),"onUpdate:selectedItems":c[1]||(c[1]=a=>b(d)?d.value=a:d=a),unselectedItems:t(m),"onUpdate:unselectedItems":c[2]||(c[2]=a=>b(m)?m.value=a:m=a),selectedState:t(p),"onUpdate:selectedState":c[3]||(c[3]=a=>b(p)?p.value=a:p=a),data:t(g),checkbox:!1,loading:t(i),defaultSort:"refusalTypeId"},{columns:s(()=>[l(M,{name:e._lang.label.name,field:"name",sortable:!0},null,8,["name"])]),actions:s(a=>[l(V,{onClick:Y=>v(a.item)},null,8,["onClick"]),l(L,{onClick:Y=>N(a.item)},null,8,["onClick"])]),_:1},8,["selectedItems","unselectedItems","selectedState","data","loading"])]),_:1})]),_:1}),l(j,{"item-id":t(T),resource:e._lang.backoffice.settings.refusalType,action:U,service:t(E)},null,8,["item-id","resource","service"])]),_:1},8,["title"])}}};export{le as default};
