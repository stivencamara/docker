import{_ as j}from"./form-189793ad.js";import{g as H,f as U,i as D,r as o,G as B,s as Y,j as R,N as V,K as q,u as n,z as c,k as _,c as O,l as x,w as v,n as i,p as e,e as z,F as y,I as F}from"./index-e6787e94.js";import{p as E}from"./point-of-care-415bd492.js";import{p as k}from"./helpers-3e986238.js";import{u as J}from"./point-of-care-f0ec7d3c.js";import{u as Q}from"./index.esm-cb55abbd.js";import{b as W}from"./helpers-1692af0f.js";import{e as X}from"./edit-actions-8ddefaf6.js";import"./contacts-6d99aa4e.js";import"./location-2fc2c3e7.js";import"./address-eabe1c2c.js";import"./organization-58b01a26.js";import"./address.vue_vue_type_style_index_0_scoped_2266ba05_lang-005192f9.js";import"./service-33a39334.js";import"./refusal-82cd23d2.js";import"./index.esm-7850210a.js";import"./generic-25679898.js";import"./service-e67c421d.js";import"./helpers-8a70ee11.js";import"./helpers-b39b0e24.js";import"./cancel-confirm-e26bc141.js";import"./settings-8db6c4e1.js";/* empty css                                                                     */const Fe={__name:"edit",setup(Z){const L=H(),u=U(),w=D(),f=J();let r=o(!0),a=B(k.newForm()),l=o(Y.language.pt);o([]);let P=B(k.formRules()),g=o(0),b=o(0),p=o(0),M=o(0),I=o(0),C=o([]);const T=Q(P,a),N=R(()=>I.value===100&&!r.value);async function S(){r.value=!0;const t=await E.getById(g.value,b.value);n.validateResponse(t,null,()=>{Object.assign(a,t.data),f.setFormToCompare(n.cloneObject(t.data))}),r.value=!1}async function h(){r.value=!0;const t=await E.getLists(l.value);n.validateResponse(t,null,()=>{f.setLists(t.data)}),r.value=!1}V(()=>l.value,()=>{h()}),q(async()=>{g.value=n.decodeId(u.params.pointOfCareId),b.value=n.decodeId(u.params.pointOfCareVersion),p.value=n.decodeId(u.params.organizationId),M.value=n.decodeId(u.params.organizationVersion),!g.value||!b.value?L.push({name:c.router.BACKOFFICE_POINT_OF_CARE_PAGE.name}):(await h(),await S())}),V(()=>[a.texts[0].name,a.organization,a.organizationHost,a.startDate,a.channel.channelTypeId,a.address.zipCode,a.address.islandId,a.address.countyId,a.address.parishId,a.address.locality,a.address.address],()=>{C.value=k.progressFields(),W.calculatePercentage(a,C.value,t=>{f.setProgress(t),I.value=t})});const A=R(()=>p.value>0?`${c.router.BACKOFFICE_EDIT_ENTITY_PAGE.path.replace(":organizationId",u.params.organizationId).replace(":organizationVersion",u.params.organizationVersion)}#pontosatendimento`:c.router.BACKOFFICE_POINT_OF_CARE_PAGE.name);return(t,d)=>{const m=_("breadcrumb-item"),G=_("breadcrumb"),K=_("page");return O(),x(K,{title:t._lang.backoffice.pointOfCare.editPageTitle},{breadcrumb:v(()=>[i(G,{"has-home":!0},{default:v(()=>[e(p)>0?(O(),z(y,{key:0},[i(m,{label:t._lang.backoffice.entities.breadcrumbTitle,"router-path":e(c).router.BACKOFFICE_ENTITIES_PAGE.path},null,8,["label","router-path"]),i(m,{label:e(w).common.entity,"router-path":e(A)},null,8,["label","router-path"]),i(m,{label:t._lang.backoffice.pointOfCare.editPageTitle},null,8,["label"])],64)):(O(),z(y,{key:1},[i(m,{label:t._lang.backoffice.pointOfCare.breadcrumbTitle,"router-path":e(c).router.BACKOFFICE_POINT_OF_CARE_PAGE.path},null,8,["label","router-path"]),i(m,{label:t._lang.backoffice.pointOfCare.editPageTitle},null,8,["label"])],64))]),_:1})]),actions:v(()=>[i(X,{loading:e(r),"onUpdate:loading":d[0]||(d[0]=s=>F(r)?r.value=s:r=s),canSubmit:e(N),selectedLang:e(l),"onUpdate:selectedLang":d[1]||(d[1]=s=>F(l)?l.value=s:l=s),backRoute:e(A),directBackRoute:e(p)>0,service:e(E),itemId:e(g),itemVersion:e(b),formModel:e(a),vuelidate:e(T),store:e(f),resource:t._lang.backoffice.pointOfCare,itemIdField:"pointOfCareId",progressFields:e(C)},null,8,["loading","canSubmit","selectedLang","backRoute","directBackRoute","service","itemId","itemVersion","formModel","vuelidate","store","resource","progressFields"])]),default:v(()=>[i(j,{formModel:e(a),"onUpdate:formModel":d[2]||(d[2]=s=>F(a)?a.value=s:a=s),disabled:!1,validateForm:!0,loading:e(r),selectedLang:e(l),rules:e(P),isExternalEdit:e(p)>0,vuelidate:e(T),progressValue:e(I),"show-progress":!0},null,8,["formModel","loading","selectedLang","rules","isExternalEdit","vuelidate","progressValue"])]),_:1},8,["title"])}}};export{Fe as default};
