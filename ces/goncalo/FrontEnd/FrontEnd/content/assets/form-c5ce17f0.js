import{r as C,K as ee,j as B,s as v,u as w,k as d,c as L,l as q,w as b,n as l,p as e,I as N,y as P,i as J,h as re,G as j,o as X,R as D,V as ye,M as ie,e as G,S as ue,T as ce,U as me,F as le,v as pe,J as _e,z as Ve,f as ke,g as Ce,t as Se}from"./index-a14ad215.js";import{u as Y}from"./service-9ca2bd37.js";import{r as Ie}from"./index.esm-88a1129f.js";import{b as K}from"./helpers-71142cd6.js";import{a as we,_ as Le}from"./address.vue_vue_type_style_index_0_scoped_5480b292_lang-b87b4179.js";import{s as Z}from"./service-a0c37778.js";import{u as ae}from"./index.esm-97dcd533.js";import{_ as ge}from"./form-247c12ee.js";import{s as Oe}from"./settings-739a4c13.js";import{s as Q}from"./helpers-11fd24aa.js";import{l as de}from"./legislation-1bd6be27.js";import{u as Fe}from"./organization-4f7bdfd2.js";import{h as oe}from"./helpers-a264fdb9.js";import{_ as Ee,a as Te}from"./refusal-4e803a93.js";import{_ as Be}from"./generic-90322b29.js";import{p as ne}from"./point-of-care-4055b36e.js";import{u as $e}from"./point-of-care-86564745.js";import{p as Ue}from"./helpers-bdeacb10.js";const qe={__name:"description",props:{modelValue:{type:Object,required:!0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},selectedLang:{type:[String,Number],required:!0},validateForm:{type:Boolean,default:!1},rules:{type:Object,default:{}}},emits:["update:modelValue"],setup(I,{emit:r}){const n=I,t=Y(),f=ae(n.rules,n.modelValue);let m=C(!0),a=C([]);ee(async()=>{await g()});const o=B({get(){return n.modelValue},set(u){r("update:modelValue",u)}}),i=B(()=>n.selectedLang),_=B({get(){return K.getFieldByLangAndName(o.value,i.value,"description")},set(u){K.setFieldByLangAndName(o.value,i.value,"description",u)}});B({get(){return K.getFieldByLangAndName(o.value,i.value,"serviceProcedure")},set(u){K.setFieldByLangAndName(o.value,i.value,"serviceProcedure",u)}});const p=B(()=>i.value===v.language.en);async function g(){m.value=!0;const u=await Z.checklist();w.validateResponse(u,null,()=>{a.value=u.data}),m.value=!1}return(u,k)=>{const c=d("form-field"),S=d("row"),O=d("accordion");return L(),q(O,{id:"description",title:u._lang.common.description,collapsed:!1,class:"mb-4"},{default:b(()=>[l(S,null,{default:b(()=>[l(c,{id:"economicActivityId",class:"mb-3 col-12",modelValue:e(o).economicActivityId,"onUpdate:modelValue":k[0]||(k[0]=T=>e(o).economicActivityId=T),label:u._lang.label.economicActivityId,disabled:n.disabled||e(p),loading:n.loading,type:e(v).inputs.multiselect,required:n.validateForm,placeholder:u._lang.common.selectOption,showError:n.validateForm&&e(f).economicActivityId.$error,"error-message":u._errorMessageField(e(f).economicActivityId),options:e(t).economicActivityList},null,8,["modelValue","label","disabled","loading","type","required","placeholder","showError","error-message","options"])]),_:1}),e(m)?P("",!0):(L(),q(c,{key:0,id:"description",class:"mb-3 col-12",modelValue:e(_),"onUpdate:modelValue":k[1]||(k[1]=T=>N(_)?_.value=T:null),label:u._lang.label.description,disabled:n.disabled,loading:n.loading,type:e(v).inputs.richtext,language:e(i),maxlength:4e3,templates:e(a)},null,8,["modelValue","label","disabled","loading","type","language","templates"]))]),_:1},8,["title"])}}},he={__name:"create",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(I,{emit:r}){const n=I,t=J();re();const f="create-legislation";let m=C([]),a=j(Q.legislationNewForm()),o=C(!1),i=C(v.language.pt);const _=ae(Q.legislationFormRules(),a,{$scope:!1}),p=B({get(){return n.modelValue},set(c){r("update:modelValue",c)}});async function g(){o.value=!0;let c=await Oe.getLanguages();w.validateResponse(c,null,()=>{m.value=c.data}),o.value=!1}function u(){a=Object.assign(a,Q.legislationNewForm()),_.value.$reset()}async function k(){if(o.value=!0,await _.value.$validate(),!_.value.$error){const c={legislationId:a.legislationId,name:a.texts[0].name,code:a.code,document:a.document,texts:a.texts};p.value.find(O=>O.name===c.name&&O.description===c.description)?D.warning(t.backoffice.service.legislationExists):(p.value.push(c),a=Object.assign(a,Q.legislationNewForm()),_.value.$reset(),w.closeModalById(f),D.success(t.backoffice.service.legislationAdded))}o.value=!1}return X(async()=>{await g()}),(c,S)=>{const O=d("lang-selector"),T=d("top-actions"),$=d("cbutton"),h=d("modal");return L(),q(h,{id:f,title:c._lang.backoffice.service.addLegislation,size:e(v).modalSize.extraLarge},{body:b(()=>[l(T,null,{default:b(()=>[l(O,{options:e(m),selectedLang:e(i),"onUpdate:selectedLang":S[0]||(S[0]=s=>N(i)?i.value=s:i=s),disabled:e(o)},null,8,["options","selectedLang","disabled"])]),_:1}),l(ge,{modelValue:e(a),"onUpdate:modelValue":S[1]||(S[1]=s=>N(a)?a.value=s:a=s),selectedLang:e(i),loading:e(o),disabled:e(o),vuelidate:e(_)},null,8,["modelValue","selectedLang","loading","disabled","vuelidate"])]),footer:b(()=>[l($,{title:c._lang.common.cancel,type:e(v).buttonType.secondary,"data-bs-dismiss":"modal","aria-label":"Close",disabled:e(o),onClick:u},null,8,["title","type","disabled"]),l($,{title:c._lang.common.save,onClick:k,disabled:e(o)},null,8,["title","disabled"])]),_:1},8,["title","size"])}}},Ae={__name:"search-legislation",props:{modelValue:{type:Object,required:!0},selectedLang:{type:[String,Number],required:!0},vuelidate:{type:Object,required:!0}},emits:["update:modelValue","apply"],setup(I,{emit:r}){const n=I;Fe();const t="search-legislation";let f=C(!1),m=C(0),a=C(!1),o=j(w.createEmptyDataSource()),i=j(k()),_=j(n.modelValue);ee(async()=>{await O()});const p=B({get(){return n.modelValue},set(s){r("update:modelValue",s)}});async function g(s){i.sortBy=s,await O()}async function u(s){i.pageIndex=s,await O()}function k(){return{pageNumber:1,sortBy:"legislationId",name:null,code:null}}async function c(){Object.assign(i,k()),await h()}async function S(){await O()}async function O(){f.value=!0,i.legislationId?i.legislationIds=[i.legislationId]:i.legislationIds=[];let s=await de.search(i);w.validateResponse(s,null,()=>{o=s.data}),f.value=!1}async function T(s){const F=await de.getById(s.legislationId,s.legislationVersion);w.validateResponse(F,null,()=>{Object.assign(_,F.data),p.value=F.data,a.value=!0}),m.value++}function $(){}function h(){r("apply")}return(s,F)=>{const V=d("form-field"),M=d("row"),H=d("cfilter"),R=d("ccolumn"),y=d("table-action-detail"),E=d("ctable"),U=d("accordion"),x=d("cbutton"),W=d("modal");return L(),q(W,{id:t,title:s._lang.backoffice.settings.legislation.searchTitle,size:e(v).modalSize.extraLarge,"remove-padding":!0},{body:b(()=>[l(H,{title:s._lang.common.filter,"clear-click":c,"apply-click":S,loading:e(f),collapsed:!1},{default:b(()=>[l(M,null,{default:b(()=>[l(V,{id:"code-filter",class:"mb-3 col-12 col-md-6",label:s._lang.label.code,type:e(v).inputs.text,maxlength:45,modelValue:e(i).organizationId,"onUpdate:modelValue":F[0]||(F[0]=A=>e(i).organizationId=A)},null,8,["label","type","modelValue"]),l(V,{id:"name-filter",class:"mb-3 col-12 col-md-6",label:s._lang.label.name,type:e(v).inputs.text,maxlength:45,modelValue:e(i).name,"onUpdate:modelValue":F[1]||(F[1]=A=>e(i).name=A)},null,8,["label","type","modelValue"])]),_:1})]),_:1},8,["title","loading"]),l(ye,null,{default:b(()=>[l(E,{onSort:g,onChangePage:u,data:e(o),loading:e(f),checkbox:!1},{columns:b(()=>[l(R,{name:s._lang.label.code,field:"code",sortable:!0},null,8,["name"]),l(R,{name:s._lang.label.name,field:"name",sortable:!0},null,8,["name"])]),actions:b(A=>[l(y,{onClick:te=>T(A.item)},null,8,["onClick"])]),_:1},8,["data","loading"])]),_:1}),(L(),q(U,{id:"legislation",title:s._lang.backoffice.entities.legislation,collapsed:e(a),class:"mt-4",key:e(m)},{default:b(()=>[l(ge,{modelValue:e(_),"onUpdate:modelValue":F[2]||(F[2]=A=>N(_)?_.value=A:_=A),disabled:!1,validateForm:!1,vuelidate:n.vuelidate,selectedLang:n.selectedLang},null,8,["modelValue","vuelidate","selectedLang"])]),_:1},8,["title","collapsed"]))]),footer:b(()=>[l(x,{type:"primary",size:"large",title:s._lang.common.apply,"data-bs-dismiss":"modal",onClick:h},null,8,["title"]),l(x,{type:"secondary",size:"large",title:s._lang.common.cancel,"data-bs-dismiss":"modal",onClick:$},null,8,["title"])]),_:1},8,["title","size"])}}},Ne={__name:"legislations",props:{modelValue:{type:Array,required:!0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},rules:{type:Object,default:{}},selectedLang:{type:[String,Number],required:!0}},emits:["update:modelValue"],setup(I,{emit:r}){const n=I,t=J();let f=C(!1),m=C(0),a=j(oe.newForm()),o=j(oe.formRules());const i=B(()=>w.createEmptyDataSource(g.value)),_=ae(o,a,{$scope:!1}),p="confirm-delete-legislation",g=B({get(){return n.modelValue},set(s){r("update:modelValue",s)}});let u=C(null);const k=C(ie.havePermission(v.permissions.service.createEdit));function c(s){u.value=s}function S(){u.value&&(w.removeItemOfArray(g.value,u),D.success(t.backoffice.service.legislationRemoved),u.value=null)}function O(s){w.sortArrayOffline(s,i.value.items)}function T(s){s.download&&w.downloadFile(s.download)}async function $(){if(f.value=!0,await _.value.$validate(),!_.value.$error){const s={legislationId:a.legislationId,name:a.texts[0].name,code:a.code,document:a.document,texts:a.texts};g.value.find(V=>V.name===s.name&&V.description===s.description)?D.warning(t.backoffice.service.legislationExists):(g.value.push(s),a=Object.assign(a,Q.legislationNewForm()),_.value.$reset(),D.success(t.backoffice.service.legislationAdded))}f.value=!1}function h(){Object.assign(a,oe.newForm())}return(s,F)=>{const V=d("table-actions"),M=d("ccolumn"),H=d("table-action-download"),R=d("table-action-delete"),y=d("ctable"),E=d("confirm-delete-modal");return L(),G(le,null,[l(me,{id:"legislations",title:s._lang.backoffice.service.legislations,collapsed:!1,class:"mb-4"},{default:b(()=>[k.value?(L(),q(V,{key:0},{default:b(()=>[l(ue,{target:"search-legislation",class:"d-inline",type:e(v).buttonType.secondary,title:s._lang.common.toAdd,disabled:n.disabled,icon:ce,onClick:h},null,8,["type","title","disabled"])]),_:1})):P("",!0),l(y,{data:e(i),loading:e(f),checkbox:!1,showPagination:!1,onSort:O},{columns:b(()=>[l(M,{name:s._lang.label.code,field:"code",sortable:!0},null,8,["name"]),l(M,{name:s._lang.common.name,field:"name",sortable:!0},null,8,["name"])]),actions:b(U=>[U.item.download?(L(),q(H,{key:0,onClick:x=>T(U.item)},null,8,["onClick"])):P("",!0),l(R,{id:p,onClick:x=>c(U.item)},null,8,["onClick"])]),_:1},8,["data","loading"])]),_:1},8,["title"]),l(he,{modelValue:e(g),"onUpdate:modelValue":F[0]||(F[0]=U=>N(g)?g.value=U:null)},null,8,["modelValue"]),l(E,{id:p,title:s._lang.backoffice.service.deleteLegislation,message:s._lang.backoffice.service.deleteLegislationQuestion,action:S},null,8,["title","message"]),(L(),q(Ae,{modelValue:e(a),"onUpdate:modelValue":F[1]||(F[1]=U=>N(a)?a.value=U:a=U),key:e(m),onApply:$,selectedLang:n.selectedLang,vuelidate:e(_)},null,8,["modelValue","selectedLang","vuelidate"]))],64)}}},ze={__name:"create",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(I,{emit:r}){const n=I,t=Y(),f=J();re();const m="create-recipient";let a=j(p()),o=C(!1);const i=ae(Q.recipientFormRules(),a,{$scope:!1}),_=B({get(){return n.modelValue},set(k){r("update:modelValue",k)}});function p(){return{recipientId:null,name:null,description:null,informationLevel:!1,recipientTypeId:null,recipientType:null}}function g(){a=Object.assign(a,p()),i.value.$reset()}async function u(){if(o.value=!0,await i.value.$validate(),!i.value.$error){const k={recipientId:a.recipientId,recipientTypeId:a.recipientTypeId,recipientType:K.getLabel(t.recipientTypeList,a.recipientTypeId),name:a.name,description:a.description,document:a.document};_.value.find(S=>S.name===a.name&&S.description===a.description)?D.warning(f.backoffice.service.recipientExists):(_.value.push(k),a=Object.assign(a,p()),i.value.$reset(),w.closeModalById(m),D.success(f.backoffice.service.recipientAdded))}o.value=!1}return(k,c)=>{const S=d("form-field"),O=d("cbutton"),T=d("modal");return L(),q(T,{id:m,title:k._lang.backoffice.service.addRecipient,size:e(v).modalSize.extraLarge},{body:b(()=>[l(S,{id:"name",class:"mb-3 col-12",modelValue:e(a).name,"onUpdate:modelValue":c[0]||(c[0]=$=>e(a).name=$),label:k._lang.label.name,disabled:n.disabled,loading:n.loading,type:e(v).inputs.text,maxlength:255,required:!0,"show-error":e(i).name.$error,"error-message":k._errorMessageField(e(i).name)},null,8,["modelValue","label","disabled","loading","type","show-error","error-message"]),l(S,{id:"description",class:"mb-3 col-12",modelValue:e(a).description,"onUpdate:modelValue":c[1]||(c[1]=$=>e(a).description=$),label:k._lang.label.description,disabled:n.disabled,loading:n.loading,type:e(v).inputs.text,maxlength:255},null,8,["modelValue","label","disabled","loading","type"]),l(S,{id:"recipientTypeId",class:"mb-3 col-12",modelValue:e(a).recipientTypeId,"onUpdate:modelValue":c[2]||(c[2]=$=>e(a).recipientTypeId=$),label:k._lang.label.recipientTypeId,disabled:n.disabled,loading:n.loading,type:e(v).inputs.multiselect,placeholder:k._lang.common.selectOption,options:e(t).recipientTypeList},null,8,["modelValue","label","disabled","loading","type","placeholder","options"])]),footer:b(()=>[l(O,{title:k._lang.common.cancel,type:e(v).buttonType.secondary,"data-bs-dismiss":"modal","aria-label":"Close",disabled:e(o),onClick:g},null,8,["title","type","disabled"]),l(O,{title:k._lang.common.save,onClick:u,disabled:e(o)},null,8,["title","disabled"])]),_:1},8,["title","size"])}}},je={__name:"recipients",props:{modelValue:{type:Array,required:!0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},rules:{type:Object,default:{}}},emits:["update:modelValue"],setup(I,{emit:r}){const n=I,t=J();let f=C(!1);const m=B(()=>w.createEmptyDataSource(o.value)),a="confirm-delete",o=B({get(){return n.modelValue},set(c){r("update:modelValue",c)}});let i=C(null);const _=C(ie.havePermission(v.permissions.service.createEdit));function p(c){i.value=c}function g(){i.value&&(w.removeItemOfArray(o.value,i),D.success(t.backoffice.service.recipientRemoved),i.value=null)}function u(c){w.sortArrayOffline(c,m.value.items)}function k(c){c.download&&w.downloadFile(c.download)}return(c,S)=>{const O=d("table-actions"),T=d("ccolumn"),$=d("table-action-download"),h=d("table-action-delete"),s=d("ctable"),F=d("confirm-delete-modal");return L(),G(le,null,[l(me,{id:"recipients",title:c._lang.backoffice.service.recipients,collapsed:!1,class:"mb-4"},{default:b(()=>[_.value?(L(),q(O,{key:0},{default:b(()=>[l(ue,{target:"create-recipient",class:"d-inline",type:e(v).buttonType.secondary,title:c._lang.common.toAdd,disabled:n.disabled,icon:ce},null,8,["type","title","disabled"])]),_:1})):P("",!0),l(s,{data:e(m),loading:e(f),checkbox:!1,showPagination:!1,onSort:u},{columns:b(()=>[l(T,{name:c._lang.label.name,field:"name",sortable:!0},null,8,["name"]),l(T,{name:c._lang.label.description,field:"description",sortable:!0},null,8,["name"]),l(T,{name:c._lang.label.recipientTypeId,sortField:"recipientTypeId",field:"recipientType",sortable:!0},null,8,["name"])]),actions:b(V=>[V.item.download?(L(),q($,{key:0,onClick:M=>k(V.item)},null,8,["onClick"])):P("",!0),l(h,{id:a,onClick:M=>p(V.item),disabled:n.disabled},null,8,["onClick","disabled"])]),_:1},8,["data","loading"])]),_:1},8,["title"]),l(ze,{modelValue:e(o),"onUpdate:modelValue":S[0]||(S[0]=V=>N(o)?o.value=V:null)},null,8,["modelValue"]),l(F,{id:a,title:c._lang.backoffice.service.deleteRecipient,message:c._lang.backoffice.service.deleteRecipientQuestion,action:g},null,8,["title","message"])],64)}}},Me={__name:"state-support",props:{vuelidate:{type:Object,required:!0},modelValue:{type:Object,required:!0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},validateForm:{type:Boolean,default:!1},rules:{type:Object,default:{}},selectedLang:{type:[String,Number],required:!0}},emits:["update:modelValue"],setup(I,{emit:r}){const n=I;Y(),C(!1),X(async()=>{});const t=B({get(){return n.modelValue},set(m){r("update:modelValue",m)}}),f=B(()=>n.selectedLang===v.language.en);return(m,a)=>{const o=d("form-field"),i=d("row"),_=d("accordion");return L(),q(_,{id:"stateSupport",title:m._lang.backoffice.service.stateSupport,collapsed:!1,class:"mb-4"},{default:b(()=>[l(i,null,{default:b(()=>{var p,g;return[l(o,{id:"stateSupport",class:"mb-3 col-12 col-md-6 col-lg-3",modelValue:e(t).stateSupport.isStateSupport,"onUpdate:modelValue":a[0]||(a[0]=u=>e(t).stateSupport.isStateSupport=u),label:m._lang.label.stateSupport,disabled:n.disabled||e(f),loading:n.loading,type:e(v).inputs.checkbox},null,8,["modelValue","label","disabled","loading","type"]),l(o,{id:"stateSupportUrl",class:"mb-3 col-12",modelValue:e(t).stateSupport.url,"onUpdate:modelValue":a[1]||(a[1]=u=>e(t).stateSupport.url=u),required:e(t).stateSupport.isStateSupport,label:m._lang.label.serviceUrl,disabled:n.disabled||e(f)||!e(t).stateSupport.isStateSupport,loading:n.loading,type:e(v).inputs.text,showError:n.validateForm&&((p=n.vuelidate)==null?void 0:p.stateSupport.url.$error),"error-message":m._errorMessageField((g=n.vuelidate)==null?void 0:g.stateSupport.url),maxlength:2048},null,8,["modelValue","required","label","disabled","loading","type","showError","error-message"]),l(o,{id:"externalSystemId",class:"mb-3 col-12 col-md-6",modelValue:e(t).stateSupport.externalSystemId,"onUpdate:modelValue":a[2]||(a[2]=u=>e(t).stateSupport.externalSystemId=u),required:!1,label:m._lang.label.externalSystemId,disabled:n.disabled||e(f)||!e(t).stateSupport.isStateSupport,loading:n.loading,type:e(v).inputs.text,maxlength:1024},null,8,["modelValue","label","disabled","loading","type"]),l(o,{id:"processId",class:"mb-3 col-12 col-md-6",modelValue:e(t).stateSupport.processId,"onUpdate:modelValue":a[3]||(a[3]=u=>e(t).stateSupport.processId=u),required:!1,label:m._lang.label.processId,disabled:n.disabled||e(f)||!e(t).stateSupport.isStateSupport,loading:n.loading,type:e(v).inputs.text,maxlength:1024},null,8,["modelValue","label","disabled","loading","type"])]}),_:1})]),_:1},8,["title"])}}},Pe={key:0,class:"mb-3 col-12"},Re={__name:"virtual",props:{vuelidate:{type:Object,required:!0},modelValue:{type:Object,required:!0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},validateForm:{type:Boolean,default:!1},rules:{type:Object,default:{}},selectedLang:{type:[String,Number],required:!0}},emits:["update:modelValue"],setup(I,{emit:r}){const n=I;Y(),X(async()=>{}),C(null),C(null),C(null),C(null);const t=B({get(){return n.modelValue},set(m){r("update:modelValue",m)}}),f=B(()=>n.selectedLang===v.language.en);return(m,a)=>{const o=d("form-field"),i=d("row"),_=d("accordion");return L(),q(_,{id:"virtual",title:m._lang.backoffice.service.virtual,collapsed:!1,class:"mb-4"},{default:b(()=>[l(i,null,{default:b(()=>{var p,g;return[l(o,{id:"virtual",class:"col-12 col-md-6 col-lg-3",modelValue:e(t).virtual.isVirtual,"onUpdate:modelValue":a[0]||(a[0]=u=>e(t).virtual.isVirtual=u),label:m._lang.label.virtual,disabled:n.disabled||e(f),loading:n.loading,type:e(v).inputs.checkbox},null,8,["modelValue","label","disabled","loading","type"]),e(t).virtual.isVirtual?(L(),G("span",Pe,pe(m._lang.backoffice.service.virtualText),1)):P("",!0),l(o,{id:"virtualUrl",class:"mb-3 col-12",modelValue:e(t).virtual.url,"onUpdate:modelValue":a[1]||(a[1]=u=>e(t).virtual.url=u),required:e(t).virtual.isVirtual,label:m._lang.label.serviceUrl,disabled:n.disabled||e(f)||!e(t).virtual.isVirtual,loading:n.loading,type:e(v).inputs.text,showError:n.validateForm&&((p=n.vuelidate)==null?void 0:p.virtual.url.$error),"error-message":m._errorMessageField((g=n.vuelidate)==null?void 0:g.virtual.url),maxlength:2048},null,8,["modelValue","required","label","disabled","loading","type","showError","error-message"]),l(o,{id:"externalSystemId",class:"mb-3 col-12 col-md-6",modelValue:e(t).virtual.externalSystemId,"onUpdate:modelValue":a[2]||(a[2]=u=>e(t).virtual.externalSystemId=u),required:!1,label:m._lang.label.externalSystemId,disabled:n.disabled||e(f)||!e(t).virtual.isVirtual,loading:n.loading,type:e(v).inputs.text,maxlength:1024},null,8,["modelValue","label","disabled","loading","type"]),l(o,{id:"processId",class:"mb-3 col-12 col-md-6",modelValue:e(t).virtual.processId,"onUpdate:modelValue":a[3]||(a[3]=u=>e(t).virtual.processId=u),required:!1,label:m._lang.label.processId,disabled:n.disabled||e(f)||!e(t).virtual.isVirtual,loading:n.loading,type:e(v).inputs.text,maxlength:1024},null,8,["modelValue","label","disabled","loading","type"]),l(o,{id:"canExecutedByThirdParty",class:"mb-3 col-12",modelValue:e(t).virtual.canExecutedByThirdParty,"onUpdate:modelValue":a[4]||(a[4]=u=>e(t).virtual.canExecutedByThirdParty=u),required:!1,label:m._lang.label.canExecutedByThirdParty,disabled:n.disabled||e(f)||!e(t).virtual.isVirtual,loading:n.loading,type:e(v).inputs.checkbox,maxlength:1024},null,8,["modelValue","label","disabled","loading","type"])]}),_:1})]),_:1},8,["title"])}}},xe={__name:"general",props:{modelValue:{type:Object,required:!0},selectedLang:Ie,disabled:{Boolean,default:!0},rules:{Boolean,default:!0},validateForm:{Boolean,default:!1},loading:{Object,default:{}},isExternalEdit:{type:Boolean,default:!1},showProgress:{type:Boolean,default:!0},progressValue:{type:Number,default:0},vuelidate:{type:Object,required:!0}},setup(I){const r=I,n=Y(),t=B({get(){return r.modelValue},set(a){emit("update:modelValue",a)}}),f=B(()=>r.selectedLang),m=B(()=>f.value===v.language.en);return(a,o)=>{const i=d("progress-bar"),_=d("container-wrapper");return L(),G(le,null,[r.showProgress?(L(),q(_,{key:0,"margin-top":!1},{default:b(()=>[l(i,{value:I.progressValue,label:a._lang.common.fill,class:"mb-4 col-12 float-end"},null,8,["value","label"])]),_:1})):P("",!0),l(Ee,{modelValue:e(t),"onUpdate:modelValue":o[0]||(o[0]=p=>N(t)?t.value=p:null),store:e(n)},null,8,["modelValue","store"]),l(e(we),{modelValue:e(t),"onUpdate:modelValue":o[1]||(o[1]=p=>N(t)?t.value=p:null),disabled:r.disabled,loading:I.loading,selectedLang:r.selectedLang,validateForm:r.validateForm,rules:r.rules,isExternalEdit:r.isExternalEdit,vuelidate:r.vuelidate},null,8,["modelValue","disabled","loading","selectedLang","validateForm","rules","isExternalEdit","vuelidate"]),l(e(Me),{modelValue:e(t),"onUpdate:modelValue":o[2]||(o[2]=p=>N(t)?t.value=p:null),disabled:r.disabled,loading:I.loading,selectedLang:r.selectedLang,validateForm:r.validateForm,rules:r.rules,isExternalEdit:r.isExternalEdit,vuelidate:r.vuelidate},null,8,["modelValue","disabled","loading","selectedLang","validateForm","rules","isExternalEdit","vuelidate"]),l(e(Re),{modelValue:e(t),"onUpdate:modelValue":o[3]||(o[3]=p=>N(t)?t.value=p:null),disabled:r.disabled,loading:I.loading,selectedLang:r.selectedLang,validateForm:r.validateForm,rules:r.rules,isExternalEdit:r.isExternalEdit,vuelidate:r.vuelidate},null,8,["modelValue","disabled","loading","selectedLang","validateForm","rules","isExternalEdit","vuelidate"]),l(e(qe),{modelValue:e(t),"onUpdate:modelValue":o[4]||(o[4]=p=>N(t)?t.value=p:null),disabled:r.disabled,loading:I.loading,selectedLang:r.selectedLang,validateForm:r.validateForm,rules:r.rules},null,8,["modelValue","disabled","loading","selectedLang","validateForm","rules"]),l(e(je),{modelValue:e(t).recipients,"onUpdate:modelValue":o[5]||(o[5]=p=>e(t).recipients=p),disabled:r.disabled||e(m),loading:I.loading},null,8,["modelValue","disabled","loading"]),l(e(Ne),{modelValue:e(t).legislations,"onUpdate:modelValue":o[6]||(o[6]=p=>e(t).legislations=p),disabled:r.disabled,loading:I.loading,selectedLang:r.selectedLang},null,8,["modelValue","disabled","loading","selectedLang"]),l(e(Te),{modelValue:e(t),"onUpdate:modelValue":o[7]||(o[7]=p=>N(t)?t.value=p:null),disabled:r.disabled,loading:I.loading,selectedLang:r.selectedLang},null,8,["modelValue","disabled","loading","selectedLang"]),l(Be,{modelValue:e(t),"onUpdate:modelValue":o[8]||(o[8]=p=>N(t)?t.value=p:null),disabled:r.disabled,loading:I.loading,selectedLang:e(f)},null,8,["modelValue","disabled","loading","selectedLang"])],64)}}},De={__name:"search-service-points-modal",props:{serviceId:{Number,required:!0},serviceVersion:{Number,required:!0}},emits:["apply"],setup(I,{emit:r}){const n=I,t=$e(),f="search-pointOfCare-modal",m=J(),a=_e();let o=j(T()),i=C([]),_=C([]),p=C(w.createEmptyDataSource()),g=C(!1),u=C(!1),k=C(0),c=C("pt"),S=j(O());function O(){return Ue.newForm()}function T(){return{pageNumber:1,sortBy:"Code",recordStateIds:[v.recordStateType.published],active:!0}}ee(async()=>{g.value=!0,i.value=w.convertEnumToArray(m.enums.recordStateType);const y=await ne.getLists(a.getLanguage);w.validateResponse(y,null,()=>{t.setLists(y.data),i.value=w.convertEnumToArray(m.enums.recordStateType),_.value=w.concatItemsBadge(i.value,K.recordStateTypeBadgeOptions)}),g.value=!1}),X(async()=>{await s()});async function $(y){o.sortBy=y,await s()}async function h(y){o.pageNumber=y,await s()}async function s(){g.value=!0;let y=await ne.search(o);w.validateResponse(y,null,()=>{p.value=y.data}),g.value=!1}async function F(){Object.assign(o,T()),await s()}async function V(){await s()}async function M(y){const E=await ne.getById(y.pointOfCareId,y.pointOfCareVersion);w.validateResponse(E,null,()=>{Object.assign(S,E.data),u.value=!0}),k.value++}function H(){}async function R(){g.value=!0;const y=await Z.associationCreate(n.serviceId,n.serviceVersion,S.pointOfCareId,S.pointOfCareVersion);w.validateResponse(y,m.backoffice.pointOfCare.serviceAdded,()=>{r("apply")}),g.value=!1}return(y,E)=>{const U=d("form-field"),x=d("row"),W=d("cfilter"),A=d("ccolumn"),te=d("table-action-detail"),fe=d("ctable"),be=d("container-wrapper"),se=d("cbutton"),ve=d("modal");return L(),q(ve,{id:f,title:y._lang.backoffice.pointOfCare.searchTitle,size:e(v).modalSize.extraLarge,"remove-padding":!0},{body:b(()=>[l(W,{title:y._lang.common.filter,disabled:e(g),"clear-click":F,"apply-click":V,loading:e(g),collapsed:!0},{default:b(()=>[l(x,null,{default:b(()=>[l(U,{id:"code",modelValue:e(o).code,"onUpdate:modelValue":E[0]||(E[0]=z=>e(o).code=z),class:"mb-3 col-12 col-md-6 col-lg-4",label:y._lang.label.code,type:e(v).inputs.text,maxlength:45,disabled:e(g)},null,8,["modelValue","label","type","disabled"]),l(U,{id:"channelTypeIds",class:"mb-3 col-12 col-md-6 col-lg-4",modelValue:e(o).channelTypeIds,"onUpdate:modelValue":E[1]||(E[1]=z=>e(o).channelTypeIds=z),label:y._lang.label.channelTypeId,type:e(v).inputs.multiselect,options:e(t).channelTypeList,disabled:e(g),mode:e(v).multiselectMode.tags},null,8,["modelValue","label","type","options","disabled","mode"]),l(U,{id:"abreviation",class:"mb-3 col-12 col-lg-4",modelValue:e(o).abreviation,"onUpdate:modelValue":E[2]||(E[2]=z=>e(o).abreviation=z),label:y._lang.label.abreviation,type:e(v).inputs.text,maxlength:16,disabled:e(g)},null,8,["modelValue","label","type","disabled"]),l(U,{id:"name",class:"mb-3 col-12",modelValue:e(o).name,"onUpdate:modelValue":E[3]||(E[3]=z=>e(o).name=z),label:y._lang.label.name,type:e(v).inputs.text,maxlength:45,disabled:e(g)},null,8,["modelValue","label","type","disabled"]),l(U,{id:"organization",class:"mb-3 col-12 col-md-6",modelValue:e(o).organization,"onUpdate:modelValue":E[4]||(E[4]=z=>e(o).organization=z),label:y._lang.label.organizationHost,type:e(v).inputs.multiselect,options:e(t).organizationList,disabled:e(g),valueProp:e(v).multiselectValueProp.value3},null,8,["modelValue","label","type","options","disabled","valueProp"])]),_:1})]),_:1},8,["title","disabled","loading"]),l(be,null,{default:b(()=>[l(fe,{onSort:$,onChangePage:h,data:e(p),checkbox:!1,loading:e(g),defaultSort:"Code"},{columns:b(()=>[l(A,{name:y._lang.label.code,field:"code",sortable:!0},null,8,["name"]),l(A,{name:y._lang.label.channelTypeId,field:"channelType",sortField:"channelTypeId",sortable:!0},null,8,["name"]),l(A,{name:y._lang.label.abreviation,field:"abreviation",sortable:!0},null,8,["name"]),l(A,{name:y._lang.label.name,field:"name",sortable:!0},null,8,["name"]),l(A,{name:y._lang.label.organizationHost,field:"organization",sortField:"organizationId",sortable:!0},null,8,["name"])]),actions:b(z=>[l(te,{onClick:Qe=>M(z.item)},null,8,["onClick"])]),_:1},8,["data","loading"])]),_:1}),(L(),q(e(Le),{collapsed:e(u),class:"mt-5",key:e(k),modelValue:e(S),"onUpdate:modelValue":E[5]||(E[5]=z=>N(S)?S.value=z:S=z),disabled:!0,loading:e(g),selectedLang:e(c),validateForm:!1},null,8,["collapsed","modelValue","loading","selectedLang"]))]),footer:b(()=>[l(se,{type:"primary",size:"large",title:y._lang.common.apply,"data-bs-dismiss":"modal",onClick:R,disabled:!e(S).code},null,8,["title","disabled"]),l(se,{type:"secondary",size:"large",title:y._lang.common.cancel,"data-bs-dismiss":"modal",onClick:H},null,8,["title"])]),_:1},8,["title","size"])}}},He=["id"],Ke={__name:"service-points",props:{},setup(I){const r=C(ie.havePermission(v.permissions.service.createEdit));X(()=>{}),ee(async()=>{p.value=w.decodeId(m.params.serviceId),g.value=w.decodeId(m.params.serviceVersion),!p.value||!g.value?o.push({name:Ve.router.BACKOFFICE_SERVICE_PAGE.name}):(k.serviceId=p.value,k.serviceVersion=g.value,await h())});const n="search-pointOfCare-modal",t="delete-pointOfCare",f=w.uuid(),m=ke(),a=J(),o=Ce();let i=C(!0),_=C(0),p=C(0),g=C(0),u=C(w.createEmptyDataSource()),k=j(S()),c=C(null);function S(){return{pageNumber:1,sortBy:"pointOfCareName",active:!0,serviceId:null,serviceVersion:null}}function O(){_.value++,window.setTimeout(function(){w.showModalById(n)},5)}async function T(V){k.sortBy=V,await h()}async function $(V){k.pageNumber=V,await h()}async function h(){i.value=!0;let V=await Z.associationSearch(k);w.validateResponse(V,null,()=>{u.value=V.data}),i.value=!1}async function s(V){c.value=V}async function F(){if(c.value){i.value=!0;const V=await Z.associationRemove(p.value,g.value,c.value.pointOfCareId,c.value.pointOfCareVersion);w.validateResponse(V,a.backoffice.service.pointOfCareRemoved,async()=>{await h()}),i.value=!1}}return(V,M)=>{const H=d("icon-plus"),R=d("table-actions"),y=d("ccolumn"),E=d("table-action-delete"),U=d("ctable"),x=d("container-wrapper"),W=d("confirm-delete-modal");return L(),G(le,null,[l(x,null,{default:b(()=>[l(R,{title:V._lang.common.tableActionTitle},{default:b(()=>[r.value?(L(),G("button",{key:0,class:"btn btn-primary",type:"button",id:e(f),onClick:O},[l(H,{color:"#FFF"}),Se(" "+pe(V._lang.common.addServicePoint),1)],8,He)):P("",!0)]),_:1},8,["title"]),l(U,{onSort:T,onChangePage:$,data:e(u),checkbox:!1,loading:e(i),defaultSort:"pointOfCareCode",checkboxField:"code"},{columns:b(()=>[l(y,{name:V._lang.label.code,field:"pointOfCareCode",sortable:!0},null,8,["name"]),l(y,{name:V._lang.label.channelTypeId,field:"pointOfCareType",sortField:"pointOfCareTypeId",sortable:!0},null,8,["name"]),l(y,{name:V._lang.label.abreviation,field:"pointOfCareAbreviation",sortField:"pointOfCareAbreviation",sortable:!0},null,8,["name"]),l(y,{name:V._lang.label.name,field:"pointOfCareName",sortable:!0},null,8,["name"]),l(y,{name:V._lang.label.organizationHost,field:"pointOfCareOrganization",sortField:"pointOfCareOrganizationId",sortable:!0},null,8,["name"])]),actions:b(A=>[l(E,{id:t,onClick:te=>s(A.item)},null,8,["onClick"])]),_:1},8,["data","loading"])]),_:1}),e(i)?P("",!0):(L(),q(De,{key:e(_),serviceId:e(p),serviceVersion:e(g),onApply:h},null,8,["serviceId","serviceVersion"])),l(W,{id:t,title:V._lang.backoffice.service.pointOfCareDeleteTitle,message:V._lang.backoffice.service.pointOfCareDeleteQuestion,action:F},null,8,["title","message"])],64)}}},ml={__name:"form",props:{formModel:{Object,required:!0},loading:{type:Boolean,required:!0},validateForm:{type:Boolean,required:!0},disabled:{type:Boolean,required:!0},isExternalEdit:{type:Boolean,required:!0},selectedLang:{type:[Number,String],required:!0},rules:{type:Object,required:!0},vuelidate:{Object,default:null},progressValue:{type:Number,default:0},showProgress:{type:Boolean,default:!0}},emits:["update:formModel"],setup(I,{emit:r}){const n=I,t=B({get(){return n.formModel},set(f){r("update:formModel",f)}});return(f,m)=>{const a=d("tab-content"),o=d("tabs");return L(),q(o,null,{default:b(()=>[l(a,{id:"general",title:f._lang.common.general,active:!0},{default:b(()=>[l(xe,{modelValue:e(t),"onUpdate:modelValue":m[0]||(m[0]=i=>N(t)?t.value=i:null),disabled:n.disabled,validateForm:n.validateForm,loading:n.loading,selectedLang:n.selectedLang,rules:n.rules,progressValue:n.progressValue,showProgress:n.showProgress,vuelidate:n.vuelidate},null,8,["modelValue","disabled","validateForm","loading","selectedLang","rules","progressValue","showProgress","vuelidate"])]),_:1},8,["title"]),l(a,{id:"service-points",title:f._lang.backoffice.menu.servicePoints,active:!1,disabled:!1},{default:b(()=>[l(Ke)]),_:1},8,["title"])]),_:1})}}};export{ml as _};
