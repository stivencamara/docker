import{_ as K}from"./delete-confirm-df034be7.js";import{s as W,z as q,I as x,r as i,i as v,a as C,u,n as H,J as Q,b as o,o as X,l as Y,w as s,e as a,g as l,C as Z,D as _,x as $}from"./index-5b4ebf84.js";import{u as ee,p as g}from"./params-de6a9a0b.js";import"./helpers-4796f1a9.js";import"./index.esm-85573352.js";const re={__name:"index",setup(ae){const w=W();q();const B=ee(),M=x();let r=i(!1),m=i([]),p=i([]),f=i(v.tableSelectedState.none),n=C(y()),I=i(u.createEmptyDataSource());C({});let k=i(0);function y(){return{pageNumber:1,sortBy:"description",name:null}}H(async()=>{await d()});function T(e){w.push({name:$.router.BACKOFFICE_SETTINGS_EDIT_PARAMS_PAGE.name,params:{parameterId:u.encodeId(e.parameterId)}})}async function E(){Object.assign(n,y()),await S()}async function S(){n.pageNumber=1,await d()}async function L(e){n.sortBy=e,await d()}async function N(e){n.pageNumber=e,await d()}async function d(){r.value=!0,n.parameterId?n.parameterIds=[n.parameterId]:n.parameterIds=[];let e=await g.search(n);u.validateResponse(e,null,()=>{I.value=e.data}),r.value=!1}async function P(e){k.value=e.parameterId}async function R(){u.closeModalById("confirm-delete"),await d()}return Q(async()=>{r.value=!0;const e=await g.getLists(M.getLanguage);u.validateResponse(e,null,()=>{B.setLists(e.data)}),r.value=!1}),(e,c)=>{const h=o("breadcrumb-item"),A=o("breadcrumb"),D=o("form-field"),U=o("row"),V=o("cfilter"),b=o("ccolumn"),F=o("table-action-edit"),G=o("table-action-delete"),O=o("ctable"),j=o("card"),z=o("page");return X(),Y(z,{title:e._lang.backoffice.settings.params.pageTitle},{breadcrumb:s(()=>[a(A,{"has-home":!0},{default:s(()=>[a(h,{label:e._lang.backoffice.settings.params.breadcrumbTitle},null,8,["label"])]),_:1})]),default:s(()=>[a(j,{shadow:!0},{body:s(()=>[a(V,{title:e._lang.common.filter,disabled:l(r),"clear-click":E,"apply-click":S,loading:l(r),collapsed:!0},{default:s(()=>[a(U,null,{default:s(()=>[a(D,{id:"name",modelValue:l(n).name,"onUpdate:modelValue":c[0]||(c[0]=t=>l(n).name=t),class:"mb-3 col-12",label:e._lang.label.name,type:l(v).inputs.text,maxlength:45,disabled:l(r)},null,8,["modelValue","label","type","disabled"])]),_:1})]),_:1},8,["title","disabled","loading"]),a(Z,null,{default:s(()=>[a(O,{onSort:L,onChangePage:N,selectedItems:l(m),"onUpdate:selectedItems":c[1]||(c[1]=t=>_(m)?m.value=t:m=t),unselectedItems:l(p),"onUpdate:unselectedItems":c[2]||(c[2]=t=>_(p)?p.value=t:p=t),selectedState:l(f),"onUpdate:selectedState":c[3]||(c[3]=t=>_(f)?f.value=t:f=t),data:l(I),checkbox:!1,loading:l(r),defaultSort:"description"},{columns:s(()=>[a(b,{name:e._lang.label.name,field:"name",sortable:!0},null,8,["name"]),a(b,{name:e._lang.label.description,field:"description",sortable:!0},null,8,["name"]),a(b,{name:e._lang.label.value,field:"value",sortable:!0},null,8,["name"])]),actions:s(t=>[a(F,{onClick:J=>T(t.item)},null,8,["onClick"]),a(G,{onClick:J=>P(t.item)},null,8,["onClick"])]),_:1},8,["selectedItems","unselectedItems","selectedState","data","loading"])]),_:1})]),_:1}),a(K,{"item-id":l(k),resource:e._lang.backoffice.settings.params,action:R,service:l(g)},null,8,["item-id","resource","service"])]),_:1},8,["title"])}}};export{re as default};
