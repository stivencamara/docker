import{_ as W}from"./delete-confirm-df034be7.js";import{s as $,z as q,r as u,i as d,a as E,u as b,n as x,b as o,o as H,l as J,w as c,e as t,g as a,S as Q,C as X,D as _,x as v}from"./index-5b4ebf84.js";import{r as w}from"./refusal-types-8757feb7.js";const te={__name:"index",setup(Z){const y=$();q();let i=u(!1),m=u([]),p=u([]),f=u(d.tableSelectedState.none),n=E(I()),g=u(b.createEmptyDataSource());E({});let T=u(0);function I(){return{pageNumber:1,sortBy:"refusalTypeId",refusalTypeId:null,refusalTypeIds:[],caeDesignation:null}}x(async()=>{await r()});function A(e){y.push({name:v.router.BACKOFFICE_SETTINGS_EDIT_REFUSAL_TYPES_PAGE.name,params:{refusalTypeId:b.encodeId(e.refusalTypeId)}})}async function B(){Object.assign(n,I()),await C()}async function C(){n.pageNumber=1,await r()}function F(){y.push({name:v.router.BACKOFFICE_SETTINGS_CREATE_REFUSAL_TYPES_PAGE.name})}async function N(e){n.sortBy=e,await r()}async function U(e){n.pageNumber=e,await r()}async function r(){i.value=!0,n.refusalTypeId?n.refusalTypeIds=[n.refusalTypeId]:n.refusalTypeIds=[];let e=await w.search(n);b.validateResponse(e,null,()=>{g.value=e.data}),i.value=!1}async function V(e){T.value=e.refusalTypeId}async function P(){b.closeModalById("confirm-delete"),await r()}return(e,s)=>{const R=o("breadcrumb-item"),D=o("breadcrumb"),h=o("cbutton"),S=o("form-field"),z=o("row"),G=o("cfilter"),k=o("ccolumn"),M=o("table-action-edit"),L=o("table-action-delete"),O=o("ctable"),K=o("card"),Y=o("page");return H(),J(Y,{title:e._lang.backoffice.settings.refusalType.pageTitle},{breadcrumb:c(()=>[t(D,{"has-home":!0},{default:c(()=>[t(R,{label:e._lang.backoffice.settings.refusalType.breadcrumbTitle},null,8,["label"])]),_:1})]),actions:c(()=>[t(h,{class:"col-12 col-sm-auto",type:a(d).buttonType.secondary,size:a(d).buttonSize.medium,title:e._lang.common.toAdd,icon:Q,onClick:F},null,8,["type","size","title"])]),default:c(()=>[t(K,{shadow:!0},{body:c(()=>[t(G,{title:e._lang.common.filter,disabled:a(i),"clear-click":B,"apply-click":C,loading:a(i),collapsed:!0},{default:c(()=>[t(z,null,{default:c(()=>[t(S,{id:"refusalTypeId",modelValue:a(n).refusalTypeId,"onUpdate:modelValue":s[0]||(s[0]=l=>a(n).refusalTypeId=l),class:"mb-3 col-6",label:e._lang.label.id,type:a(d).inputs.number,maxlength:45,disabled:a(i)},null,8,["modelValue","label","type","disabled"]),t(S,{id:"refusalTypeName",modelValue:a(n).name,"onUpdate:modelValue":s[1]||(s[1]=l=>a(n).name=l),class:"mb-3 col-6",label:e._lang.label.name,type:a(d).inputs.text,maxlength:45,disabled:a(i)},null,8,["modelValue","label","type","disabled"])]),_:1})]),_:1},8,["title","disabled","loading"]),t(X,null,{default:c(()=>[t(O,{onSort:N,onChangePage:U,selectedItems:a(m),"onUpdate:selectedItems":s[2]||(s[2]=l=>_(m)?m.value=l:m=l),unselectedItems:a(p),"onUpdate:unselectedItems":s[3]||(s[3]=l=>_(p)?p.value=l:p=l),selectedState:a(f),"onUpdate:selectedState":s[4]||(s[4]=l=>_(f)?f.value=l:f=l),data:a(g),checkbox:!1,loading:a(i),defaultSort:"refusalTypeId"},{columns:c(()=>[t(k,{name:e._lang.label.id,field:"refusalTypeId",sortable:!0},null,8,["name"]),t(k,{name:e._lang.label.name,field:"name",sortable:!0},null,8,["name"])]),actions:c(l=>[t(M,{onClick:j=>A(l.item)},null,8,["onClick"]),t(L,{onClick:j=>V(l.item)},null,8,["onClick"])]),_:1},8,["selectedItems","unselectedItems","selectedState","data","loading"])]),_:1})]),_:1}),t(W,{"item-id":a(T),resource:e._lang.backoffice.settings.refusalType,action:P,service:a(w)},null,8,["item-id","resource","service"])]),_:1},8,["title"])}}};export{te as default};
