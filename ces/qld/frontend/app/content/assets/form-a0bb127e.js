import{i as _,K as te,E as F,v as p,j as I,r as u,o as w,c as $,w as v,a,m as e,z as q,y as h,q as D,D as se,s as x,b as Q,Q as j,M as oe,e as K,R as de,S as re,T as ue,F as X,J as ge,l as be,C as fe,h as ve,I as ye,x as Ve}from"./index-a3ba1ed7.js";import{u as G}from"./service-e931ab78.js";import{r as _e}from"./index.esm-d7202dd3.js";import{b as R}from"./helpers-4d6c1969.js";import{a as Ce,_ as ke}from"./address.vue_vue_type_style_index_0_scoped_2266ba05_lang-0a4ce42e.js";import{s as W}from"./service-dc586f40.js";import{u as J}from"./index.esm-9dd2f6da.js";import{_ as Se}from"./form-c4dc8a79.js";import{s as Ie}from"./settings-4e9392c0.js";import{s as H}from"./helpers-10c1d19c.js";import{_ as we,a as Le}from"./refusal-478c260d.js";import{_ as Oe}from"./generic-4e94cd3a.js";import{p as ae}from"./point-of-care-748eca52.js";import{u as Fe}from"./point-of-care-355d6f64.js";import"./organization-ce7c2862.js";import{p as Ee}from"./helpers-ae560b5a.js";const Te={__name:"description",props:{modelValue:{type:Object,required:!0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},selectedLang:{type:[String,Number],required:!0},validateForm:{type:Boolean,default:!1},rules:{type:Object,default:{}}},emits:["update:modelValue"],setup(C,{emit:c}){const t=C,i=G(),d=J(t.rules,t.modelValue);let g=_(!0),o=_([]);te(async()=>{await r()});const l=F({get(){return t.modelValue},set(k){c("update:modelValue",k)}}),s=F(()=>t.selectedLang),S=F({get(){return R.getFieldByLangAndName(l.value,s.value,"description")},set(k){R.setFieldByLangAndName(l.value,s.value,"description",k)}});F({get(){return R.getFieldByLangAndName(l.value,s.value,"serviceProcedure")},set(k){R.setFieldByLangAndName(l.value,s.value,"serviceProcedure",k)}});const m=F(()=>s.value===p.language.en);async function r(){g.value=!0;const k=await W.checklist();I.validateResponse(k,null,()=>{o.value=k.data}),g.value=!1}return(k,y)=>{const n=u("form-field"),V=u("row"),E=u("accordion");return w(),$(E,{id:"description",title:k._lang.common.description,collapsed:!1,class:"mb-4"},{default:v(()=>[a(V,null,{default:v(()=>[a(n,{id:"economicActivityId",class:"mb-3 col-12",modelValue:e(l).economicActivityId,"onUpdate:modelValue":y[0]||(y[0]=L=>e(l).economicActivityId=L),label:k._lang.label.economicActivityId,disabled:t.disabled||e(m),loading:t.loading,type:e(p).inputs.multiselect,required:t.validateForm,placeholder:k._lang.common.selectOption,showError:t.validateForm&&e(d).economicActivityId.$error,"error-message":k._errorMessageField(e(d).economicActivityId),options:e(i).economicActivityList},null,8,["modelValue","label","disabled","loading","type","required","placeholder","showError","error-message","options"])]),_:1}),e(g)?h("",!0):(w(),$(n,{key:0,id:"description",class:"mb-3 col-12",modelValue:e(S),"onUpdate:modelValue":y[1]||(y[1]=L=>q(S)?S.value=L:null),label:k._lang.label.description,disabled:t.disabled,loading:t.loading,type:e(p).inputs.richtext,language:e(s),maxlength:4e3,templates:e(o)},null,8,["modelValue","label","disabled","loading","type","language","templates"]))]),_:1},8,["title"])}}},Be={__name:"create",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(C,{emit:c}){const t=C,i=D();se();const d="create-legislation";let g=_([]),o=x(H.legislationNewForm()),l=_(!1),s=_(p.language.pt);const S=J(H.legislationFormRules(),o,{$scope:!1}),m=F({get(){return t.modelValue},set(n){c("update:modelValue",n)}});async function r(){l.value=!0;let n=await Ie.getLanguages();I.validateResponse(n,null,()=>{g.value=n.data}),l.value=!1}function k(){o=Object.assign(o,H.legislationNewForm()),S.value.$reset()}async function y(){if(l.value=!0,await S.value.$validate(),!S.value.$error){const n={legislationId:o.legislationId,name:o.texts[0].name,code:o.code,document:o.document,texts:o.texts};m.value.find(E=>E.name===n.name&&E.description===n.description)?j.warning(i.backoffice.service.legislationExists):(m.value.push(n),o=Object.assign(o,H.legislationNewForm()),S.value.$reset(),I.closeModalById(d),j.success(i.backoffice.service.legislationAdded))}l.value=!1}return Q(async()=>{await r()}),(n,V)=>{const E=u("lang-selector"),L=u("top-actions"),B=u("cbutton"),A=u("modal");return w(),$(A,{id:d,title:n._lang.backoffice.service.addLegislation,size:e(p).modalSize.extraLarge},{body:v(()=>[a(L,null,{default:v(()=>[a(E,{options:e(g),selectedLang:e(s),"onUpdate:selectedLang":V[0]||(V[0]=T=>q(s)?s.value=T:s=T),disabled:e(l)},null,8,["options","selectedLang","disabled"])]),_:1}),a(Se,{modelValue:e(o),"onUpdate:modelValue":V[1]||(V[1]=T=>q(o)?o.value=T:o=T),selectedLang:e(s),loading:e(l),disabled:e(l),vuelidate:e(S)},null,8,["modelValue","selectedLang","loading","disabled","vuelidate"])]),footer:v(()=>[a(B,{title:n._lang.common.cancel,type:e(p).buttonType.secondary,"data-bs-dismiss":"modal","aria-label":"Close",disabled:e(l),onClick:k},null,8,["title","type","disabled"]),a(B,{title:n._lang.common.save,onClick:y,disabled:e(l)},null,8,["title","disabled"])]),_:1},8,["title","size"])}}},Ue={__name:"legislations",props:{modelValue:{type:Array,required:!0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},rules:{type:Object,default:{}}},emits:["update:modelValue"],setup(C,{emit:c}){const t=C,i=D();let d=_(!1);const g=F(()=>I.createEmptyDataSource(l.value)),o="confirm-delete-legislation",l=F({get(){return t.modelValue},set(n){c("update:modelValue",n)}});let s=_(null);const S=_(oe.havePermission(p.permissions.service.createEdit));function m(n){s.value=n}function r(){s.value&&(I.removeItemOfArray(l.value,s),j.success(i.backoffice.service.legislationRemoved),s.value=null)}function k(n){I.sortArrayOffline(n,g.value.items)}function y(n){n.download&&I.downloadFile(n.download)}return(n,V)=>{const E=u("table-actions"),L=u("ccolumn"),B=u("table-action-download"),A=u("table-action-delete"),T=u("ctable"),N=u("confirm-delete-modal");return w(),K(X,null,[a(ue,{id:"legislations",title:n._lang.backoffice.service.legislations,collapsed:!1,class:"mb-4"},{default:v(()=>[S.value?(w(),$(E,{key:0},{default:v(()=>[a(de,{target:"create-legislation",class:"d-inline",type:e(p).buttonType.secondary,title:n._lang.common.toAdd,disabled:t.disabled,icon:re},null,8,["type","title","disabled"])]),_:1})):h("",!0),a(T,{data:e(g),loading:e(d),checkbox:!1,showPagination:!1,onSort:k},{columns:v(()=>[a(L,{name:n._lang.label.code,field:"code",sortable:!0},null,8,["name"]),a(L,{name:n._lang.common.name,field:"name",sortable:!0},null,8,["name"])]),actions:v(f=>[f.item.download?(w(),$(B,{key:0,onClick:M=>y(f.item)},null,8,["onClick"])):h("",!0),a(A,{id:o,onClick:M=>m(f.item)},null,8,["onClick"])]),_:1},8,["data","loading"])]),_:1},8,["title"]),a(Be,{modelValue:e(l),"onUpdate:modelValue":V[0]||(V[0]=f=>q(l)?l.value=f:null)},null,8,["modelValue"]),a(N,{id:o,title:n._lang.backoffice.service.deleteLegislation,message:n._lang.backoffice.service.deleteLegislationQuestion,action:r},null,8,["title","message"])],64)}}},$e={__name:"create",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(C,{emit:c}){const t=C,i=G(),d=D();se();const g="create-recipient";let o=x(m()),l=_(!1);const s=J(H.recipientFormRules(),o,{$scope:!1}),S=F({get(){return t.modelValue},set(y){c("update:modelValue",y)}});function m(){return{recipientId:null,name:null,description:null,informationLevel:!1,recipientTypeId:null,recipientType:null}}function r(){o=Object.assign(o,m()),s.value.$reset()}async function k(){if(l.value=!0,await s.value.$validate(),!s.value.$error){const y={recipientId:o.recipientId,recipientTypeId:o.recipientTypeId,recipientType:R.getLabel(i.recipientTypeList,o.recipientTypeId),name:o.name,description:o.description,document:o.document};S.value.find(V=>V.name===o.name&&V.description===o.description)?j.warning(d.backoffice.service.recipientExists):(S.value.push(y),o=Object.assign(o,m()),s.value.$reset(),I.closeModalById(g),j.success(d.backoffice.service.recipientAdded))}l.value=!1}return(y,n)=>{const V=u("form-field"),E=u("cbutton"),L=u("modal");return w(),$(L,{id:g,title:y._lang.backoffice.service.addRecipient,size:e(p).modalSize.extraLarge},{body:v(()=>[a(V,{id:"name",class:"mb-3 col-12",modelValue:e(o).name,"onUpdate:modelValue":n[0]||(n[0]=B=>e(o).name=B),label:y._lang.label.name,disabled:t.disabled,loading:t.loading,type:e(p).inputs.text,maxlength:255,required:!0,"show-error":e(s).name.$error,"error-message":y._errorMessageField(e(s).name)},null,8,["modelValue","label","disabled","loading","type","show-error","error-message"]),a(V,{id:"description",class:"mb-3 col-12",modelValue:e(o).description,"onUpdate:modelValue":n[1]||(n[1]=B=>e(o).description=B),label:y._lang.label.description,disabled:t.disabled,loading:t.loading,type:e(p).inputs.text,maxlength:255},null,8,["modelValue","label","disabled","loading","type"]),a(V,{id:"recipientTypeId",class:"mb-3 col-12",modelValue:e(o).recipientTypeId,"onUpdate:modelValue":n[2]||(n[2]=B=>e(o).recipientTypeId=B),label:y._lang.label.recipientTypeId,disabled:t.disabled,loading:t.loading,type:e(p).inputs.multiselect,placeholder:y._lang.common.selectOption,options:e(i).recipientTypeList},null,8,["modelValue","label","disabled","loading","type","placeholder","options"])]),footer:v(()=>[a(E,{title:y._lang.common.cancel,type:e(p).buttonType.secondary,"data-bs-dismiss":"modal","aria-label":"Close",disabled:e(l),onClick:r},null,8,["title","type","disabled"]),a(E,{title:y._lang.common.save,onClick:k,disabled:e(l)},null,8,["title","disabled"])]),_:1},8,["title","size"])}}},qe={__name:"recipients",props:{modelValue:{type:Array,required:!0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},rules:{type:Object,default:{}}},emits:["update:modelValue"],setup(C,{emit:c}){const t=C,i=D();let d=_(!1);const g=F(()=>I.createEmptyDataSource(l.value)),o="confirm-delete",l=F({get(){return t.modelValue},set(n){c("update:modelValue",n)}});let s=_(null);const S=_(oe.havePermission(p.permissions.service.createEdit));function m(n){s.value=n}function r(){s.value&&(I.removeItemOfArray(l.value,s),j.success(i.backoffice.service.recipientRemoved),s.value=null)}function k(n){I.sortArrayOffline(n,g.value.items)}function y(n){n.download&&I.downloadFile(n.download)}return(n,V)=>{const E=u("table-actions"),L=u("ccolumn"),B=u("table-action-download"),A=u("table-action-delete"),T=u("ctable"),N=u("confirm-delete-modal");return w(),K(X,null,[a(ue,{id:"recipients",title:n._lang.backoffice.service.recipients,collapsed:!1,class:"mb-4"},{default:v(()=>[S.value?(w(),$(E,{key:0},{default:v(()=>[a(de,{target:"create-recipient",class:"d-inline",type:e(p).buttonType.secondary,title:n._lang.common.toAdd,disabled:t.disabled,icon:re},null,8,["type","title","disabled"])]),_:1})):h("",!0),a(T,{data:e(g),loading:e(d),checkbox:!1,showPagination:!1,onSort:k},{columns:v(()=>[a(L,{name:n._lang.label.name,field:"name",sortable:!0},null,8,["name"]),a(L,{name:n._lang.label.description,field:"description",sortable:!0},null,8,["name"]),a(L,{name:n._lang.label.recipientTypeId,sortField:"recipientTypeId",field:"recipientType",sortable:!0},null,8,["name"])]),actions:v(f=>[f.item.download?(w(),$(B,{key:0,onClick:M=>y(f.item)},null,8,["onClick"])):h("",!0),a(A,{id:o,onClick:M=>m(f.item),disabled:t.disabled},null,8,["onClick","disabled"])]),_:1},8,["data","loading"])]),_:1},8,["title"]),a($e,{modelValue:e(l),"onUpdate:modelValue":V[0]||(V[0]=f=>q(l)?l.value=f:null)},null,8,["modelValue"]),a(N,{id:o,title:n._lang.backoffice.service.deleteRecipient,message:n._lang.backoffice.service.deleteRecipientQuestion,action:r},null,8,["title","message"])],64)}}},Ae={__name:"state-support",props:{modelValue:{type:Object,required:!0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},validateForm:{type:Boolean,default:!1},rules:{type:Object,default:{}},selectedLang:{type:[String,Number],required:!0}},emits:["update:modelValue"],setup(C,{emit:c}){const t=C;G(),_(!1),Q(async()=>{});const i=J(t.rules,t.modelValue),d=F({get(){return t.modelValue},set(o){c("update:modelValue",o)}}),g=F(()=>t.selectedLang===p.language.en);return(o,l)=>{const s=u("form-field"),S=u("row"),m=u("accordion");return w(),$(m,{id:"stateSupport",title:o._lang.backoffice.service.stateSupport,collapsed:!1,class:"mb-4"},{default:v(()=>[a(S,null,{default:v(()=>[a(s,{id:"stateSupport",class:"mb-3 col-12 col-md-6 col-lg-3",modelValue:e(d).stateSupport.isStateSupport,"onUpdate:modelValue":l[0]||(l[0]=r=>e(d).stateSupport.isStateSupport=r),label:o._lang.label.stateSupport,disabled:t.disabled||e(g),loading:t.loading,type:e(p).inputs.checkbox},null,8,["modelValue","label","disabled","loading","type"]),a(s,{id:"stateSupportUrl",class:"mb-3 col-12",modelValue:e(d).stateSupport.url,"onUpdate:modelValue":l[1]||(l[1]=r=>e(d).stateSupport.url=r),required:e(d).stateSupport.isStateSupport,label:o._lang.label.serviceUrl,disabled:t.disabled||e(g)||!e(d).stateSupport.isStateSupport,loading:t.loading,type:e(p).inputs.text,showError:t.validateForm&&e(i).stateSupportUrl.$error,"error-message":o._errorMessageField(e(i).stateSupportUrl),maxlength:1024},null,8,["modelValue","required","label","disabled","loading","type","showError","error-message"]),a(s,{id:"externalSystemId",class:"mb-3 col-12 col-md-6",modelValue:e(d).stateSupport.externalSystemId,"onUpdate:modelValue":l[2]||(l[2]=r=>e(d).stateSupport.externalSystemId=r),required:!1,label:o._lang.label.externalSystemId,disabled:t.disabled||e(g)||!e(d).stateSupport.isStateSupport,loading:t.loading,type:e(p).inputs.text,maxlength:1024},null,8,["modelValue","label","disabled","loading","type"]),a(s,{id:"processId",class:"mb-3 col-12 col-md-6",modelValue:e(d).stateSupport.processId,"onUpdate:modelValue":l[3]||(l[3]=r=>e(d).stateSupport.processId=r),required:!1,label:o._lang.label.processId,disabled:t.disabled||e(g)||!e(d).stateSupport.isStateSupport,loading:t.loading,type:e(p).inputs.text,maxlength:1024},null,8,["modelValue","label","disabled","loading","type"])]),_:1})]),_:1},8,["title"])}}},ze={__name:"virtual",props:{modelValue:{type:Object,required:!0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},validateForm:{type:Boolean,default:!1},rules:{type:Object,default:{}},selectedLang:{type:[String,Number],required:!0}},emits:["update:modelValue"],setup(C,{emit:c}){const t=C;G(),Q(async()=>{}),_(null),_(null),_(null),_(null);const i=J(t.rules,t.modelValue),d=F({get(){return t.modelValue},set(o){c("update:modelValue",o)}}),g=F(()=>t.selectedLang===p.language.en);return(o,l)=>{const s=u("form-field"),S=u("row"),m=u("accordion");return w(),$(m,{id:"virtual",title:o._lang.backoffice.service.virtual,collapsed:!1,class:"mb-4"},{default:v(()=>[a(S,null,{default:v(()=>[a(s,{id:"virtual",class:"mb-3 col-12 col-md-6 col-lg-3",modelValue:e(d).virtual.isVirtual,"onUpdate:modelValue":l[0]||(l[0]=r=>e(d).virtual.isVirtual=r),label:o._lang.label.virtual,disabled:t.disabled||e(g),loading:t.loading,type:e(p).inputs.checkbox},null,8,["modelValue","label","disabled","loading","type"]),a(s,{id:"virtualUrl",class:"mb-3 col-12",modelValue:e(d).virtual.url,"onUpdate:modelValue":l[1]||(l[1]=r=>e(d).virtual.url=r),required:e(d).virtual.isVirtual,label:o._lang.label.serviceUrl,disabled:t.disabled||e(g)||!e(d).virtual.isVirtual,loading:t.loading,type:e(p).inputs.text,showError:t.validateForm&&e(i).virtualUrl.$error,"error-message":o._errorMessageField(e(i).virtualUrl),maxlength:1024},null,8,["modelValue","required","label","disabled","loading","type","showError","error-message"]),a(s,{id:"externalSystemId",class:"mb-3 col-12 col-md-6",modelValue:e(d).virtual.externalSystemId,"onUpdate:modelValue":l[2]||(l[2]=r=>e(d).virtual.externalSystemId=r),required:!1,label:o._lang.label.externalSystemId,disabled:t.disabled||e(g)||!e(d).virtual.isVirtual,loading:t.loading,type:e(p).inputs.text,maxlength:1024},null,8,["modelValue","label","disabled","loading","type"]),a(s,{id:"processId",class:"mb-3 col-12 col-md-6",modelValue:e(d).virtual.processId,"onUpdate:modelValue":l[3]||(l[3]=r=>e(d).virtual.processId=r),required:!1,label:o._lang.label.processId,disabled:t.disabled||e(g)||!e(d).virtual.isVirtual,loading:t.loading,type:e(p).inputs.text,maxlength:1024},null,8,["modelValue","label","disabled","loading","type"]),a(s,{id:"canExecutedByThirdParty",class:"mb-3 col-12",modelValue:e(d).virtual.canExecutedByThirdParty,"onUpdate:modelValue":l[4]||(l[4]=r=>e(d).virtual.canExecutedByThirdParty=r),required:!1,label:o._lang.label.canExecutedByThirdParty,disabled:t.disabled||e(g)||!e(d).virtual.isVirtual,loading:t.loading,type:e(p).inputs.checkbox,maxlength:1024},null,8,["modelValue","label","disabled","loading","type"])]),_:1})]),_:1},8,["title"])}}},Pe={__name:"general",props:{modelValue:{type:Object,required:!0},selectedLang:_e,disabled:{Boolean,default:!0},rules:{Boolean,default:!0},validateForm:{Boolean,default:!1},loading:{Object,default:{}},isExternalEdit:{type:Boolean,default:!1},showProgress:{type:Boolean,default:!0},progressValue:{type:Number,default:0}},setup(C){const c=C,t=G(),i=F({get(){return c.modelValue},set(o){emit("update:modelValue",o)}}),d=F(()=>c.selectedLang),g=F(()=>d.value===p.language.en);return(o,l)=>{const s=u("progress-bar"),S=u("container-wrapper");return w(),K(X,null,[c.showProgress?(w(),$(S,{key:0,"margin-top":!1},{default:v(()=>[a(s,{value:C.progressValue,label:o._lang.common.fill,class:"mb-4 col-12 float-end"},null,8,["value","label"])]),_:1})):h("",!0),a(we,{modelValue:e(i),"onUpdate:modelValue":l[0]||(l[0]=m=>q(i)?i.value=m:null),store:e(t)},null,8,["modelValue","store"]),a(e(Ce),{modelValue:e(i),"onUpdate:modelValue":l[1]||(l[1]=m=>q(i)?i.value=m:null),disabled:c.disabled,loading:C.loading,selectedLang:c.selectedLang,validateForm:c.validateForm,rules:c.rules,isExternalEdit:c.isExternalEdit},null,8,["modelValue","disabled","loading","selectedLang","validateForm","rules","isExternalEdit"]),a(e(Ae),{modelValue:e(i),"onUpdate:modelValue":l[2]||(l[2]=m=>q(i)?i.value=m:null),disabled:c.disabled,loading:C.loading,selectedLang:c.selectedLang,validateForm:c.validateForm,rules:c.rules,isExternalEdit:c.isExternalEdit},null,8,["modelValue","disabled","loading","selectedLang","validateForm","rules","isExternalEdit"]),a(e(ze),{modelValue:e(i),"onUpdate:modelValue":l[3]||(l[3]=m=>q(i)?i.value=m:null),disabled:c.disabled,loading:C.loading,selectedLang:c.selectedLang,validateForm:c.validateForm,rules:c.rules,isExternalEdit:c.isExternalEdit},null,8,["modelValue","disabled","loading","selectedLang","validateForm","rules","isExternalEdit"]),a(e(Te),{modelValue:e(i),"onUpdate:modelValue":l[4]||(l[4]=m=>q(i)?i.value=m:null),disabled:c.disabled,loading:C.loading,selectedLang:c.selectedLang,validateForm:c.validateForm,rules:c.rules},null,8,["modelValue","disabled","loading","selectedLang","validateForm","rules"]),a(e(qe),{modelValue:e(i).recipients,"onUpdate:modelValue":l[5]||(l[5]=m=>e(i).recipients=m),disabled:c.disabled||e(g),loading:C.loading},null,8,["modelValue","disabled","loading"]),a(e(Ue),{modelValue:e(i).legislations,"onUpdate:modelValue":l[6]||(l[6]=m=>e(i).legislations=m),disabled:c.disabled,loading:C.loading},null,8,["modelValue","disabled","loading"]),a(e(Le),{modelValue:e(i),"onUpdate:modelValue":l[7]||(l[7]=m=>q(i)?i.value=m:null),disabled:c.disabled,loading:C.loading,selectedLang:c.selectedLang},null,8,["modelValue","disabled","loading","selectedLang"]),a(Oe,{modelValue:e(i),"onUpdate:modelValue":l[8]||(l[8]=m=>q(i)?i.value=m:null),disabled:c.disabled,loading:C.loading,selectedLang:e(d)},null,8,["modelValue","disabled","loading","selectedLang"])],64)}}},he={__name:"search-service-points-modal",props:{serviceId:{Number,required:!0},serviceVersion:{Number,required:!0}},emits:["apply"],setup(C,{emit:c}){const t=C,i=Fe(),d="search-pointOfCare-modal",g=D(),o=ge();let l=x(L()),s=_([]),S=_([]),m=_(I.createEmptyDataSource()),r=_(!1),k=_(!1),y=_(0),n=_("pt"),V=x(E());function E(){return Ee.newForm()}function L(){return{pageNumber:1,sortBy:"Code",recordStateIds:[p.recordStateType.published],active:!0}}te(async()=>{r.value=!0,s.value=I.convertEnumToArray(g.enums.recordStateType);const b=await ae.getLists(o.getLanguage);I.validateResponse(b,null,()=>{i.setLists(b.data),s.value=I.convertEnumToArray(g.enums.recordStateType),S.value=I.concatItemsBadge(s.value,R.recordStateTypeBadgeOptions)}),r.value=!1}),Q(async()=>{await T()});async function B(b){l.sortBy=b,await T()}async function A(b){l.pageNumber=b,await T()}async function T(){r.value=!0;let b=await ae.search(l);I.validateResponse(b,null,()=>{m.value=b.data}),r.value=!1}async function N(){Object.assign(l,L()),await T()}async function f(){await T()}async function M(b){const O=await ae.getById(b.pointOfCareId,b.pointOfCareVersion);I.validateResponse(O,null,()=>{Object.assign(V,O.data),k.value=!0}),y.value++}function Y(){}async function Z(){r.value=!0;const b=await W.associationCreate(t.serviceId,t.serviceVersion,V.pointOfCareId,V.pointOfCareVersion);I.validateResponse(b,g.backoffice.pointOfCare.serviceAdded,()=>{c("apply")}),r.value=!1}return(b,O)=>{const z=u("form-field"),ee=u("row"),le=u("cfilter"),P=u("ccolumn"),ne=u("table-action-detail"),ce=u("ctable"),me=u("container-wrapper"),ie=u("cbutton"),pe=u("modal");return w(),$(pe,{id:d,title:b._lang.backoffice.pointOfCare.searchTitle,size:e(p).modalSize.extraLarge,"remove-padding":!0},{body:v(()=>[a(le,{title:b._lang.common.filter,disabled:e(r),"clear-click":N,"apply-click":f,loading:e(r),collapsed:!0},{default:v(()=>[a(ee,null,{default:v(()=>[a(z,{id:"code",modelValue:e(l).code,"onUpdate:modelValue":O[0]||(O[0]=U=>e(l).code=U),class:"mb-3 col-12 col-md-6 col-lg-4",label:b._lang.label.code,type:e(p).inputs.text,maxlength:45,disabled:e(r)},null,8,["modelValue","label","type","disabled"]),a(z,{id:"channelTypeIds",class:"mb-3 col-12 col-md-6 col-lg-4",modelValue:e(l).channelTypeIds,"onUpdate:modelValue":O[1]||(O[1]=U=>e(l).channelTypeIds=U),label:b._lang.label.channelTypeId,type:e(p).inputs.multiselect,options:e(i).channelTypeList,disabled:e(r),mode:e(p).multiselectMode.tags},null,8,["modelValue","label","type","options","disabled","mode"]),a(z,{id:"abreviation",class:"mb-3 col-12 col-lg-4",modelValue:e(l).abreviation,"onUpdate:modelValue":O[2]||(O[2]=U=>e(l).abreviation=U),label:b._lang.label.abreviation,type:e(p).inputs.text,maxlength:16,disabled:e(r)},null,8,["modelValue","label","type","disabled"]),a(z,{id:"name",class:"mb-3 col-12",modelValue:e(l).name,"onUpdate:modelValue":O[3]||(O[3]=U=>e(l).name=U),label:b._lang.label.name,type:e(p).inputs.text,maxlength:45,disabled:e(r)},null,8,["modelValue","label","type","disabled"]),a(z,{id:"organization",class:"mb-3 col-12 col-md-6",modelValue:e(l).organization,"onUpdate:modelValue":O[4]||(O[4]=U=>e(l).organization=U),label:b._lang.label.organizationHost,type:e(p).inputs.multiselect,options:e(i).organizationList,disabled:e(r),valueProp:e(p).multiselectValueProp.value3},null,8,["modelValue","label","type","options","disabled","valueProp"]),a(z,{id:"organizationHost",class:"mb-3 col-12 col-md-6",modelValue:e(l).organizationHost,"onUpdate:modelValue":O[5]||(O[5]=U=>e(l).organizationHost=U),label:b._lang.label.hostOrganization,type:e(p).inputs.multiselect,options:e(i).organizationList,disabled:e(r),valueProp:e(p).multiselectValueProp.value3},null,8,["modelValue","label","type","options","disabled","valueProp"])]),_:1})]),_:1},8,["title","disabled","loading"]),a(me,null,{default:v(()=>[a(ce,{onSort:B,onChangePage:A,data:e(m),checkbox:!1,loading:e(r),defaultSort:"Code"},{columns:v(()=>[a(P,{name:b._lang.label.code,field:"code",sortable:!0},null,8,["name"]),a(P,{name:b._lang.label.channelTypeId,field:"channelType",sortField:"channelTypeId",sortable:!0},null,8,["name"]),a(P,{name:b._lang.label.abreviation,field:"abreviation",sortable:!0},null,8,["name"]),a(P,{name:b._lang.label.name,field:"name",sortable:!0},null,8,["name"]),a(P,{name:b._lang.label.organizationHost,field:"organization",sortField:"organizationId",sortable:!0},null,8,["name"]),a(P,{name:b._lang.label.hostOrganization,field:"organizationHost",sortField:"organizationHostId",sortable:!0},null,8,["name"])]),actions:v(U=>[a(ne,{onClick:Re=>M(U.item)},null,8,["onClick"])]),_:1},8,["data","loading"])]),_:1}),(w(),$(e(ke),{collapsed:e(k),class:"mt-5",key:e(y),modelValue:e(V),"onUpdate:modelValue":O[6]||(O[6]=U=>q(V)?V.value=U:V=U),disabled:!0,loading:e(r),selectedLang:e(n),validateForm:!1},null,8,["collapsed","modelValue","loading","selectedLang"]))]),footer:v(()=>[a(ie,{type:"primary",size:"large",title:b._lang.common.apply,"data-bs-dismiss":"modal",onClick:Z,disabled:!e(V).code},null,8,["title","disabled"]),a(ie,{type:"secondary",size:"large",title:b._lang.common.cancel,"data-bs-dismiss":"modal",onClick:Y},null,8,["title"])]),_:1},8,["title","size"])}}},Ne=["id"],Me={__name:"service-points",props:{},setup(C){const c=_(oe.havePermission(p.permissions.service.createEdit));Q(()=>{}),te(async()=>{m.value=I.decodeId(g.params.serviceId),r.value=I.decodeId(g.params.serviceVersion),!m.value||!r.value?l.push({name:be.router.BACKOFFICE_SERVICE_PAGE.name}):(y.serviceId=m.value,y.serviceVersion=r.value,await A())});const t="search-pointOfCare-modal",i="delete-pointOfCare",d=I.uuid(),g=fe(),o=D(),l=ve();let s=_(!0),S=_(0),m=_(0),r=_(0),k=_(I.createEmptyDataSource()),y=x(V()),n=_(null);function V(){return{pageNumber:1,sortBy:"pointOfCareName",active:!0,serviceId:null,serviceVersion:null}}function E(){S.value++,window.setTimeout(function(){I.showModalById(t)},5)}async function L(f){y.sortBy=f,await A()}async function B(f){y.pageNumber=f,await A()}async function A(){s.value=!0;let f=await W.associationSearch(y);I.validateResponse(f,null,()=>{k.value=f.data}),s.value=!1}async function T(f){n.value=f}async function N(){if(n.value){s.value=!0;const f=await W.associationRemove(m.value,r.value,n.value.pointOfCareId,n.value.pointOfCareVersion);I.validateResponse(f,o.backoffice.service.pointOfCareRemoved,async()=>{await A()}),s.value=!1}}return(f,M)=>{const Y=u("icon-plus"),Z=u("table-actions"),b=u("ccolumn"),O=u("table-action-delete"),z=u("ctable"),ee=u("container-wrapper"),le=u("confirm-delete-modal");return w(),K(X,null,[a(ee,null,{default:v(()=>[a(Z,{title:f._lang.common.tableActionTitle},{default:v(()=>[c.value?(w(),K("button",{key:0,class:"btn btn-primary",type:"button",id:e(d),onClick:E},[a(Y,{color:"#FFF"}),ye(" "+Ve(f._lang.common.addServicePoint),1)],8,Ne)):h("",!0)]),_:1},8,["title"]),a(z,{onSort:L,onChangePage:B,data:e(k),checkbox:!1,loading:e(s),defaultSort:"pointOfCareCode",checkboxField:"code"},{columns:v(()=>[a(b,{name:f._lang.label.code,field:"pointOfCareCode",sortable:!0},null,8,["name"]),a(b,{name:f._lang.label.channelTypeId,field:"pointOfCareType",sortField:"pointOfCareTypeId",sortable:!0},null,8,["name"]),a(b,{name:f._lang.label.abreviation,field:"pointOfCareAbreviation",sortField:"pointOfCareAbreviation",sortable:!0},null,8,["name"]),a(b,{name:f._lang.label.name,field:"pointOfCareName",sortable:!0},null,8,["name"]),a(b,{name:f._lang.label.organizationHost,field:"pointOfCareOrganization",sortField:"pointOfCareOrganizationId",sortable:!0},null,8,["name"])]),actions:v(P=>[a(O,{id:i,onClick:ne=>T(P.item)},null,8,["onClick"])]),_:1},8,["data","loading"])]),_:1}),e(s)?h("",!0):(w(),$(he,{key:e(S),serviceId:e(m),serviceVersion:e(r),onApply:A},null,8,["serviceId","serviceVersion"])),a(le,{id:i,title:f._lang.backoffice.service.pointOfCareDeleteTitle,message:f._lang.backoffice.service.pointOfCareDeleteQuestion,action:N},null,8,["title","message"])],64)}}},ol={__name:"form",props:{formModel:{Object,required:!0},loading:{type:Boolean,required:!0},validateForm:{type:Boolean,required:!0},disabled:{type:Boolean,required:!0},isExternalEdit:{type:Boolean,required:!0},selectedLang:{type:[Number,String],required:!0},rules:{type:Object,required:!0},vuelidate:{Object,default:null},progressValue:{type:Number,default:0},showProgress:{type:Boolean,default:!0}},emits:["update:formModel"],setup(C,{emit:c}){const t=C,i=F({get(){return t.formModel},set(d){c("update:formModel",d)}});return(d,g)=>{const o=u("tab-content"),l=u("tabs");return w(),$(l,null,{default:v(()=>[a(o,{id:"general",title:d._lang.common.general,active:!0},{default:v(()=>[a(Pe,{modelValue:e(i),"onUpdate:modelValue":g[0]||(g[0]=s=>q(i)?i.value=s:null),disabled:t.disabled,validateForm:t.validateForm,loading:t.loading,selectedLang:t.selectedLang,rules:t.rules,progressValue:t.progressValue,showProgress:t.showProgress},null,8,["modelValue","disabled","validateForm","loading","selectedLang","rules","progressValue","showProgress"])]),_:1},8,["title"]),a(o,{id:"service-points",title:d._lang.backoffice.menu.servicePoints,active:!1,disabled:!1},{default:v(()=>[a(Me)]),_:1},8,["title"])]),_:1})}}};export{ol as _};
