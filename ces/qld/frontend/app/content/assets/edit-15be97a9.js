import{h as A,C as G,q as U,s as v,i,M as g,v as E,K as M,j as m,l as d,r as c,o as O,c as P,w as l,a as o,m as e,z as S}from"./index-60da5de7.js";import{u as I}from"./users-a688be16.js";import{h as V,_ as y}from"./form-ff1bbdf7.js";import{u as K}from"./index.esm-61763a8c.js";import"./helpers-870863ae.js";import{u as N}from"./users-d2569f01.js";import{_ as j}from"./edit-actions-9a09d643.js";import"./index.esm-eed786a6.js";import"./cancel-confirm-20b5837b.js";import"./settings-bac024a5.js";const Z={__name:"edit",setup(D){const h=A(),C=G();U();const T=v(V.formRules()),p=N(),f=i(g.havePermission(E.permissions.users.createEdit)),k=i(g.havePermission(E.permissions.users.delete));let t=i(!1),u=i(0),s=v({name:null,email:null,profiles:[],active:!0});const _=K(T,s);M(async()=>{u.value=m.decodeId(C.params.userId),u.value?await R():h.push({name:d.router.BACKOFFICE_SETTINGS_USERS_PAGE.name})});async function R(){t.value=!0;const a=await I.getById(u.value);m.validateResponse(a,null,()=>{Object.assign(s,a.data),p.setFormToCompare(m.cloneObject(a.data))}),t.value=!1}return(a,n)=>{const b=c("breadcrumb-item"),B=c("breadcrumb"),F=c("card"),w=c("page");return O(),P(w,{title:a._lang.backoffice.settings.users.update.pageTitle},{breadcrumb:l(()=>[o(B,{"has-home":!0},{default:l(()=>[o(b,{label:a._lang.backoffice.settings.users.pageTitle,"router-path":e(d).router.BACKOFFICE_SETTINGS_USERS_PAGE.path},null,8,["label","router-path"]),o(b,{label:a._lang.backoffice.settings.users.update.pageTitle},null,8,["label"])]),_:1})]),actions:l(()=>[o(j,{loading:e(t),"onUpdate:loading":n[0]||(n[0]=r=>S(t)?t.value=r:t=r),service:e(I),itemId:e(u),formModel:e(s),vuelidate:e(_),store:e(p),resource:a._lang.backoffice.settings.users,"back-route":e(d).router.BACKOFFICE_SETTINGS_USERS_PAGE.name,showLangSelector:!1,canEdit:f.value,canDelete:k.value},null,8,["loading","service","itemId","formModel","vuelidate","store","resource","back-route","canEdit","canDelete"])]),default:l(()=>[o(F,{shadow:!0},{body:l(()=>[o(y,{modelValue:e(s),"onUpdate:modelValue":n[1]||(n[1]=r=>S(s)?s.value=r:s=r),required:!0,vuelidator:e(_),disabled:!f.value},null,8,["modelValue","vuelidator","disabled"])]),_:1})]),_:1},8,["title"])}}};export{Z as default};
