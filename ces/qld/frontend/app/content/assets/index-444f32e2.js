import{_ as q}from"./delete-confirm-815e8228.js";import{h as W,q as $,i as u,v as d,s as E,j as b,b as H,r as o,o as J,c as Q,w as c,a as t,m as a,S as X,U as Z,z as _,l as v}from"./index-d8a56bcc.js";import{r as w}from"./refusal-types-f5650f50.js";const te={__name:"index",setup(x){const y=W();$();let i=u(!1),m=u([]),p=u([]),f=u(d.tableSelectedState.none),n=E(I()),T=u(b.createEmptyDataSource());E({});let g=u(0);function I(){return{pageNumber:1,sortBy:"refusalTypeId",refusalTypeId:null,refusalTypeIds:[],caeDesignation:null}}H(async()=>{await r()});function A(e){y.push({name:v.router.BACKOFFICE_SETTINGS_EDIT_REFUSAL_TYPES_PAGE.name,params:{refusalTypeId:b.encodeId(e.refusalTypeId)}})}async function U(){Object.assign(n,I()),await C()}async function C(){n.pageNumber=1,await r()}function B(){y.push({name:v.router.BACKOFFICE_SETTINGS_CREATE_REFUSAL_TYPES_PAGE.name})}async function F(e){n.sortBy=e,await r()}async function N(e){n.pageNumber=e,await r()}async function r(){i.value=!0,n.refusalTypeId?n.refusalTypeIds=[n.refusalTypeId]:n.refusalTypeIds=[];let e=await w.search(n);b.validateResponse(e,null,()=>{T.value=e.data}),i.value=!1}async function V(e){g.value=e.refusalTypeId}async function P(){b.closeModalById("confirm-delete"),await r()}return(e,s)=>{const R=o("breadcrumb-item"),h=o("breadcrumb"),z=o("cbutton"),S=o("form-field"),D=o("row"),G=o("cfilter"),k=o("ccolumn"),M=o("table-action-edit"),L=o("table-action-delete"),O=o("ctable"),j=o("card"),K=o("page");return J(),Q(K,{title:e._lang.backoffice.settings.refusalType.pageTitle},{breadcrumb:c(()=>[t(h,{"has-home":!0},{default:c(()=>[t(R,{label:e._lang.backoffice.settings.refusalType.breadcrumbTitle},null,8,["label"])]),_:1})]),actions:c(()=>[t(z,{class:"col-12 col-sm-auto",type:a(d).buttonType.secondary,size:a(d).buttonSize.medium,title:e._lang.common.toAdd,icon:X,onClick:B},null,8,["type","size","title"])]),default:c(()=>[t(j,{shadow:!0},{body:c(()=>[t(G,{title:e._lang.common.filter,disabled:a(i),"clear-click":U,"apply-click":C,loading:a(i),collapsed:!0},{default:c(()=>[t(D,null,{default:c(()=>[t(S,{id:"refusalTypeId",modelValue:a(n).refusalTypeId,"onUpdate:modelValue":s[0]||(s[0]=l=>a(n).refusalTypeId=l),class:"mb-3 col-6",label:e._lang.label.id,type:a(d).inputs.number,maxlength:45,disabled:a(i)},null,8,["modelValue","label","type","disabled"]),t(S,{id:"refusalTypeName",modelValue:a(n).name,"onUpdate:modelValue":s[1]||(s[1]=l=>a(n).name=l),class:"mb-3 col-6",label:e._lang.label.name,type:a(d).inputs.text,maxlength:45,disabled:a(i)},null,8,["modelValue","label","type","disabled"])]),_:1})]),_:1},8,["title","disabled","loading"]),t(Z,null,{default:c(()=>[t(O,{onSort:F,onChangePage:N,selectedItems:a(m),"onUpdate:selectedItems":s[2]||(s[2]=l=>_(m)?m.value=l:m=l),unselectedItems:a(p),"onUpdate:unselectedItems":s[3]||(s[3]=l=>_(p)?p.value=l:p=l),selectedState:a(f),"onUpdate:selectedState":s[4]||(s[4]=l=>_(f)?f.value=l:f=l),data:a(T),checkbox:!1,loading:a(i),defaultSort:"refusalTypeId"},{columns:c(()=>[t(k,{name:e._lang.label.id,field:"refusalTypeId",sortable:!0},null,8,["name"]),t(k,{name:e._lang.label.name,field:"name",sortable:!0},null,8,["name"])]),actions:c(l=>[t(M,{onClick:Y=>A(l.item)},null,8,["onClick"]),t(L,{onClick:Y=>V(l.item)},null,8,["onClick"])]),_:1},8,["selectedItems","unselectedItems","selectedState","data","loading"])]),_:1})]),_:1}),t(q,{"item-id":a(g),resource:e._lang.backoffice.settings.refusalType,action:P,service:a(w)},null,8,["item-id","resource","service"])]),_:1},8,["title"])}}};export{te as default};
