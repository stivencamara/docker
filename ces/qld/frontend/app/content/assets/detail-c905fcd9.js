import{_ as B}from"./general-470e5cd3.js";import{s as D,L as M,z as k,M as N,r as c,a as E,i as P,G as U,N as y,J as G,u as p,x as u,b as f,o as K,l as S,w as i,e as r,g as e,D as I}from"./index-5b4ebf84.js";import{d as L}from"./helpers-138c884f.js";import{u as x}from"./document-b8bf3d40.js";import{d as g}from"./document-07880ad5.js";import"./helpers-4796f1a9.js";import{_ as J}from"./detail-actions-06232284.js";import"./index.esm-65642301.js";import"./refusal-5d03193c.js";import"./index.esm-85573352.js";import"./generic-74ec479d.js";import"./helpers-56107f9e.js";import"./helpers-991a1d67.js";import"./helpers-28a0442c.js";import"./helpers-730fb974.js";import"./helpers-c8652456.js";import"./settings-fd6ffbf1.js";const ue={__name:"detail",setup(j){const O=D(),_=M();k();const w=N(),b=x();let o=c(!0),s=E(L.newForm()),a=c(P.language.pt),F=E(L.formRules()),m=c(0),n=c(0);const R=U(()=>_.path.toLowerCase().indexOf("tarefas")>-1);async function T(){o.value=!0;const t=await g.getById(m.value,n.value);p.validateResponse(t,null,()=>{Object.assign(s,t.data),w.emit(u.emitter.OBJECT_LOADED,t.data)}),o.value=!1}async function v(){o.value=!0;const t=await g.getLists(a.value,n.value);p.validateResponse(t,null,()=>{b.setLists(t.data)}),o.value=!1}return y(()=>a.value,()=>{v()}),G(async()=>{m.value=p.decodeId(_.params.documentId),n.value=p.decodeId(_.params.documentVersion),!m.value||!n.value?O.push({name:u.router.BACKOFFICE_DOCUMENT_PAGE.name}):(await v(),await T())}),(t,d)=>{const C=f("breadcrumb-item"),V=f("breadcrumb"),h=f("card"),A=f("page");return K(),S(A,{title:t._lang.backoffice.document.detailPageTitle},{breadcrumb:i(()=>[r(V,{"has-home":!0},{default:i(()=>[r(C,{label:t._lang.backoffice.document.breadcrumbTitle,"router-path":e(u).router.BACKOFFICE_DOCUMENT_PAGE.path},null,8,["label","router-path"]),r(C,{label:t._lang.backoffice.document.detailPageTitle},null,8,["label"])]),_:1})]),actions:i(()=>[r(J,{loading:e(o),selectedLang:e(a),"onUpdate:selectedLang":d[0]||(d[0]=l=>I(a)?a.value=l:a=l),service:e(g),backRoute:e(u).router.BACKOFFICE_DOCUMENT_PAGE.name,editRoute:e(u).router.BACKOFFICE_EDIT_DOCUMENT_PAGE.name,itemIdField:"documentId",itemVersionField:"documentVersion",itemId:e(m),itemVersion:e(n),formModel:e(s),"show-record-state-actions":e(R),store:e(b)},null,8,["loading","selectedLang","service","backRoute","editRoute","itemId","itemVersion","formModel","show-record-state-actions","store"])]),default:i(()=>[r(h,{shadow:!0},{body:i(()=>[r(B,{modelValue:e(s),"onUpdate:modelValue":d[1]||(d[1]=l=>I(s)?s.value=l:s=l),disabled:!0,loading:e(o),selectedLang:e(a),validateForm:!0,rules:e(F)},null,8,["modelValue","loading","selectedLang","rules"])]),_:1})]),_:1},8,["title"])}}};export{ue as default};
