import{_ as L}from"./delete-confirm-b74b5e23.js";import{h as W,q as $,i as d,v as _,s as A,j as f,b as x,r as a,o as H,c as J,w as i,a as o,m as t,S as Q,U as X,z as b,l as k}from"./index-a3ba1ed7.js";import{e as S}from"./economic-activity-8899a8dd.js";import"./helpers-4d6c1969.js";import"./index.esm-d7202dd3.js";const ce={__name:"index",setup(Z){const y=W();$();let s=d(!1),r=d([]),u=d([]),p=d(_.tableSelectedState.none),c=A(v()),g=d(f.createEmptyDataSource());A({});let I=d(0);function v(){return{pageNumber:1,sortBy:"economicActivityId",economicActivityId:null,economicActivityIds:[],caeDesignation:null}}x(async()=>{await m()});function T(e){y.push({name:k.router.BACKOFFICE_SETTINGS_EDIT_ECONOMICACTIVITY_PAGE.name,params:{economicActivityId:f.encodeId(e.economicActivityId)}})}async function w(){Object.assign(c,v()),await C()}async function C(){c.pageNumber=1,await m()}function E(){y.push({name:k.router.BACKOFFICE_SETTINGS_CREATE_ECONOMICACTIVITY_PAGE.name})}async function D(e){c.sortBy=e,await m()}async function N(e){c.pageNumber=e,await m()}async function m(){s.value=!0,c.economicActivityId?c.economicActivityIds=[c.economicActivityId]:c.economicActivityIds=[];let e=await S.search(c);f.validateResponse(e,null,()=>{g.value=e.data}),s.value=!1}async function B(e){I.value=e.economicActivityId}async function O(){f.closeModalById("confirm-delete"),await m()}return(e,l)=>{const h=a("breadcrumb-item"),M=a("breadcrumb"),V=a("cbutton"),F=a("form-field"),U=a("row"),z=a("cfilter"),G=a("ccolumn"),P=a("table-action-edit"),R=a("table-action-delete"),j=a("ctable"),K=a("card"),Y=a("page");return H(),J(Y,{title:e._lang.backoffice.settings.economicActivity.pageTitle},{breadcrumb:i(()=>[o(M,{"has-home":!0},{default:i(()=>[o(h,{label:e._lang.backoffice.settings.economicActivity.breadcrumbTitle},null,8,["label"])]),_:1})]),actions:i(()=>[o(V,{class:"col-12 col-sm-auto",type:t(_).buttonType.secondary,size:t(_).buttonSize.medium,title:e._lang.common.toAdd,icon:Q,onClick:E},null,8,["type","size","title"])]),default:i(()=>[o(K,{shadow:!0},{body:i(()=>[o(z,{title:e._lang.common.filter,disabled:t(s),"clear-click":w,"apply-click":C,loading:t(s),collapsed:!0},{default:i(()=>[o(U,null,{default:i(()=>[o(F,{id:"caeDesignation",modelValue:t(c).caeDesignation,"onUpdate:modelValue":l[0]||(l[0]=n=>t(c).caeDesignation=n),class:"mb-3 col-12",label:e._lang.label.designation,type:t(_).inputs.text,maxlength:45,disabled:t(s)},null,8,["modelValue","label","type","disabled"])]),_:1})]),_:1},8,["title","disabled","loading"]),o(X,null,{default:i(()=>[o(j,{onSort:D,onChangePage:N,selectedItems:t(r),"onUpdate:selectedItems":l[1]||(l[1]=n=>b(r)?r.value=n:r=n),unselectedItems:t(u),"onUpdate:unselectedItems":l[2]||(l[2]=n=>b(u)?u.value=n:u=n),selectedState:t(p),"onUpdate:selectedState":l[3]||(l[3]=n=>b(p)?p.value=n:p=n),data:t(g),checkbox:!1,loading:t(s),defaultSort:"economicActivityId"},{columns:i(()=>[o(G,{name:e._lang.label.designation,field:"caeDesignation",sortable:!0},null,8,["name"])]),actions:i(n=>[o(P,{onClick:q=>T(n.item)},null,8,["onClick"]),o(R,{onClick:q=>B(n.item)},null,8,["onClick"])]),_:1},8,["selectedItems","unselectedItems","selectedState","data","loading"])]),_:1})]),_:1}),o(L,{"item-id":t(I),resource:e._lang.backoffice.settings.economicActivity,action:O,service:t(S)},null,8,["item-id","resource","service"])]),_:1},8,["title"])}}};export{ce as default};
