import{B as w,h as A,C as G,q as L,s as E,i as p,M as I,v as h,K as M,j as f,l as v,r as c,o as V,c as y,w as i,a as t,m as e,z as C}from"./index-a3ba1ed7.js";import{p as T}from"./profiles-4fa015ae.js";import{h as K,p as N}from"./helpers-2ff8860c.js";import{u as j}from"./index.esm-9dd2f6da.js";import"./helpers-4d6c1969.js";import{_ as D}from"./edit-actions-e3b815e6.js";import"./index.esm-d7202dd3.js";import"./cancel-confirm-f95c31ca.js";import"./settings-4e9392c0.js";const q=w("ProfilesStore",{state:()=>({progress:0,formToCompare:null}),getters:{},actions:{setProgress(n){this.progress=n},setFormToCompare(n){this.formToCompare=n}}}),$={__name:"edit",setup(n){const F=A(),S=G();L();const P=E(K.formRules()),_=q(),d=p(I.havePermission(h.permissions.profiles.createEdit)),u=p(I.havePermission(h.permissions.profiles.delete));var s=p(!1);let r=p(0);var o=E({name:"",permissions:[]});const g=j(P,o);M(async()=>{r.value=f.decodeId(S.params.profileId),r.value?(d.value=u.value&&r.value!=1,u.value=u.value&&r.value!=1,await k()):F.push({name:v.router.BACKOFFICE_SETTINGS_PROFILE_PAGE.name})});async function k(){s.value=!0;const a=await T.getById(r.value);f.validateResponse(a,null,()=>{Object.assign(o,a.data),_.setFormToCompare(f.cloneObject(a.data))}),s.value=!1}return(a,m)=>{const b=c("breadcrumb-item"),B=c("breadcrumb"),O=c("card"),R=c("page");return V(),y(R,{title:a._lang.backoffice.settings.profiles.update.pageTitle},{breadcrumb:i(()=>[t(B,{"has-home":!0},{default:i(()=>[t(b,{label:a._lang.backoffice.settings.profiles.pageTitle,"router-path":e(v).router.BACKOFFICE_SETTINGS_PROFILE_PAGE.path},null,8,["label","router-path"]),t(b,{label:a._lang.backoffice.settings.profiles.update.pageTitle},null,8,["label"])]),_:1})]),actions:i(()=>[t(D,{loading:e(s),"onUpdate:loading":m[0]||(m[0]=l=>C(s)?s.value=l:s=l),service:e(T),itemId:e(r),formModel:e(o),vuelidate:e(g),store:e(_),resource:a._lang.backoffice.settings.profiles,"back-route":e(v).router.BACKOFFICE_SETTINGS_PROFILE_PAGE.name,showLangSelector:!1,canEdit:d.value,canDelete:u.value},null,8,["loading","service","itemId","formModel","vuelidate","store","resource","back-route","canEdit","canDelete"])]),default:i(()=>[t(O,{shadow:!0},{body:i(()=>[t(N,{modelValue:e(o),"onUpdate:modelValue":m[1]||(m[1]=l=>C(o)?o.value=l:o=l),required:!0,vuelidator:e(g),disabled:!d.value},null,8,["modelValue","vuelidator","disabled"])]),_:1})]),_:1},8,["title"])}}};export{$ as default};
