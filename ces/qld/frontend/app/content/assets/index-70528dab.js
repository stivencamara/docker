import{y as J,G as re,o as A,c as h,t as ie,g as e,r as s,n as Q,u as o,b as m,l as N,w as g,F as W,j as de,H as ce,I as Z,z as x,s as ee,a as te,i as c,J as ae,e as n,D as B,K as le,x as C}from"./index-5b4ebf84.js";import{b as oe}from"./helpers-4796f1a9.js";import"./index.esm-85573352.js";const D={cards:()=>J.get("/task/cards"),search:u=>J.post("/task/search",u),getLists:u=>J.get(`/task/lists/${u}`)},ne={__name:"custom-label",props:{options:{Array,default:[]},value:{Number,default:1}},setup(u){const T=u,k=re(()=>{const f=T.options.find(d=>d.value===T.value);return f?f.label:null});return(f,d)=>(A(),h("span",null,ie(e(k)),1))}},ue={__name:"cards",props:{filter:{type:Function,required:!0},selected:{type:Object}},setup(u,{expose:T}){const k=u;let f=s(!0),d=s([]),l=s(null);Q(async()=>{f.value=!0;const _=await D.cards();l.value=k.selected,o.validateResponse(_,null,()=>{d.value=_.data}),f.value=!1});const b=_=>{l.value=_,k.filter(_)};return T({clearSelection:()=>{l.value=null}}),(_,E)=>{const O=m("filter-card"),L=m("filter-cards");return A(),N(L,null,{default:g(()=>[(A(!0),h(W,null,de(e(d),S=>(A(),N(O,{label:_._lang.enums.recordStateType[S.recordStateId],counter:S.total,active:S.recordStateId===e(l).recordStateId,loading:e(f),onClick:V=>b(S)},null,8,["label","counter","active","loading","onClick"]))),256))]),_:1})}}},se=ce("TasksStore",{state:()=>({stateTypeList:[],objectTypeList:[],organizationList:[],formToCompare:null}),getters:{getAll:u=>({stateTypeList:u.stateTypeList,objectTypeList:u.objectTypeList,organizationList:u.organizationList})},actions:{setLists(u){this.stateTypeList=u.stateTypeList,this.objectTypeList=u.objectTypeList,this.organizationList=u.organizationList},setFormToCompare(u){this.formToCompare=u}}}),pe={__name:"in-edition",setup(u){const T=Z(),k=se();x();const f=ee(),d=te(R());let l=s(!1),b=s([]),v=s([]),_=s(c.tableSelectedState.none),E=s(o.createEmptyDataSource()),O=s([]),L=s([]),S=s([]),V=s([]),z=s(0),U=s({recordStateId:c.recordStateType.draft}),P=s(null);function R(){return{pageNumber:0,sortBy:"Name",objectTypeIds:[],organization:null,recordStateTypeIds:[],name:null}}const H=async t=>{d.sortBy=t,await F()},G=()=>{Object.assign(d,R())},M=async(t=!0)=>{P.value.clearSelection(),G(),t&&await w()},w=async()=>{await F()},F=async()=>{l.value=!0;const t=await D.search(d);o.validateResponse(t,null,()=>{E.value=t.data}),l.value=!1},$=async t=>{U.value=t,G();const r=L.value.find(y=>t.recordStateId===y.value);d.recordStateTypeIds.push(r.value),z.value++,await F()},a=async t=>{d.pageNumber=t,await F()};ae(async()=>{l.value=!0;const t=await D.getLists(T.getLanguage);o.validateResponse(t,null,()=>{k.setLists(t.data),O.value=t.data.organizationList,L.value=t.data.stateTypeList,S.value=t.data.objectTypeList,V.value=o.concatItemsBadge(L.value,oe.recordStateTypeBadgeOptions)}),l.value=!1}),Q(async()=>{d.recordStateTypeIds.push(c.recordStateType.draft),await F()});function i(t){let r=null,y=null;switch(t.objectTypeId){case 2:r=C.router.BACKOFFICE_TASKS_DETAIL_ENTITY_PAGE.name,y={organizationId:o.encodeId(t.id.id),organizationVersion:o.encodeId(t.id.version)};break;case 3:r=C.router.BACKOFFICE_TASKS_DETAIL_SERVICE_PAGE.name,y={serviceId:o.encodeId(t.id.id),serviceVersion:o.encodeId(t.id.version)};break;case 4:r=C.router.BACKOFFICE_TASKS_DETAIL_POINT_OF_CARE_PAGE.name,y={pointOfCareId:o.encodeId(t.id.id),pointOfCareVersion:o.encodeId(t.id.version)};break;case 5:r=C.router.BACKOFFICE_TASKS_DETAIL_DOCUMENT_PAGE.name,y={documentId:o.encodeId(t.id.id),documentVersion:o.encodeId(t.id.version)};break;case 6:r=C.router.BACKOFFICE_DETAIL_LOCATION_PAGE.name,y={locationId:o.encodeId(t.id.id),locationVersion:o.encodeId(t.id.version)};break}f.push({name:r,params:y})}return(t,r)=>{const y=m("form-field"),j=m("row"),Y=m("cfilter"),K=m("ccolumn"),q=m("table-action-detail"),p=m("ctable"),X=m("container-wrapper");return A(),h(W,null,[n(ue,{filter:$,ref_key:"cardsRef",ref:P,selected:e(U)},null,8,["selected"]),(A(),N(Y,{title:t._lang.common.filter,disabled:e(l),"clear-click":M,"apply-click":w,loading:e(l),class:"mt-30",key:e(z)},{default:g(()=>[n(j,null,{default:g(()=>[n(y,{id:"name",class:"mb-3 col-12 col-md-6",modelValue:d.name,"onUpdate:modelValue":r[0]||(r[0]=I=>d.name=I),label:t._lang.label.name,type:e(c).inputs.text,maxlength:45,disabled:e(l)},null,8,["modelValue","label","type","disabled"]),n(y,{id:"objectTypeIds",class:"mb-3 col-12 col-md-6",modelValue:d.objectTypeIds,"onUpdate:modelValue":r[1]||(r[1]=I=>d.objectTypeIds=I),label:t._lang.label.objectTypeId,type:e(c).inputs.multiselect,options:e(S),disabled:e(l),mode:e(c).multiselectMode.tags},null,8,["modelValue","label","type","options","disabled","mode"])]),_:1}),n(j,null,{default:g(()=>[n(y,{id:"organization",class:"mb-3 col-12",modelValue:d.organization,"onUpdate:modelValue":r[2]||(r[2]=I=>d.organization=I),label:t._lang.label.parentOrganization,type:e(c).inputs.multiselect,options:e(O),disabled:e(l),valueProp:e(c).multiselectValueProp.value3},null,8,["modelValue","label","type","options","disabled","valueProp"])]),_:1})]),_:1},8,["title","disabled","loading"])),n(X,null,{default:g(()=>[n(p,{onSort:H,onChangePage:a,selectedItems:e(b),"onUpdate:selectedItems":r[3]||(r[3]=I=>B(b)?b.value=I:b=I),unselectedItems:e(v),"onUpdate:unselectedItems":r[4]||(r[4]=I=>B(v)?v.value=I:v=I),selectedState:e(_),"onUpdate:selectedState":r[5]||(r[5]=I=>B(_)?_.value=I:_=I),data:e(E),checkbox:!1,loading:e(l),defaultSort:"Name",checkboxField:"Name"},{columns:g(()=>[n(K,{name:t._lang.label.objectTypeId,field:"objectTypeId",align:e(c).columnAlign.center,custom:ne,options:e(S),sortable:!0},null,8,["name","align","options"]),n(K,{name:t._lang.label.name,field:"name",sortable:!0},null,8,["name"]),n(K,{name:t._lang.label.state,field:"recordStateTypeId",align:e(c).columnAlign.center,custom:le,options:e(V),sortable:!0},null,8,["name","align","options"])]),actions:g(I=>[n(q,{onClick:be=>i(I.item)},null,8,["onClick"])]),_:1},8,["selectedItems","unselectedItems","selectedState","data","loading"])]),_:1})],64)}}},me={__name:"to-approve",setup(u){const T=Z(),k=se(),f=x(),d=ee(),l=te(P());let b=s(!1),v=s([]),_=s([]),E=s(c.tableSelectedState.none),O=s(o.createEmptyDataSource()),L=s([]),S=s([]),V=s([]),z=s([]),U=s(0);function P(){return{pageNumber:0,sortBy:"Name",objectTypeIds:[],organization:null,recordStateTypeIds:[c.recordStateType.approval],name:null}}const R=async a=>{l.sortBy=a,await w()},H=()=>{Object.assign(l,P())},G=async(a=!0)=>{H(),a&&await M()},M=async()=>{await w()},w=async()=>{b.value=!0;const a=await D.search(l);o.validateResponse(a,null,()=>{O.value=a.data}),b.value=!1},F=async a=>{l.pageNumber=a,await w()};ae(async()=>{b.value=!0;const a=await D.getLists(T.getLanguage);o.validateResponse(a,null,()=>{k.setLists(a.data),L.value=a.data.organizationList,S.value=o.convertEnumToArray(f.enums.recordStateType),V.value=a.data.objectTypeList,z.value=o.concatItemsBadge(S.value,oe.recordStateTypeBadgeOptions)}),b.value=!1}),Q(async()=>{await w()});function $(a){let i=null,t=null;switch(a.objectTypeId){case 2:i=C.router.BACKOFFICE_TASKS_DETAIL_ENTITY_PAGE.name,t={organizationId:o.encodeId(a.id.id),organizationVersion:o.encodeId(a.id.version)};break;case 3:i=C.router.BACKOFFICE_TASKS_DETAIL_SERVICE_PAGE.name,t={serviceId:o.encodeId(a.id.id),serviceVersion:o.encodeId(a.id.version)};break;case 4:i=C.router.BACKOFFICE_TASKS_DETAIL_POINT_OF_CARE_PAGE.name,t={pointOfCareId:o.encodeId(a.id.id),pointOfCareVersion:o.encodeId(a.id.version)};break;case 5:i=C.router.BACKOFFICE_TASKS_DETAIL_DOCUMENT_PAGE.name,t={documentId:o.encodeId(a.id.id),documentVersion:o.encodeId(a.id.version)};break;case 6:i=C.router.BACKOFFICE_DETAIL_LOCATION_PAGE.name,t={locationId:o.encodeId(a.id.id),locationVersion:o.encodeId(a.id.version)};break}d.push({name:i,params:t})}return(a,i)=>{const t=m("form-field"),r=m("row"),y=m("cfilter"),j=m("ccolumn"),Y=m("table-action-detail"),K=m("ctable"),q=m("container-wrapper");return A(),h(W,null,[(A(),N(y,{title:a._lang.common.filter,disabled:e(b),"clear-click":G,"apply-click":M,loading:e(b),class:"mt-30",key:e(U)},{default:g(()=>[n(r,null,{default:g(()=>[n(t,{class:"mb-3 col-12 col-md-6",modelValue:l.name,"onUpdate:modelValue":i[0]||(i[0]=p=>l.name=p),label:a._lang.label.name,type:e(c).inputs.text,maxlength:45,disabled:e(b)},null,8,["modelValue","label","type","disabled"]),n(t,{class:"mb-3 col-12 col-md-6",modelValue:l.objectTypeIds,"onUpdate:modelValue":i[1]||(i[1]=p=>l.objectTypeIds=p),label:a._lang.label.objectTypeId,type:e(c).inputs.multiselect,options:e(V),disabled:e(b),mode:e(c).multiselectMode.tags},null,8,["modelValue","label","type","options","disabled","mode"])]),_:1}),n(r,null,{default:g(()=>[n(t,{class:"mb-3 col-12 col-md-6",modelValue:l.organization,"onUpdate:modelValue":i[2]||(i[2]=p=>l.organization=p),label:a._lang.label.parentOrganization,type:e(c).inputs.multiselect,options:e(L),disabled:e(b),valueProp:e(c).multiselectValueProp.value3},null,8,["modelValue","label","type","options","disabled","valueProp"]),n(t,{class:"mb-3 col-12 col-md-6",modelValue:l.recordStateTypeIds,"onUpdate:modelValue":i[3]||(i[3]=p=>l.recordStateTypeIds=p),label:a._lang.label.state,type:e(c).inputs.multiselect,options:e(S),disabled:e(b),mode:e(c).multiselectMode.tags},null,8,["modelValue","label","type","options","disabled","mode"])]),_:1})]),_:1},8,["title","disabled","loading"])),n(q,null,{default:g(()=>[n(K,{onSort:R,onChangePage:F,selectedItems:e(v),"onUpdate:selectedItems":i[4]||(i[4]=p=>B(v)?v.value=p:v=p),unselectedItems:e(_),"onUpdate:unselectedItems":i[5]||(i[5]=p=>B(_)?_.value=p:_=p),selectedState:e(E),"onUpdate:selectedState":i[6]||(i[6]=p=>B(E)?E.value=p:E=p),data:e(O),checkbox:!1,loading:e(b),defaultSort:"Name",checkboxField:"Name"},{columns:g(()=>[n(j,{name:a._lang.label.objectTypeId,field:"objectTypeId",align:e(c).columnAlign.center,custom:ne,options:e(V),sortable:!0},null,8,["name","align","options"]),n(j,{name:a._lang.label.name,field:"name",sortable:!0},null,8,["name"]),n(j,{name:a._lang.label.state,field:"recordStateTypeId",align:e(c).columnAlign.center,custom:le,options:e(z),sortable:!0},null,8,["name","align","options"])]),actions:g(p=>[n(Y,{onClick:X=>$(p.item)},null,8,["onClick"])]),_:1},8,["selectedItems","unselectedItems","selectedState","data","loading"])]),_:1})],64)}}},fe={__name:"index",setup(u){return(T,k)=>{const f=m("tab-content"),d=m("tabs"),l=m("page");return A(),N(l,{title:T._lang.backoffice.tasks.pageTitle},{default:g(()=>[n(d,null,{default:g(()=>[n(f,{id:"edicao",title:T._lang.backoffice.tasks.inEdition,active:!0,"always-refresh":!0},{default:g(()=>[n(pe)]),_:1},8,["title"]),n(f,{id:"aprovacao",title:T._lang.backoffice.tasks.toApprove,icon:e(c).tabIcons.plus,"always-refresh":!0},{default:g(()=>[n(me)]),_:1},8,["title","icon"])]),_:1})]),_:1},8,["title"])}}};export{fe as default};
