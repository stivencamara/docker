import{s as ee,z as ae,I as te,r as p,i,a as B,u,J as le,n as oe,b as d,o as V,l as T,w as r,e as l,g as e,S as ne,C as ie,V as se,D as S,K as de,B as U,x as k}from"./index-5b4ebf84.js";import{p as z}from"./point-of-care-11ca6bee.js";import{u as re}from"./point-of-care-640dbae0.js";import{p as ue}from"./helpers-56107f9e.js";import{b as ce}from"./helpers-4796f1a9.js";import"./index.esm-85573352.js";const Ie={__name:"index",setup(me){const C=ee(),v=ae(),b=re(),H=te();let s=p(!1),f=p([]),g=p([]),y=p(i.tableSelectedState.none),n=B(E()),_=p([]),A=p([]),F=p(u.createEmptyDataSource());B({});function E(){return{pageNumber:1,sortBy:"Code",code:null,channelTypeIds:null,abreviation:null,name:null,organization:null,organizationHost:null,recordStateIds:null,active:!0}}le(async()=>{s.value=!0,_.value=u.convertEnumToArray(v.enums.recordStateType);const a=await z.getLists(H.getLanguage);u.validateResponse(a,null,()=>{b.setLists(a.data),_.value=u.convertEnumToArray(v.enums.recordStateType),A.value=u.concatItemsBadge(_.value,ce.recordStateTypeBadgeOptions)}),s.value=!1}),oe(async()=>{await I()});function L(a){C.push({name:k.router.BACKOFFICE_EDIT_POINT_OF_CARE_PAGE.name,params:{pointOfCareId:u.encodeId(a.pointOfCareId),pointOfCareVersion:u.encodeId(a.pointOfCareVersion)}})}function N(a){C.push({name:k.router.BACKOFFICE_DETAIL_POINT_OF_CARE_PAGE.name,params:{pointOfCareId:u.encodeId(a.pointOfCareId),pointOfCareVersion:u.encodeId(a.pointOfCareVersion)}})}async function R(){Object.assign(n,E()),await P()}async function P(){n.pageNumber=1,await I()}async function h(){s.value=!0;const a=await z.create(ue.newForm());u.validateResponse(a,null,()=>{const o=u.encodeId(a.data.pointOfCareId),O=u.encodeId(a.data.pointOfCareVersion);C.push({name:k.router.BACKOFFICE_EDIT_POINT_OF_CARE_PAGE.name,params:{pointOfCareId:o,pointOfCareVersion:O}})}),s.value=!1}async function D(a){n.sortBy=a,await I()}async function M(a){n.pageNumber=a,await I()}async function I(){s.value=!0;let a=await z.search(n);u.validateResponse(a,null,()=>{F.value=a.data}),s.value=!1}return(a,o)=>{const O=d("breadcrumb-item"),K=d("breadcrumb"),G=d("cbutton"),c=d("form-field"),w=d("row"),$=d("cfilter"),j=d("icon-import"),J=d("cbutton-options"),W=d("table-actions"),m=d("ccolumn"),q=d("table-action-edit"),Q=d("table-action-detail"),X=d("ctable"),Y=d("card"),Z=d("page");return V(),T(Z,{title:a._lang.backoffice.pointOfCare.pageTitle},{breadcrumb:r(()=>[l(K,{"has-home":!0},{default:r(()=>[l(O,{label:a._lang.backoffice.pointOfCare.breadcrumbTitle},null,8,["label"])]),_:1})]),actions:r(()=>[l(G,{class:"col-12 col-sm-auto",type:e(i).buttonType.secondary,size:e(i).buttonSize.medium,title:a._lang.common.toAdd,icon:ne,onClick:h},null,8,["type","size","title"])]),default:r(()=>[l(Y,{shadow:!0},{body:r(()=>[l($,{title:a._lang.common.filter,disabled:e(s),"clear-click":R,"apply-click":P,loading:e(s),collapsed:!0},{default:r(()=>[l(w,null,{default:r(()=>[l(c,{id:"code",modelValue:e(n).code,"onUpdate:modelValue":o[0]||(o[0]=t=>e(n).code=t),class:"mb-3 col-12 col-md-6 col-lg-4",label:a._lang.label.code,type:e(i).inputs.text,maxlength:45,disabled:e(s)},null,8,["modelValue","label","type","disabled"]),l(c,{id:"channelTypeIds",class:"mb-3 col-12 col-md-6 col-lg-4",modelValue:e(n).channelTypeIds,"onUpdate:modelValue":o[1]||(o[1]=t=>e(n).channelTypeIds=t),label:a._lang.label.channelTypeId,type:e(i).inputs.multiselect,options:e(b).channelTypeList,disabled:e(s),mode:e(i).multiselectMode.tags},null,8,["modelValue","label","type","options","disabled","mode"]),l(c,{id:"abreviation",class:"mb-3 col-12 col-lg-4",modelValue:e(n).abreviation,"onUpdate:modelValue":o[2]||(o[2]=t=>e(n).abreviation=t),label:a._lang.label.abreviation,type:e(i).inputs.text,maxlength:16,disabled:e(s)},null,8,["modelValue","label","type","disabled"])]),_:1}),l(w,null,{default:r(()=>[l(c,{id:"name",class:"mb-3 col-12 col-md-6",modelValue:e(n).name,"onUpdate:modelValue":o[3]||(o[3]=t=>e(n).name=t),label:a._lang.label.name,type:e(i).inputs.text,maxlength:45,disabled:e(s)},null,8,["modelValue","label","type","disabled"]),l(c,{id:"organization",class:"mb-3 col-12 col-md-6",modelValue:e(n).organization,"onUpdate:modelValue":o[4]||(o[4]=t=>e(n).organization=t),label:a._lang.label.organizationHost,type:e(i).inputs.multiselect,options:e(b).organizationList,disabled:e(s),valueProp:e(i).multiselectValueProp.value3},null,8,["modelValue","label","type","options","disabled","valueProp"]),l(c,{id:"organizationHost",class:"mb-3 col-12 col-md-6",modelValue:e(n).organizationHost,"onUpdate:modelValue":o[5]||(o[5]=t=>e(n).organizationHost=t),label:a._lang.label.hostOrganization,type:e(i).inputs.multiselect,options:e(b).organizationList,disabled:e(s),valueProp:e(i).multiselectValueProp.value3},null,8,["modelValue","label","type","options","disabled","valueProp"]),l(c,{id:"recordStateIds",class:"mb-3 col-12 col-md-6",modelValue:e(n).recordStateIds,"onUpdate:modelValue":o[6]||(o[6]=t=>e(n).recordStateIds=t),label:a._lang.label.state,type:e(i).inputs.multiselect,options:e(_),disabled:e(s),mode:e(i).multiselectMode.tags},null,8,["modelValue","label","type","options","disabled","mode"]),l(c,{id:"active",class:"mb-3 col-12 col-md-6 col-xl-4",modelValue:e(n).active,"onUpdate:modelValue":o[7]||(o[7]=t=>e(n).active=t),label:a._lang.label.active,type:e(i).inputs.checkbox,disabled:e(s)},null,8,["modelValue","label","type","disabled"])]),_:1})]),_:1},8,["title","disabled","loading"]),l(ie,null,{default:r(()=>[l(W,{title:a._lang.common.tableActionTitle},{default:r(()=>[l(J,{type:e(i).buttonType.secondary},{default:r(()=>[l(se,{title:e(v).common.import},{default:r(()=>[l(j,{color:"#002D74"})]),_:1},8,["title"])]),_:1},8,["type"])]),_:1},8,["title"]),l(X,{onSort:D,onChangePage:M,selectedItems:e(f),"onUpdate:selectedItems":o[8]||(o[8]=t=>S(f)?f.value=t:f=t),unselectedItems:e(g),"onUpdate:unselectedItems":o[9]||(o[9]=t=>S(g)?g.value=t:g=t),selectedState:e(y),"onUpdate:selectedState":o[10]||(o[10]=t=>S(y)?y.value=t:y=t),data:e(F),checkbox:!0,loading:e(s),defaultSort:"pointOfCareId",checkboxField:"code"},{columns:r(()=>[l(m,{name:a._lang.label.code,field:"code",sortable:!0},null,8,["name"]),l(m,{name:a._lang.label.channelTypeId,field:"channelType",sortField:"channelTypeId",sortable:!0},null,8,["name"]),l(m,{name:a._lang.label.abreviation,field:"abreviation",sortable:!0},null,8,["name"]),l(m,{name:a._lang.label.name,field:"name",sortable:!0},null,8,["name"]),l(m,{name:a._lang.label.organizationHost,field:"organization",sortField:"organizationId",sortable:!0},null,8,["name"]),l(m,{name:a._lang.label.hostOrganization,field:"organizationHost",sortField:"organizationHostId",sortable:!0},null,8,["name"]),l(m,{name:a._lang.label.state,field:"recordStateTypeId",sortField:"recordStateTypeId",align:e(i).columnAlign.center,custom:de,options:e(A),sortable:!0},null,8,["name","align","options"])]),actions:r(t=>[t.item.recordStateTypeId===e(i).recordStateType.draft?(V(),T(q,{key:0,onClick:x=>L(t.item)},null,8,["onClick"])):U("",!0),t.item.recordStateTypeId>e(i).recordStateType.draft?(V(),T(Q,{key:1,onClick:x=>N(t.item)},null,8,["onClick"])):U("",!0)]),_:1},8,["selectedItems","unselectedItems","selectedState","data","loading"])]),_:1})]),_:1})]),_:1},8,["title"])}}};export{Ie as default};
