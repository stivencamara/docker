import{_ as B}from"./general-76c6c110.js";import{m as k,N as D,x as M,u as y,r as c,y as C,A as N,I as P,O as U,L as G,n as p,s as u,a as f,b as K,c as S,w as i,d as r,f as e,i as E}from"./index-920dbb37.js";import{d as I}from"./helpers-cd5e71d3.js";import{u as x}from"./document-d7f3e26b.js";import{d as g}from"./document-875ae5ad.js";import"./helpers-4c156364.js";import{_ as j}from"./detail-actions-cf004e7e.js";import"./index.esm-d064d6e3.js";import"./comments-3b769030.js";import"./index.esm-d0811cb6.js";import"./generic-9b68486a.js";import"./helpers-db4b16e6.js";import"./helpers-93ac209f.js";import"./helpers-65b02008.js";import"./helpers-6935922b.js";import"./helpers-952742ca.js";import"./settings-bb7269a2.js";const ue={__name:"detail",setup(H){const O=k(),_=D();M();const L=y(),w=x();let o=c(!0),s=C(I.newForm()),a=c(N.language.pt),F=C(I.formRules()),m=c(0),n=c(0);const A=P(()=>_.path.toLowerCase().indexOf("tarefas")>-1);async function R(){o.value=!0;const t=await g.getById(m.value,n.value);p.validateResponse(t,null,()=>{Object.assign(s,t.data),L.emit(u.emitter.OBJECT_LOADED,t.data)}),o.value=!1}async function b(){o.value=!0;const t=await g.getLists(a.value,n.value);p.validateResponse(t,null,()=>{w.setLists(t.data)}),o.value=!1}return U(()=>a.value,()=>{b()}),G(async()=>{m.value=p.decodeId(_.params.documentId),n.value=p.decodeId(_.params.documentVersion),!m.value||!n.value?O.push({name:u.router.BACKOFFICE_DOCUMENT_PAGE.name}):(await b(),await R())}),(t,d)=>{const v=f("breadcrumb-item"),T=f("breadcrumb"),V=f("card"),h=f("page");return K(),S(h,{title:t._lang.backoffice.document.detailPageTitle},{breadcrumb:i(()=>[r(T,{"has-home":!0},{default:i(()=>[r(v,{label:t._lang.backoffice.document.breadcrumbTitle,"router-path":e(u).router.BACKOFFICE_DOCUMENT_PAGE.path},null,8,["label","router-path"]),r(v,{label:t._lang.backoffice.document.detailPageTitle},null,8,["label"])]),_:1})]),actions:i(()=>[r(j,{loading:e(o),selectedLang:e(a),"onUpdate:selectedLang":d[0]||(d[0]=l=>E(a)?a.value=l:a=l),service:e(g),backRoute:e(u).router.BACKOFFICE_DOCUMENT_PAGE.name,editRoute:e(u).router.BACKOFFICE_EDIT_DOCUMENT_PAGE.name,itemIdField:"documentId",itemVersionField:"documentVersion",itemId:e(m),itemVersion:e(n),formModel:e(s),"show-record-state-actions":e(A)},null,8,["loading","selectedLang","service","backRoute","editRoute","itemId","itemVersion","formModel","show-record-state-actions"])]),default:i(()=>[r(V,{shadow:!0},{body:i(()=>[r(B,{modelValue:e(s),"onUpdate:modelValue":d[1]||(d[1]=l=>E(s)?s.value=l:s=l),disabled:!0,loading:e(o),selectedLang:e(a),validateForm:!0,rules:e(F)},null,8,["modelValue","loading","selectedLang","rules"])]),_:1})]),_:1},8,["title"])}}};export{ue as default};
