import{_ as de,a as ie,b as re}from"./contacts-6a9568fc.js";import{_ as ue,a as ce}from"./address.vue_vue_type_style_index_0_scoped_ab5200bc_lang-84b5de6f.js";import{G as I,b as u,o as F,l as N,w as y,e as a,g as e,D as S,i as _,_ as me,u as V,r as C,N as pe,c as J,d as M,O as ge,P as be,F as W,z as Z,I as fe,a as x,J as ee,n as le,K as ve,L as ye,s as _e,W as Ve,t as Ce,B as G}from"./index-5b4ebf84.js";import{b as w}from"./helpers-4796f1a9.js";import{u as Oe}from"./organization-cd538fe2.js";import{u as Le}from"./index.esm-65642301.js";import{u as ae}from"./point-of-care-640dbae0.js";import{_ as Ie}from"./address-167772ff.js";import{_ as Fe,a as ke}from"./refusal-5d03193c.js";import{r as Be}from"./index.esm-85573352.js";import{_ as Se}from"./generic-74ec479d.js";import{u as we}from"./service-ddb39df3.js";import{p as Q}from"./point-of-care-11ca6bee.js";import{s as K}from"./service-09bdae54.js";import{s as Ne}from"./helpers-28a0442c.js";const Te={__name:"description",props:{modelValue:{type:Object,required:!0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},selectedLang:{type:[String,Number],required:!0},validateForm:{type:Boolean,default:!1},rules:{type:Object,default:{}}},emits:["update:modelValue"],setup(p,{emit:s}){const o=p;Oe(),Le(o.rules,o.modelValue);const t=I({get(){return o.modelValue},set(l){s("update:modelValue",l)}}),i=I(()=>o.selectedLang),c=I({get(){return w.getFieldByLangAndName(t.value,i.value,"description")},set(l){w.setFieldByLangAndName(t.value,i.value,"description",l)}}),g=I({get(){return w.getFieldByLangAndName(t.value,i.value,"preConditions")},set(l){w.setFieldByLangAndName(t.value,i.value,"preConditions",l)}});return I({get(){return w.getFieldByLangAndName(t.value,i.value,"keywords")},set(l){w.setFieldByLangAndName(t.value,i.value,"keywords",l)}}),(l,n)=>{const f=u("form-field"),O=u("accordion");return F(),N(O,{id:"description",title:l._lang.common.description,collapsed:!1,class:"mb-4"},{default:y(()=>[a(f,{id:"description",class:"mb-3 col-12",modelValue:e(c),"onUpdate:modelValue":n[0]||(n[0]=r=>S(c)?c.value=r:null),label:l._lang.label.description,disabled:o.disabled,loading:o.loading,type:e(_).inputs.text,maxlength:255,language:e(i)},null,8,["modelValue","label","disabled","loading","type","language"]),a(f,{id:"preConditions",class:"mb-3 col-12",modelValue:e(g),"onUpdate:modelValue":n[1]||(n[1]=r=>S(g)?g.value=r:null),label:l._lang.label.preConditions,disabled:o.disabled,loading:o.loading,type:e(_).inputs.text,maxlength:255,language:e(i)},null,8,["modelValue","label","disabled","loading","type","language"])]),_:1},8,["title"])}}},Ue={class:"input-group mb-3"},Ae=["aria-describedby"],Ee=["id","disabled"],qe={__name:"address",props:{modelValue:{type:Object,required:!0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},validateForm:{type:Boolean,default:!1},rules:{type:Object,default:{}},vuelidate:{type:Object,default:null}},emits:["update:modelValue"],setup(p,{emit:s}){const o=p,t=ae(),i=V.uuid();let c=C(0),g=C(0);const l=C(!1);C(!1);const n=I({get(){return o.modelValue},set(v){s("update:modelValue",v)}}),f="search-location";function O(v){Object.assign(n.value.address,v),c.value++}function r(){g.value++,window.setTimeout(function(){V.showModalById(f)},5)}return pe(n.value,v=>{v.address.locationId!=null&&(l.value?(v.address.locationId=null,v.address.code=null,l.value=!1):l.value=!0)}),(v,k)=>{const R=u("icon-search"),B=u("accordion");return F(),J(W,null,[a(B,{id:"address-accordion",title:v._lang.backoffice.entities.address,collapsed:!1,class:"mb-4"},{default:y(()=>[M("div",Ue,[ge(M("input",{ref:"locationQuery",id:"location-query",type:"text",class:"form-control",placeholder:"Código do património","aria-label":"placeholder","aria-describedby":e(i),disabled:"","onUpdate:modelValue":k[0]||(k[0]=U=>e(n).address.code=U)},null,8,Ae),[[be,e(n).address.code]]),M("button",{class:"btn btn-primary",type:"button",id:e(i),disabled:o.disabled,onClick:r},[a(R,{color:"#FFF"})],8,Ee)]),(F(),N(Ie,{key:e(c),modelValue:e(n).address,"onUpdate:modelValue":k[1]||(k[1]=U=>e(n).address=U),disabled:o.disabled,rules:o.rules,loading:o.loading,"validate-form":o.validateForm,store:e(t),vuelidate:o.vuelidate},null,8,["modelValue","disabled","rules","loading","validate-form","store","vuelidate"]))]),_:1},8,["title"]),(F(),N(de,{key:e(g),onApply:O}))],64)}}},ze=me(qe,[["__scopeId","data-v-ab5200bc"]]),Re={__name:"service-channel-requirements",props:{modelValue:{type:Object,required:!0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},validateForm:{type:Boolean,default:!1},selectedLang:{type:[String,Number],required:!0},rules:{type:Object,default:{}}},emits:["update:modelValue"],setup(p,{emit:s}){const o=p,t=I({get(){return o.modelValue},set(l){s("update:modelValue",l)}}),i=I(()=>o.selectedLang),c=I({get(){return w.getFieldByLangAndName(t.value,i.value,"openingHours")},set(l){w.setFieldByLangAndName(t.value,i.value,"openingHours",l)}}),g=I({get(){return w.getFieldByLangAndName(t.value,i.value,"attendanceRestrictions")},set(l){w.setFieldByLangAndName(t.value,i.value,"attendanceRestrictions",l)}});return(l,n)=>{const f=u("form-field"),O=u("accordion");return F(),N(O,{id:"attendance-restrictions",title:l._lang.backoffice.pointOfCare.serviceChannelRequirements,collapsed:!1,class:"mb-4"},{default:y(()=>[a(f,{id:"openingHours",class:"mb-3 col-12",modelValue:e(c),"onUpdate:modelValue":n[0]||(n[0]=r=>S(c)?c.value=r:null),label:l._lang.label.openingHours,disabled:o.disabled,loading:o.loading,type:e(_).inputs.textarea,rows:3,language:e(i),maxlength:2e3},null,8,["modelValue","label","disabled","loading","type","language"]),a(f,{id:"attendanceRestrictions",class:"mb-3 col-12",modelValue:e(g),"onUpdate:modelValue":n[1]||(n[1]=r=>S(g)?g.value=r:null),label:l._lang.label.attendanceRestrictions,disabled:o.disabled,loading:o.loading,type:e(_).inputs.textarea,rows:3,language:e(i),maxlength:2e3},null,8,["modelValue","label","disabled","loading","type","language"])]),_:1},8,["title"])}}},$e={__name:"general",props:{modelValue:{type:Object,required:!0},selectedLang:Be,disabled:{Boolean,default:!0},rules:{Boolean,default:!0},validateForm:{Boolean,default:!1},loading:{Object,default:{}},isExternalEdit:{type:Boolean,default:!1},vuelidate:{type:Object,default:null}},setup(p){const s=p,o=ae(),t=I({get(){return s.modelValue},set(g){emit("update:modelValue",g)}}),i=I(()=>s.selectedLang),c=I(()=>s.selectedLang===_.language.en);return(g,l)=>(F(),J(W,null,[a(Fe,{modelValue:e(t),"onUpdate:modelValue":l[0]||(l[0]=n=>S(t)?t.value=n:null),store:e(o)},null,8,["modelValue","store"]),a(e(ue),{modelValue:e(t),"onUpdate:modelValue":l[1]||(l[1]=n=>S(t)?t.value=n:null),disabled:s.disabled,loading:p.loading,selectedLang:s.selectedLang,validateForm:s.validateForm,rules:s.rules,isExternalEdit:s.isExternalEdit},null,8,["modelValue","disabled","loading","selectedLang","validateForm","rules","isExternalEdit"]),a(e(Te),{modelValue:e(t),"onUpdate:modelValue":l[2]||(l[2]=n=>S(t)?t.value=n:null),disabled:s.disabled,loading:p.loading,selectedLang:s.selectedLang,validateForm:s.validateForm,rules:s.rules},null,8,["modelValue","disabled","loading","selectedLang","validateForm","rules"]),a(e(ze),{modelValue:s.modelValue,"onUpdate:modelValue":l[3]||(l[3]=n=>s.modelValue=n),disabled:s.disabled,loading:p.loading||e(c),rules:s.rules,validateForm:s.validateForm,vuelidate:s.vuelidate},null,8,["modelValue","disabled","loading","rules","validateForm","vuelidate"]),a(e(Re),{modelValue:e(t),"onUpdate:modelValue":l[4]||(l[4]=n=>S(t)?t.value=n:null),disabled:s.disabled,loading:p.loading,selectedLang:s.selectedLang},null,8,["modelValue","disabled","loading","selectedLang"]),a(e(re),{modelValue:e(t).contacts,"onUpdate:modelValue":l[5]||(l[5]=n=>e(t).contacts=n),disabled:s.disabled||e(c),modal:ie,store:e(o),loading:p.loading},null,8,["modelValue","disabled","store","loading"]),a(e(ke),{modelValue:e(t),"onUpdate:modelValue":l[6]||(l[6]=n=>S(t)?t.value=n:null),disabled:s.disabled,loading:p.loading,selectedLang:s.selectedLang},null,8,["modelValue","disabled","loading","selectedLang"]),a(Se,{modelValue:e(t),"onUpdate:modelValue":l[7]||(l[7]=n=>S(t)?t.value=n:null),disabled:s.disabled,loading:p.loading,selectedLang:e(i)},null,8,["modelValue","disabled","loading","selectedLang"])],64))}},Me={__name:"search-service-modal",props:{pointOfCareId:{Number,required:!0},pointOfCareVersion:{Number,required:!0}},emits:["apply"],setup(p,{emit:s}){const o=p,t=we(),i="search-service-modal",c=Z(),g=fe();let l=x($()),n=C([]),f=C([]),O=C(V.createEmptyDataSource()),r=C(!1),v=C(!1),k=C(0),R=C("pt"),B=x(U());function U(){return Ne.newForm()}function $(){return{pageNumber:1,sortBy:"Code",code:null,serviceTypeIds:null,serviceCategoryIds:null,businessEventIds:null,lifeEventIds:null,abreviation:null,name:null,organization:null,recordStateIds:[_.recordStateType.published],active:!0}}ee(async()=>{r.value=!0,n.value=V.convertEnumToArray(c.enums.recordStateType);const d=await K.getLists(g.getLanguage);V.validateResponse(d,null,()=>{t.setLists(d.data),n.value=V.convertEnumToArray(c.enums.recordStateType),f.value=V.concatItemsBadge(n.value,w.recordStateTypeBadgeOptions)}),r.value=!1}),le(async()=>{await E()});async function A(d){l.sortBy=d,await E()}async function j(d){l.pageNumber=d,await E()}async function E(){r.value=!0;let d=await K.search(l);V.validateResponse(d,null,()=>{O.value=d.data}),r.value=!1}async function m(){Object.assign(l,$()),await E()}async function X(){await E()}async function P(d){const b=await K.getById(d.serviceId,d.serviceVersion);V.validateResponse(b,null,()=>{Object.assign(B,b.data),v.value=!0}),k.value++}function h(){}async function q(){r.value=!0;const d=await Q.associationCreate(o.pointOfCareId,o.pointOfCareVersion,B.serviceId,B.serviceVersion);V.validateResponse(d,c.backoffice.pointOfCare.serviceAdded,()=>{s("apply")}),r.value=!1}return(d,b)=>{const T=u("form-field"),D=u("row"),H=u("cfilter"),z=u("ccolumn"),te=u("table-action-detail"),oe=u("ctable"),ne=u("container-wrapper"),Y=u("cbutton"),se=u("modal");return F(),N(se,{id:i,title:d._lang.backoffice.service.searchTitle,size:e(_).modalSize.extraLarge,"remove-padding":!0},{body:y(()=>[a(H,{title:d._lang.common.filter,disabled:e(r),"clear-click":m,"apply-click":X,loading:e(r),collapsed:!0},{default:y(()=>[a(D,null,{default:y(()=>[a(T,{id:"code",modelValue:e(l).code,"onUpdate:modelValue":b[0]||(b[0]=L=>e(l).code=L),class:"mb-3 col-12 col-md-6 col-xl-4",label:d._lang.label.code,type:e(_).inputs.text,maxlength:45,disabled:e(r)},null,8,["modelValue","label","type","disabled"]),a(T,{id:"serviceTypeId",class:"mb-3 col-12 col-md-6 col-xl-4",modelValue:e(l).serviceTypeIds,"onUpdate:modelValue":b[1]||(b[1]=L=>e(l).serviceTypeIds=L),label:d._lang.label.serviceTypeId,type:e(_).inputs.multiselect,options:e(t).serviceTypeList,disabled:e(r),mode:e(_).multiselectMode.tags},null,8,["modelValue","label","type","options","disabled","mode"]),a(T,{id:"serviceCategoryId",class:"mb-3 col-12 col-md-6 col-xl-4",modelValue:e(l).serviceCategoryIds,"onUpdate:modelValue":b[2]||(b[2]=L=>e(l).serviceCategoryIds=L),label:d._lang.label.serviceCategoryId,type:e(_).inputs.multiselect,options:e(t).serviceCategoryList,disabled:e(r),mode:e(_).multiselectMode.tags},null,8,["modelValue","label","type","options","disabled","mode"]),a(T,{id:"abreviation",class:"mb-3 col-12 col-md-6",modelValue:e(l).abreviation,"onUpdate:modelValue":b[3]||(b[3]=L=>e(l).abreviation=L),label:d._lang.label.abreviation,type:e(_).inputs.text,maxlength:16,disabled:e(r)},null,8,["modelValue","label","type","disabled"]),a(T,{id:"organizationId",class:"mb-3 col-12 col-md-6",modelValue:e(l).organization,"onUpdate:modelValue":b[4]||(b[4]=L=>e(l).organization=L),label:d._lang.label.organizationHost,type:e(_).inputs.multiselect,options:e(t).organizationList,disabled:e(r),valueProp:e(_).multiselectValueProp.value3},null,8,["modelValue","label","type","options","disabled","valueProp"]),a(T,{id:"name",class:"mb-3 col-12",modelValue:e(l).name,"onUpdate:modelValue":b[5]||(b[5]=L=>e(l).name=L),label:d._lang.label.name,type:e(_).inputs.text,maxlength:45,disabled:e(r)},null,8,["modelValue","label","type","disabled"])]),_:1})]),_:1},8,["title","disabled","loading"]),a(ne,null,{default:y(()=>[a(oe,{onSort:A,onChangePage:j,data:e(O),checkbox:!1,loading:e(r),defaultSort:"Code"},{columns:y(()=>[a(z,{name:d._lang.label.code,field:"code",sortable:!0},null,8,["name"]),a(z,{name:d._lang.label.serviceTypeId,field:"serviceType",sortField:"serviceTypeId",sortable:!0},null,8,["name"]),a(z,{name:d._lang.label.abreviation,field:"abreviation",sortable:!0},null,8,["name"]),a(z,{name:d._lang.label.name,field:"name",sortable:!0},null,8,["name"]),a(z,{name:d._lang.label.state,field:"recordStateTypeId",align:e(_).columnAlign.center,custom:ve,options:e(f),sortable:!0},null,8,["name","align","options"])]),actions:y(L=>[a(te,{onClick:he=>P(L.item)},null,8,["onClick"])]),_:1},8,["data","loading"])]),_:1}),(F(),N(e(ce),{collapsed:e(v),class:"mt-5",key:e(k),modelValue:e(B),"onUpdate:modelValue":b[6]||(b[6]=L=>S(B)?B.value=L:B=L),disabled:!0,loading:e(r),selectedLang:e(R),validateForm:!1},null,8,["collapsed","modelValue","loading","selectedLang"]))]),footer:y(()=>[a(Y,{type:"primary",size:"large",title:d._lang.common.apply,"data-bs-dismiss":"modal",onClick:q,disabled:!e(B).code},null,8,["title","disabled"]),a(Y,{type:"secondary",size:"large",title:d._lang.common.cancel,"data-bs-dismiss":"modal",onClick:h},null,8,["title"])]),_:1},8,["title","size"])}}},je=["id"],Pe={__name:"services",props:{},setup(p){le(()=>{}),ee(async()=>{f.value=V.decodeId(i.params.pointOfCareId),O.value=V.decodeId(i.params.pointOfCareVersion),!f.value||!O.value?g.push({name:constants.router.BACKOFFICE_POINT_OF_CARE_PAGE.name}):(v.pointOfCareId=f.value,v.pointOfCareVersion=O.value,await A())});const s="search-service-modal",o="delete-service",t=V.uuid(),i=ye(),c=Z(),g=_e();let l=C(!0),n=C(0),f=C(0),O=C(0),r=C(V.createEmptyDataSource()),v=x(R()),k=C(null);function R(){return{pageNumber:1,sortBy:"ServiceName",active:!0,pointOfCareId:null,pointOfCareVersion:null}}function B(){n.value++,window.setTimeout(function(){V.showModalById(s)},5)}async function U(m){v.sortBy=m,await A()}async function $(m){v.pageNumber=m,await A()}async function A(){l.value=!0;let m=await Q.associationSearch(v);V.validateResponse(m,null,()=>{r.value=m.data}),l.value=!1}async function j(m){k.value=m}async function E(){if(k.value){l.value=!0;const m=await Q.associationRemove(f.value,O.value,k.value.serviceId,k.value.serviceVersion);V.validateResponse(m,c.backoffice.pointOfCare.serviceRemoved,async()=>{await A()}),l.value=!1}}return(m,X)=>{const P=u("icon-plus"),h=u("table-actions"),q=u("ccolumn"),d=u("table-action-delete"),b=u("ctable"),T=u("container-wrapper"),D=u("confirm-delete-modal");return F(),J(W,null,[a(T,null,{default:y(()=>[a(h,{title:m._lang.common.tableActionTitle},{default:y(()=>[M("button",{class:"btn btn-primary",type:"button",id:e(t),onClick:B},[a(P,{color:"#FFF"}),Ve(" "+Ce(m._lang.common.addService),1)],8,je)]),_:1},8,["title"]),a(b,{onSort:U,onChangePage:$,data:e(r),checkbox:!1,loading:e(l),defaultSort:"ServiceName",checkboxField:"code"},{columns:y(()=>[a(q,{name:m._lang.label.code,field:"serviceCode",sortable:!0},null,8,["name"]),a(q,{name:m._lang.label.channelTypeId,field:"serviceType",sortField:"serviceType",sortable:!0},null,8,["name"]),a(q,{name:m._lang.label.abreviation,field:"serviceOrganization",sortField:"serviceOrganizationId",sortable:!0},null,8,["name"]),a(q,{name:m._lang.label.name,field:"serviceName",sortable:!0},null,8,["name"]),a(q,{name:m._lang.label.organizationHost,field:"serviceOrganization",sortField:"serviceOrganizationId",sortable:!0},null,8,["name"])]),actions:y(H=>[a(d,{id:o,onClick:z=>j(H.item)},null,8,["onClick"])]),_:1},8,["data","loading"])]),_:1}),e(l)?G("",!0):(F(),N(Me,{key:e(n),pointOfCareId:e(f),pointOfCareVersion:e(O),onApply:A},null,8,["pointOfCareId","pointOfCareVersion"])),a(D,{id:o,title:m._lang.backoffice.pointOfCare.serviceDeleteTitle,message:m._lang.backoffice.pointOfCare.serviceDeleteQuestion,action:E},null,8,["title","message"])],64)}}},ol={__name:"form",props:{formModel:{Object,required:!0},loading:{type:Boolean,required:!0},validateForm:{type:Boolean,required:!0},disabled:{type:Boolean,required:!0},isExternalEdit:{type:Boolean,required:!0},selectedLang:{type:[Number,String],required:!0},rules:{type:Object,required:!0},vuelidate:{Object,default:null},showProgress:{type:Boolean,default:!0},progressValue:{type:[Number],required:!1}},emits:["update:formModel"],setup(p,{emit:s}){const o=p,t=I({get(){return o.formModel},set(i){s("update:formModel",i)}});return(i,c)=>{const g=u("progress-bar"),l=u("container-wrapper"),n=u("tab-content"),f=u("tabs");return F(),N(f,null,{default:y(()=>[a(n,{id:"general",title:i._lang.common.general,active:!0},{default:y(()=>[o.showProgress?(F(),N(l,{key:0,"margin-top":!1},{default:y(()=>[o.showProgress?(F(),N(g,{key:0,value:o.progressValue,label:i._lang.common.fill,class:"mb-4 col-12 float-end"},null,8,["value","label"])):G("",!0)]),_:1})):G("",!0),a($e,{modelValue:e(t),"onUpdate:modelValue":c[0]||(c[0]=O=>S(t)?t.value=O:null),disabled:o.disabled,validateForm:o.validateForm,loading:o.loading,selectedLang:o.selectedLang,rules:o.rules},null,8,["modelValue","disabled","validateForm","loading","selectedLang","rules"])]),_:1},8,["title"]),a(n,{id:"services",title:i._lang.backoffice.menu.services,active:!1,disabled:!1},{default:y(()=>[a(Pe)]),_:1},8,["title"])]),_:1})}}};export{ol as _};
