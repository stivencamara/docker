import{_ as B}from"./form-84163000.js";import{s as S,L as M,z as P,M as G,r as n,a as R,i as m,G as K,N as D,J as j,u,x as i,b as _,o as E,l as I,w as p,e as f,g as e,D as k}from"./index-5b4ebf84.js";import{s as w}from"./helpers-28a0442c.js";import{u as x}from"./service-ddb39df3.js";import{s as C}from"./service-09bdae54.js";import"./helpers-4796f1a9.js";/* empty css                                                                     */import{_ as J}from"./detail-actions-06232284.js";import"./index.esm-85573352.js";import"./address.vue_vue_type_style_index_0_scoped_ab5200bc_lang-84b5de6f.js";import"./index.esm-65642301.js";import"./point-of-care-640dbae0.js";import"./form-3f3e5c38.js";import"./settings-fd6ffbf1.js";import"./refusal-5d03193c.js";import"./generic-74ec479d.js";import"./point-of-care-11ca6bee.js";import"./organization-cd538fe2.js";import"./helpers-56107f9e.js";import"./helpers-730fb974.js";import"./helpers-991a1d67.js";import"./helpers-138c884f.js";import"./helpers-c8652456.js";const pe={__name:"detail",setup(N){const L=S(),v=M();P();const h=G(),g=x();let r=n(!0),o=R(w.newForm()),s=n(m.language.pt);n([]);let y=R(w.formRules()),c=n(0),d=n(0);const T=K(()=>v.path.toLowerCase().indexOf("tarefas")>-1);async function A(){r.value=!0;const t=await C.getById(c.value,d.value);u.validateResponse(t,null,()=>{let a=t.data;a.eventTypeId=a.lifeEventId?m.eventType.life:m.eventType.business,a.processingTime.type=a.processingTime.weeks?m.processingTimeType.simplified:m.processingTimeType.advanced,Object.assign(o,a),h.emit(i.emitter.OBJECT_LOADED,t.data),g.setFormToCompare(u.cloneObject(a))}),r.value=!1}async function F(){r.value=!0;const t=await C.getLists(s.value);u.validateResponse(t,null,()=>{g.setLists(t.data)}),r.value=!1}return D(()=>s.value,()=>{F()}),j(async()=>{c.value=u.decodeId(v.params.serviceId),d.value=u.decodeId(v.params.serviceVersion),!c.value||!d.value?L.push({name:i.router.BACKOFFICE_SERVICE_PAGE.name}):(await F(),await A())}),(t,a)=>{const b=_("breadcrumb-item"),O=_("breadcrumb"),V=_("page");return E(),I(V,{title:t._lang.backoffice.service.editPageTitle},{breadcrumb:p(()=>[f(O,{"has-home":!0},{default:p(()=>[e(T)?(E(),I(b,{key:0,label:t._lang.backoffice.tasks.breadcrumbTitle,"router-path":e(i).router.BACKOFFICE_TASKS_PAGE.path},null,8,["label","router-path"])):(E(),I(b,{key:1,label:t._lang.backoffice.service.breadcrumbTitle,"router-path":e(i).router.BACKOFFICE_SERVICE_PAGE.path},null,8,["label","router-path"])),f(b,{label:t._lang.backoffice.service.detailPageTitle},null,8,["label"])]),_:1})]),actions:p(()=>[f(J,{loading:e(r),selectedLang:e(s),"onUpdate:selectedLang":a[0]||(a[0]=l=>k(s)?s.value=l:s=l),service:e(C),backRoute:e(i).router.BACKOFFICE_SERVICE_PAGE.name,editRoute:e(i).router.BACKOFFICE_EDIT_SERVICE_PAGE.name,itemIdField:"serviceId",itemVersionField:"serviceVersion",itemId:e(c),itemVersion:e(d),formModel:e(o),"show-record-state-actions":e(T),store:e(g)},null,8,["loading","selectedLang","service","backRoute","editRoute","itemId","itemVersion","formModel","show-record-state-actions","store"])]),default:p(()=>[f(B,{formModel:e(o),"onUpdate:formModel":a[1]||(a[1]=l=>k(o)?o.value=l:o=l),disabled:!0,loading:e(r),selectedLang:e(s),validateForm:!0,rules:e(y),isExternalEdit:!1,showProgress:!1},null,8,["formModel","loading","selectedLang","rules"])]),_:1},8,["title"])}}};export{pe as default};
