import{_ as K}from"./form-526fb979.js";import{s as D,L as H,z as U,r as s,a as A,i as j,G as B,N as R,J as x,u as l,x as c,b as I,o as _,l as J,w as v,e as i,g as e,c as V,F as z,D as O}from"./index-5b4ebf84.js";import{p as E}from"./helpers-56107f9e.js";import{u as Y}from"./point-of-care-640dbae0.js";import{u as q}from"./index.esm-65642301.js";import{p as F}from"./point-of-care-11ca6bee.js";import{b as Q}from"./helpers-4796f1a9.js";import{e as W}from"./edit-actions-88160b2f.js";import"./contacts-6a9568fc.js";import"./address-167772ff.js";import"./organization-cd538fe2.js";import"./location-7945ac70.js";import"./address.vue_vue_type_style_index_0_scoped_ab5200bc_lang-84b5de6f.js";import"./service-ddb39df3.js";import"./refusal-5d03193c.js";import"./index.esm-85573352.js";import"./generic-74ec479d.js";import"./service-09bdae54.js";import"./helpers-28a0442c.js";import"./helpers-730fb974.js";import"./cancel-confirm-46a9e596.js";import"./settings-fd6ffbf1.js";import"./helpers-991a1d67.js";import"./helpers-c8652456.js";import"./helpers-138c884f.js";/* empty css                                                                     */const ke={__name:"edit",setup(X){const y=D(),u=H(),L=U(),f=Y();let o=s(!0),a=A(E.newForm()),n=s(j.language.pt);s([]);let k=A(E.formRules()),g=s(0),b=s(0),p=s(0),w=s(0),C=s(0);const P=q(k,a),M=B(()=>C.value===100&&!o.value);async function N(){o.value=!0;const t=await F.getById(g.value,b.value);l.validateResponse(t,null,()=>{Object.assign(a,t.data),f.setFormToCompare(l.cloneObject(t.data))}),o.value=!1}async function T(){o.value=!0;const t=await F.getLists(n.value);l.validateResponse(t,null,()=>{f.setLists(t.data)}),o.value=!1}R(()=>n.value,()=>{T()}),x(async()=>{g.value=l.decodeId(u.params.pointOfCareId),b.value=l.decodeId(u.params.pointOfCareVersion),p.value=l.decodeId(u.params.organizationId),w.value=l.decodeId(u.params.organizationVersion),!g.value||!b.value?y.push({name:c.router.BACKOFFICE_POINT_OF_CARE_PAGE.name}):(await T(),await N())}),R(()=>[a.texts[0].name,a.organization,a.organizationHost,a.startDate,a.channel.channelTypeId,a.address.zipCode,a.address.islandId,a.address.countyId,a.address.parishId,a.address.locality,a.address.address],()=>{Q.calculatePercentage(a,E.progressFields(),t=>{f.setProgress(t),C.value=t})});const h=B(()=>p.value>0?`${c.router.BACKOFFICE_EDIT_ENTITY_PAGE.path.replace(":organizationId",u.params.organizationId).replace(":organizationVersion",u.params.organizationVersion)}#pontosatendimento`:c.router.BACKOFFICE_POINT_OF_CARE_PAGE.name);return(t,d)=>{const m=I("breadcrumb-item"),S=I("breadcrumb"),G=I("page");return _(),J(G,{title:t._lang.backoffice.pointOfCare.editPageTitle},{breadcrumb:v(()=>[i(S,{"has-home":!0},{default:v(()=>[e(p)>0?(_(),V(z,{key:0},[i(m,{label:t._lang.backoffice.entities.breadcrumbTitle,"router-path":e(c).router.BACKOFFICE_ENTITIES_PAGE.path},null,8,["label","router-path"]),i(m,{label:e(L).common.entity,"router-path":e(h)},null,8,["label","router-path"]),i(m,{label:t._lang.backoffice.pointOfCare.editPageTitle},null,8,["label"])],64)):(_(),V(z,{key:1},[i(m,{label:t._lang.backoffice.pointOfCare.breadcrumbTitle,"router-path":e(c).router.BACKOFFICE_POINT_OF_CARE_PAGE.path},null,8,["label","router-path"]),i(m,{label:t._lang.backoffice.pointOfCare.editPageTitle},null,8,["label"])],64))]),_:1})]),actions:v(()=>[i(W,{loading:e(o),"onUpdate:loading":d[0]||(d[0]=r=>O(o)?o.value=r:o=r),canSubmit:e(M),selectedLang:e(n),"onUpdate:selectedLang":d[1]||(d[1]=r=>O(n)?n.value=r:n=r),backRoute:e(h),directBackRoute:e(p)>0,service:e(F),itemId:e(g),itemVersion:e(b),formModel:e(a),vuelidate:e(P),store:e(f),resource:t._lang.backoffice.pointOfCare,itemIdField:"pointOfCareId"},null,8,["loading","canSubmit","selectedLang","backRoute","directBackRoute","service","itemId","itemVersion","formModel","vuelidate","store","resource"])]),default:v(()=>[i(K,{formModel:e(a),"onUpdate:formModel":d[2]||(d[2]=r=>O(a)?a.value=r:a=r),disabled:!1,validateForm:!0,loading:e(o),selectedLang:e(n),rules:e(k),isExternalEdit:e(p)>0,vuelidate:e(P),progressValue:e(C),"show-progress":!0},null,8,["formModel","loading","selectedLang","rules","isExternalEdit","vuelidate","progressValue"])]),_:1},8,["title"])}}};export{ke as default};
