import{L as G,n as f,s as i,o as S,r as u,y as k,A as D,x as U,m as H,N as q,u as z,I as w,O as T,a as m,b as I,c as C,w as d,d as l,f as a,i as g,H as j}from"./index-920dbb37.js";import{u as J,_ as W,a as x}from"./address-87dae4f1.js";import{_ as Q}from"./comments-3b769030.js";import{c as X,r as Y}from"./index.esm-d0811cb6.js";import{l as L}from"./location-be767322.js";import{h as O}from"./helpers-952742ca.js";import{b as Z}from"./helpers-4c156364.js";/* empty css                                                                     */import{_ as $}from"./detail-actions-cf004e7e.js";import"./address-38fb745b.js";import"./helpers-db4b16e6.js";import"./helpers-93ac209f.js";import"./helpers-cd5e71d3.js";import"./helpers-65b02008.js";import"./helpers-6935922b.js";import"./settings-bb7269a2.js";const _e={__name:"detail",setup(ee){G(async()=>{c.value=f.decodeId(_.params.locationId),p.value=f.decodeId(_.params.locationVersion),!c.value||!p.value?y.push({name:i.router.BACKOFFICE_LOCATION_PAGE.name}):(await E(),await R())}),S(()=>{s.value=!1});let c=u(0),p=u(0),s=u(!0);u([]);let e=k(O.newForm()),r=u(D.language.pt),F=k(O.formRules()),b=u(0);const A=J(),h=U(),y=H(),_=q(),B=z();X.withMessage(h.common.requiredField,Y);const V=w(()=>_.path.toLowerCase().indexOf("tarefas")>-1);async function R(){const o=await L.getById(c.value,p.value);f.validateResponse(o,null,()=>{Object.assign(e,o.data),B.emit(i.emitter.OBJECT_LOADED,o.data)})}async function E(){s.value=!0;const o=await L.getLists(r.value);f.validateResponse(o,null,()=>{A.setLists(o.data)}),s.value=!1}return T(()=>r.value,()=>{E()}),T(()=>[e.code,e.startDate,e.zipCode,e.islandId,e.countyId,e.parishId,e.locationTypeId,e.locationId,e.organizationId,e.address,e.locality],()=>{Z.calculatePercentage(e,O.progressFields(),o=>{A.setProgress(o),b.value=o})}),w(()=>b.value===100&&!s.value),(o,n)=>{const v=m("breadcrumb-item"),P=m("breadcrumb"),K=m("progress-bar"),M=m("card"),N=m("page");return I(),C(N,{title:o._lang.backoffice.location.detailPageTitle},{breadcrumb:d(()=>[l(P,{"has-home":!0},{default:d(()=>[a(V)?(I(),C(v,{key:0,label:o._lang.backoffice.tasks.breadcrumbTitle,"router-path":a(i).router.BACKOFFICE_TASKS_PAGE.path},null,8,["label","router-path"])):(I(),C(v,{key:1,label:o._lang.backoffice.location.breadcrumbTitle,"router-path":a(i).router.BACKOFFICE_LOCATION_PAGE.path},null,8,["label","router-path"])),l(v,{label:o._lang.backoffice.location.detailPageTitle},null,8,["label"])]),_:1})]),actions:d(()=>[l($,{loading:a(s),selectedLang:a(r),"onUpdate:selectedLang":n[0]||(n[0]=t=>g(r)?r.value=t:r=t),service:a(L),backRoute:a(i).router.BACKOFFICE_LOCATION_PAGE.name,editRoute:a(i).router.BACKOFFICE_EDIT_LOCATION_PAGE.name,itemIdField:"locationId",itemVersionField:"locationVersion",itemId:a(c),itemVersion:a(p),formModel:a(e),"show-record-state-actions":a(V)},null,8,["loading","selectedLang","service","backRoute","editRoute","itemId","itemVersion","formModel","show-record-state-actions"])]),default:d(()=>[l(M,{shadow:!0},{body:d(()=>[l(j,{"margin-top":!1},{default:d(()=>[l(K,{value:a(b),label:o._lang.common.fill,class:"mb-4 col-12 float-end"},null,8,["value","label"])]),_:1}),l(W,{validateForm:!1,disabled:!0,modelValue:a(e),"onUpdate:modelValue":n[1]||(n[1]=t=>g(e)?e.value=t:e=t),loading:a(s),rules:a(F),selectedLang:a(r),vuelidate:{}},null,8,["modelValue","loading","rules","selectedLang"]),l(x,{validateForm:!1,disabled:!0,modelValue:a(e),"onUpdate:modelValue":n[2]||(n[2]=t=>g(e)?e.value=t:e=t),loading:a(s),rules:a(F),vuelidate:{}},null,8,["modelValue","loading","rules"]),l(Q,{validateForm:!1,disabled:!0,modelValue:a(e),"onUpdate:modelValue":n[3]||(n[3]=t=>g(e)?e.value=t:e=t),loading:a(s),selectedLang:a(r),vuelidate:{}},null,8,["modelValue","loading","selectedLang"])]),_:1})]),_:1},8,["title"])}}};export{_e as default};
