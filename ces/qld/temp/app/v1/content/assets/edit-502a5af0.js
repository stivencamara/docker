import{_ as K}from"./form-30f035bb.js";import{m as H,N as U,x as j,r as i,y as h,A as D,I as B,O as R,L as x,n as l,s as c,a as v,b as C,c as Y,w as I,d as s,f as e,k as y,F as z,i as _}from"./index-920dbb37.js";import{p as O}from"./helpers-db4b16e6.js";import{u as q}from"./point-of-care-98c47a98.js";import{u as J}from"./index.esm-d064d6e3.js";import{p as E}from"./point-of-care-5c4c4d1a.js";import{b as Q}from"./helpers-4c156364.js";import{e as W}from"./edit-actions-4d0f80fb.js";import"./contacts-9da7813e.js";import"./base-information-c108b44d.js";import"./service-e327b247.js";import"./organization-481d97d6.js";import"./address-38fb745b.js";import"./comments-3b769030.js";import"./index.esm-d0811cb6.js";import"./generic-9b68486a.js";import"./service-6e6aa2ba.js";import"./helpers-65b02008.js";import"./helpers-6935922b.js";import"./cancel-confirm-33e0b7cc.js";import"./settings-bb7269a2.js";import"./helpers-93ac209f.js";import"./helpers-952742ca.js";import"./helpers-cd5e71d3.js";/* empty css                                                                     */const Fe={__name:"edit",setup(X){const L=H(),u=U(),V=j(),f=q();let o=i(!0),a=h(O.newForm()),n=i(D.language.pt);i([]);let F=h(O.formRules()),g=i(0),b=i(0),m=i(0),w=i(0),k=i(0);const A=J(F,a),M=B(()=>k.value===100&&!o.value);async function N(){o.value=!0;const t=await E.getById(g.value,b.value);l.validateResponse(t,null,()=>{Object.assign(a,t.data),f.setFormToCompare(l.cloneObject(t.data))}),o.value=!1}async function P(){o.value=!0;const t=await E.getLists(n.value);l.validateResponse(t,null,()=>{f.setLists(t.data)}),o.value=!1}R(()=>n.value,()=>{P()}),x(async()=>{g.value=l.decodeId(u.params.pointOfCareId),b.value=l.decodeId(u.params.pointOfCareVersion),m.value=l.decodeId(u.params.organizationId),w.value=l.decodeId(u.params.organizationVersion),!g.value||!b.value?L.push({name:c.router.BACKOFFICE_POINT_OF_CARE_PAGE.name}):(await P(),await N())}),R(()=>[a.texts[0].name,a.organization,a.organizationHost,a.startDate,a.channel.channelTypeId,a.address.zipCode,a.address.islandId,a.address.countyId,a.address.parishId,a.address.locality,a.address.address],()=>{Q.calculatePercentage(a,O.progressFields(),t=>{f.setProgress(t),k.value=t})});const T=B(()=>m.value>0?`${c.router.BACKOFFICE_EDIT_ENTITY_PAGE.path.replace(":organizationId",u.params.organizationId).replace(":organizationVersion",u.params.organizationVersion)}#pontosatendimento`:c.router.BACKOFFICE_POINT_OF_CARE_PAGE.name);return(t,d)=>{const p=v("breadcrumb-item"),S=v("breadcrumb"),G=v("page");return C(),Y(G,{title:t._lang.backoffice.pointOfCare.editPageTitle},{breadcrumb:I(()=>[s(S,{"has-home":!0},{default:I(()=>[e(m)>0?(C(),y(z,{key:0},[s(p,{label:t._lang.backoffice.entities.breadcrumbTitle,"router-path":e(c).router.BACKOFFICE_ENTITIES_PAGE.path},null,8,["label","router-path"]),s(p,{label:e(V).common.entity,"router-path":e(T)},null,8,["label","router-path"]),s(p,{label:t._lang.backoffice.pointOfCare.editPageTitle},null,8,["label"])],64)):(C(),y(z,{key:1},[s(p,{label:t._lang.backoffice.pointOfCare.breadcrumbTitle,"router-path":e(c).router.BACKOFFICE_POINT_OF_CARE_PAGE.path},null,8,["label","router-path"]),s(p,{label:t._lang.backoffice.pointOfCare.editPageTitle},null,8,["label"])],64))]),_:1})]),actions:I(()=>[s(W,{loading:e(o),"onUpdate:loading":d[0]||(d[0]=r=>_(o)?o.value=r:o=r),canSubmit:e(M),selectedLang:e(n),"onUpdate:selectedLang":d[1]||(d[1]=r=>_(n)?n.value=r:n=r),backRoute:e(T),directBackRoute:e(m)>0,service:e(E),itemId:e(g),itemVersion:e(b),formModel:e(a),vuelidate:e(A),store:e(f),resource:t._lang.backoffice.pointOfCare,itemIdField:"pointOfCareId"},null,8,["loading","canSubmit","selectedLang","backRoute","directBackRoute","service","itemId","itemVersion","formModel","vuelidate","store","resource"])]),default:I(()=>[s(K,{formModel:e(a),"onUpdate:formModel":d[2]||(d[2]=r=>_(a)?a.value=r:a=r),disabled:!1,validateForm:!0,loading:e(o),selectedLang:e(n),rules:e(F),isExternalEdit:e(m)>0,vuelidate:e(A)},null,8,["formModel","loading","selectedLang","rules","isExternalEdit","vuelidate"])]),_:1},8,["title"])}}};export{Fe as default};
