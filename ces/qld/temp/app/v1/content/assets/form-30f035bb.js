import{_ as ne,a as oe}from"./contacts-9da7813e.js";import{_ as de,a as se}from"./base-information-c108b44d.js";import{I as C,a as c,b as S,c as A,w as y,d as a,f as e,i as F,A as g,k as W,F as X,x as Y,K as ie,y as K,r as L,n as V,L as Z,o as h,M as re,N as ue,m as ce,g as me,B as pe}from"./index-920dbb37.js";import{b as O}from"./helpers-4c156364.js";import{u as ge}from"./organization-481d97d6.js";import{u as be}from"./index.esm-d064d6e3.js";import{_ as fe}from"./address-38fb745b.js";import{u as ve}from"./point-of-care-98c47a98.js";import{_ as ye}from"./comments-3b769030.js";import{r as Ve}from"./index.esm-d0811cb6.js";import{_ as _e}from"./generic-9b68486a.js";import{u as Ce}from"./service-e327b247.js";import{p as G}from"./point-of-care-5c4c4d1a.js";import{s as D}from"./service-6e6aa2ba.js";import{s as Le}from"./helpers-65b02008.js";const Ie={__name:"description",props:{modelValue:{type:Object,required:!0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},selectedLang:{type:[String,Number],required:!0},validateForm:{type:Boolean,default:!1},rules:{type:Object,default:{}}},emits:["update:modelValue"],setup(b,{emit:o}){const n=b;ge(),be(n.rules,n.modelValue);const t=C({get(){return n.modelValue},set(l){o("update:modelValue",l)}}),i=C(()=>n.selectedLang),m=C({get(){return O.getFieldByLangAndName(t.value,i.value,"description")},set(l){O.setFieldByLangAndName(t.value,i.value,"description",l)}}),v=C({get(){return O.getFieldByLangAndName(t.value,i.value,"preConditions")},set(l){O.setFieldByLangAndName(t.value,i.value,"preConditions",l)}});return C({get(){return O.getFieldByLangAndName(t.value,i.value,"keywords")},set(l){O.setFieldByLangAndName(t.value,i.value,"keywords",l)}}),(l,s)=>{const _=c("form-field"),I=c("accordion");return S(),A(I,{id:"description",title:l._lang.common.description,collapsed:!1,class:"mb-4"},{default:y(()=>[a(_,{id:"description",class:"mb-3 col-12",modelValue:e(m),"onUpdate:modelValue":s[0]||(s[0]=r=>F(m)?m.value=r:null),label:l._lang.label.description,disabled:n.disabled,loading:n.loading,type:e(g).inputs.text,maxlength:255,language:e(i)},null,8,["modelValue","label","disabled","loading","type","language"]),a(_,{id:"preConditions",class:"mb-3 col-12",modelValue:e(v),"onUpdate:modelValue":s[1]||(s[1]=r=>F(v)?v.value=r:null),label:l._lang.label.preConditions,disabled:n.disabled,loading:n.loading,type:e(g).inputs.text,maxlength:255,language:e(i)},null,8,["modelValue","label","disabled","loading","type","language"])]),_:1},8,["title"])}}},Oe={__name:"address",props:{modelValue:{type:Object,required:!0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},validateForm:{type:Boolean,default:!1},rules:{type:Object,default:{}},store:{type:Object,required:!0},vuelidate:{type:Object,default:null}},emits:["update:modelValue"],setup(b,{emit:o}){const n=b,t=C({get(){return n.modelValue},set(i){o("update:modelValue",i)}});return(i,m)=>{const v=c("accordion");return S(),A(v,{id:"address",title:i._lang.common.address,collapsed:!1,class:"mb-4"},{default:y(()=>[a(fe,{modelValue:e(t).address,"onUpdate:modelValue":m[0]||(m[0]=l=>e(t).address=l),disabled:n.disabled,loading:b.loading,rules:n.rules,validateForm:n.validateForm,store:n.store,vuelidate:n.vuelidate},null,8,["modelValue","disabled","loading","rules","validateForm","store","vuelidate"])]),_:1},8,["title"])}}},Fe={__name:"service-channel-requirements",props:{modelValue:{type:Object,required:!0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},validateForm:{type:Boolean,default:!1},selectedLang:{type:[String,Number],required:!0},rules:{type:Object,default:{}}},emits:["update:modelValue"],setup(b,{emit:o}){const n=b,t=C({get(){return n.modelValue},set(l){o("update:modelValue",l)}}),i=C(()=>n.selectedLang),m=C({get(){return O.getFieldByLangAndName(t.value,i.value,"openingHours")},set(l){O.setFieldByLangAndName(t.value,i.value,"openingHours",l)}}),v=C({get(){return O.getFieldByLangAndName(t.value,i.value,"attendanceRestrictions")},set(l){O.setFieldByLangAndName(t.value,i.value,"attendanceRestrictions",l)}});return(l,s)=>{const _=c("form-field"),I=c("accordion");return S(),A(I,{id:"attendance-restrictions",title:l._lang.backoffice.pointOfCare.serviceChannelRequirements,collapsed:!1,class:"mb-4"},{default:y(()=>[a(_,{id:"openingHours",class:"mb-3 col-12",modelValue:e(m),"onUpdate:modelValue":s[0]||(s[0]=r=>F(m)?m.value=r:null),label:l._lang.label.openingHours,disabled:n.disabled,loading:n.loading,type:e(g).inputs.textarea,rows:3,language:e(i),maxlength:2e3},null,8,["modelValue","label","disabled","loading","type","language"]),a(_,{id:"attendanceRestrictions",class:"mb-3 col-12",modelValue:e(v),"onUpdate:modelValue":s[1]||(s[1]=r=>F(v)?v.value=r:null),label:l._lang.label.attendanceRestrictions,disabled:n.disabled,loading:n.loading,type:e(g).inputs.textarea,rows:3,language:e(i),maxlength:2e3},null,8,["modelValue","label","disabled","loading","type","language"])]),_:1},8,["title"])}}},Be={__name:"general",props:{modelValue:{type:Object,required:!0},selectedLang:Ve,disabled:{Boolean,default:!0},rules:{Boolean,default:!0},validateForm:{Boolean,default:!1},loading:{Object,default:{}},isExternalEdit:{type:Boolean,default:!1},vuelidate:{type:Object,default:null}},setup(b){const o=b,n=ve(),t=C({get(){return o.modelValue},set(v){emit("update:modelValue",v)}}),i=C(()=>o.selectedLang),m=C(()=>o.selectedLang===g.language.en);return(v,l)=>(S(),W(X,null,[a(e(de),{modelValue:e(t),"onUpdate:modelValue":l[0]||(l[0]=s=>F(t)?t.value=s:null),disabled:o.disabled,loading:b.loading,selectedLang:o.selectedLang,validateForm:o.validateForm,rules:o.rules,isExternalEdit:o.isExternalEdit},null,8,["modelValue","disabled","loading","selectedLang","validateForm","rules","isExternalEdit"]),a(e(Ie),{modelValue:e(t),"onUpdate:modelValue":l[1]||(l[1]=s=>F(t)?t.value=s:null),disabled:o.disabled,loading:b.loading,selectedLang:o.selectedLang,validateForm:o.validateForm,rules:o.rules},null,8,["modelValue","disabled","loading","selectedLang","validateForm","rules"]),a(e(Oe),{modelValue:o.modelValue,"onUpdate:modelValue":l[2]||(l[2]=s=>o.modelValue=s),disabled:o.disabled,loading:b.loading||e(m),rules:o.rules,validateForm:o.validateForm,store:e(n),vuelidate:o.vuelidate},null,8,["modelValue","disabled","loading","rules","validateForm","store","vuelidate"]),a(e(Fe),{modelValue:e(t),"onUpdate:modelValue":l[3]||(l[3]=s=>F(t)?t.value=s:null),disabled:o.disabled,loading:b.loading,selectedLang:o.selectedLang},null,8,["modelValue","disabled","loading","selectedLang"]),a(e(oe),{modelValue:e(t).contacts,"onUpdate:modelValue":l[4]||(l[4]=s=>e(t).contacts=s),disabled:o.disabled||e(m),modal:ne,store:e(n),loading:b.loading},null,8,["modelValue","disabled","store","loading"]),a(e(ye),{modelValue:e(t),"onUpdate:modelValue":l[5]||(l[5]=s=>F(t)?t.value=s:null),disabled:o.disabled,loading:b.loading,selectedLang:o.selectedLang},null,8,["modelValue","disabled","loading","selectedLang"]),a(_e,{modelValue:e(t),"onUpdate:modelValue":l[6]||(l[6]=s=>F(t)?t.value=s:null),disabled:o.disabled,loading:b.loading,selectedLang:e(i)},null,8,["modelValue","disabled","loading","selectedLang"])],64))}},ke={__name:"search-service-modal",props:{pointOfCareId:{Number,required:!0},pointOfCareVersion:{Number,required:!0}},emits:["apply"],setup(b,{emit:o}){const n=b,t=Ce(),i="search-service-modal",m=Y(),v=ie();let l=K(M()),s=L([]),_=L([]),I=L(V.createEmptyDataSource()),r=L(!1),w=L(!1),E=L(0),R=L("pt"),B=K(z());function z(){return Le.newForm()}function M(){return{pageNumber:1,sortBy:"Code",code:null,serviceTypeIds:null,serviceCategoryIds:null,businessEventIds:null,lifeEventIds:null,abreviation:null,name:null,organization:null,recordStateIds:[g.recordStateType.published],active:!0}}Z(async()=>{r.value=!0,s.value=V.convertEnumToArray(m.enums.recordStateType);const d=await D.getLists(v.getLanguage);V.validateResponse(d,null,()=>{t.setLists(d.data),s.value=V.convertEnumToArray(m.enums.recordStateType),_.value=V.concatItemsBadge(s.value,O.recordStateTypeBadgeOptions)}),r.value=!1}),h(async()=>{await T()});async function N(d){l.sortBy=d,await T()}async function j(d){l.pageNumber=d,await T()}async function T(){r.value=!0;let d=await D.search(l);V.validateResponse(d,null,()=>{I.value=d.data}),r.value=!1}async function p(){Object.assign(l,M()),await T()}async function Q(){await T()}async function $(d){const u=await D.getById(d.serviceId,d.serviceVersion);V.validateResponse(u,null,()=>{Object.assign(B,u.data),w.value=!0}),E.value++}function P(){}async function U(){r.value=!0;const d=await G.associationCreate(n.pointOfCareId,n.pointOfCareVersion,B.serviceId,B.serviceVersion);V.validateResponse(d,m.backoffice.pointOfCare.serviceAdded,()=>{o("apply")}),r.value=!1}return(d,u)=>{const k=c("form-field"),H=c("row"),x=c("cfilter"),q=c("ccolumn"),ee=c("table-action-detail"),le=c("ctable"),ae=c("container-wrapper"),J=c("cbutton"),te=c("modal");return S(),A(te,{id:i,title:d._lang.backoffice.service.searchTitle,size:e(g).modalSize.extraLarge,"remove-padding":!0},{body:y(()=>[a(x,{title:d._lang.common.filter,disabled:e(r),"clear-click":p,"apply-click":Q,loading:e(r),collapsed:!1},{default:y(()=>[a(H,null,{default:y(()=>[a(k,{id:"code",modelValue:e(l).code,"onUpdate:modelValue":u[0]||(u[0]=f=>e(l).code=f),class:"mb-3 col-12 col-md-6 col-xl-4",label:d._lang.label.code,type:e(g).inputs.text,maxlength:45,disabled:e(r)},null,8,["modelValue","label","type","disabled"]),a(k,{id:"serviceTypeId",class:"mb-3 col-12 col-md-6 col-xl-4",modelValue:e(l).serviceTypeIds,"onUpdate:modelValue":u[1]||(u[1]=f=>e(l).serviceTypeIds=f),label:d._lang.label.serviceTypeId,type:e(g).inputs.multiselect,options:e(t).serviceTypeList,disabled:e(r),mode:e(g).multiselectMode.tags},null,8,["modelValue","label","type","options","disabled","mode"]),a(k,{id:"serviceCategoryId",class:"mb-3 col-12 col-md-6 col-xl-4",modelValue:e(l).serviceCategoryIds,"onUpdate:modelValue":u[2]||(u[2]=f=>e(l).serviceCategoryIds=f),label:d._lang.label.serviceCategoryId,type:e(g).inputs.multiselect,options:e(t).serviceCategoryList,disabled:e(r),mode:e(g).multiselectMode.tags},null,8,["modelValue","label","type","options","disabled","mode"]),a(k,{id:"lifeEventId",class:"mb-3 col-12 col-md-6 col-xl-4",modelValue:e(l).lifeEventIds,"onUpdate:modelValue":u[3]||(u[3]=f=>e(l).lifeEventIds=f),label:d._lang.label.lifeEventId,type:e(g).inputs.multiselect,options:e(t).lifeEventList,disabled:e(r),mode:e(g).multiselectMode.tags},null,8,["modelValue","label","type","options","disabled","mode"]),a(k,{id:"businessEventId",class:"mb-3 col-12 col-md-6 col-xl-4",modelValue:e(l).businessEventIds,"onUpdate:modelValue":u[4]||(u[4]=f=>e(l).businessEventIds=f),label:d._lang.label.businessEventId,type:e(g).inputs.multiselect,options:e(t).businessEventList,disabled:e(r),mode:e(g).multiselectMode.tags},null,8,["modelValue","label","type","options","disabled","mode"]),a(k,{id:"abreviation",class:"mb-3 col-12 col-md-6 col-xl-4",modelValue:e(l).abreviation,"onUpdate:modelValue":u[5]||(u[5]=f=>e(l).abreviation=f),label:d._lang.label.abreviation,type:e(g).inputs.text,maxlength:16,disabled:e(r)},null,8,["modelValue","label","type","disabled"]),a(k,{id:"name",class:"mb-3 col-12 col-md-8",modelValue:e(l).name,"onUpdate:modelValue":u[6]||(u[6]=f=>e(l).name=f),label:d._lang.label.name,type:e(g).inputs.text,maxlength:45,disabled:e(r)},null,8,["modelValue","label","type","disabled"]),a(k,{id:"organizationId",class:"mb-3 col-12 col-md-6 col-xl-4",modelValue:e(l).organization,"onUpdate:modelValue":u[7]||(u[7]=f=>e(l).organization=f),label:d._lang.label.organizationHost,type:e(g).inputs.multiselect,options:e(t).organizationList,disabled:e(r),valueProp:e(g).multiselectValueProp.value3},null,8,["modelValue","label","type","options","disabled","valueProp"])]),_:1})]),_:1},8,["title","disabled","loading"]),a(ae,null,{default:y(()=>[a(le,{onSort:N,onChangePage:j,data:e(I),checkbox:!1,loading:e(r),defaultSort:"Code"},{columns:y(()=>[a(q,{name:d._lang.label.code,field:"code",sortable:!0},null,8,["name"]),a(q,{name:d._lang.label.serviceTypeId,field:"serviceType",sortField:"serviceTypeId",sortable:!0},null,8,["name"]),a(q,{name:d._lang.label.abreviation,field:"abreviation",sortable:!0},null,8,["name"]),a(q,{name:d._lang.label.name,field:"name",sortable:!0},null,8,["name"]),a(q,{name:d._lang.label.state,field:"recordStateTypeId",align:e(g).columnAlign.center,custom:re,options:e(_),sortable:!0},null,8,["name","align","options"])]),actions:y(f=>[a(ee,{onClick:Ee=>$(f.item)},null,8,["onClick"])]),_:1},8,["data","loading"])]),_:1}),(S(),A(e(se),{collapsed:e(w),class:"mt-5",key:e(E),modelValue:e(B),"onUpdate:modelValue":u[8]||(u[8]=f=>F(B)?B.value=f:B=f),disabled:!0,loading:e(r),selectedLang:e(R),validateForm:!1},null,8,["collapsed","modelValue","loading","selectedLang"]))]),footer:y(()=>[a(J,{type:"primary",size:"large",title:d._lang.common.apply,"data-bs-dismiss":"modal",onClick:U,disabled:!e(B).code},null,8,["title","disabled"]),a(J,{type:"secondary",size:"large",title:d._lang.common.cancel,"data-bs-dismiss":"modal",onClick:P},null,8,["title"])]),_:1},8,["title","size"])}}},Se=["id"],we={__name:"services",props:{},setup(b){h(()=>{}),Z(async()=>{_.value=V.decodeId(i.params.pointOfCareId),I.value=V.decodeId(i.params.pointOfCareVersion),!_.value||!I.value?v.push({name:constants.router.BACKOFFICE_POINT_OF_CARE_PAGE.name}):(w.pointOfCareId=_.value,w.pointOfCareVersion=I.value,await N())});const o="search-service-modal",n="delete-service",t=V.uuid(),i=ue(),m=Y(),v=ce();let l=L(!0),s=L(0),_=L(0),I=L(0),r=L(V.createEmptyDataSource()),w=K(R()),E=L(null);function R(){return{pageNumber:1,sortBy:"ServiceName",active:!0,pointOfCareId:null,pointOfCareVersion:null}}function B(){s.value++,window.setTimeout(function(){V.showModalById(o)},5)}async function z(p){w.sortBy=p,await N()}async function M(p){w.pageNumber=p,await N()}async function N(){l.value=!0;let p=await G.associationSearch(w);V.validateResponse(p,null,()=>{r.value=p.data}),l.value=!1}async function j(p){E.value=p}async function T(){if(E.value){l.value=!0;const p=await G.associationRemove(_.value,I.value,E.value.serviceId,E.value.serviceVersion);V.validateResponse(p,m.backoffice.pointOfCare.serviceRemoved,async()=>{await N()}),l.value=!1}}return(p,Q)=>{const $=c("icon-search"),P=c("table-actions"),U=c("ccolumn"),d=c("table-action-delete"),u=c("ctable"),k=c("container-wrapper"),H=c("confirm-delete-modal");return S(),W(X,null,[a(k,null,{default:y(()=>[a(P,{title:p._lang.common.tableActionTitle},{default:y(()=>[me("button",{class:"btn btn-primary",type:"button",id:e(t),onClick:B},[a($,{color:"#FFF"})],8,Se)]),_:1},8,["title"]),a(u,{onSort:z,onChangePage:M,data:e(r),checkbox:!1,loading:e(l),defaultSort:"ServiceName",checkboxField:"code"},{columns:y(()=>[a(U,{name:p._lang.label.code,field:"serviceCode",sortable:!0},null,8,["name"]),a(U,{name:p._lang.label.channelTypeId,field:"serviceType",sortField:"serviceType",sortable:!0},null,8,["name"]),a(U,{name:p._lang.label.abreviation,field:"serviceOrganization",sortField:"serviceOrganizationId",sortable:!0},null,8,["name"]),a(U,{name:p._lang.label.name,field:"serviceName",sortable:!0},null,8,["name"]),a(U,{name:p._lang.label.organizationHost,field:"serviceOrganization",sortField:"serviceOrganizationId",sortable:!0},null,8,["name"])]),actions:y(x=>[a(d,{id:n,onClick:q=>j(x.item)},null,8,["onClick"])]),_:1},8,["data","loading"])]),_:1}),e(l)?pe("",!0):(S(),A(ke,{key:e(s),pointOfCareId:e(_),pointOfCareVersion:e(I),onApply:N},null,8,["pointOfCareId","pointOfCareVersion"])),a(H,{id:n,title:p._lang.backoffice.pointOfCare.serviceDeleteTitle,message:p._lang.backoffice.pointOfCare.serviceDeleteQuestion,action:T},null,8,["title","message"])],64)}}},Ge={__name:"form",props:{formModel:{Object,required:!0},loading:{type:Boolean,required:!0},validateForm:{type:Boolean,required:!0},disabled:{type:Boolean,required:!0},isExternalEdit:{type:Boolean,required:!0},selectedLang:{type:[Number,String],required:!0},rules:{type:Object,required:!0},vuelidate:{Object,default:null}},emits:["update:formModel"],setup(b,{emit:o}){const n=b,t=C({get(){return n.formModel},set(i){o("update:formModel",i)}});return(i,m)=>{const v=c("tab-content"),l=c("tabs");return S(),A(l,null,{default:y(()=>[a(v,{id:"general",title:i._lang.common.general,active:!0},{default:y(()=>[a(Be,{modelValue:e(t),"onUpdate:modelValue":m[0]||(m[0]=s=>F(t)?t.value=s:null),disabled:n.disabled,validateForm:n.validateForm,loading:n.loading,selectedLang:n.selectedLang,rules:n.rules},null,8,["modelValue","disabled","validateForm","loading","selectedLang","rules"])]),_:1},8,["title"]),a(v,{id:"services",title:i._lang.backoffice.menu.services,active:!1,disabled:!1},{default:y(()=>[a(we)]),_:1},8,["title"])]),_:1})}}};export{Ge as _};
