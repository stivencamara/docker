import{_ as L}from"./delete-confirm-c7c4e24d.js";import{m as W,x as $,r as d,A as r,y as S,n as f,o as q,a as l,b as x,c as J,w as c,d as o,f as t,T as Q,H as X,i as _,s as T}from"./index-920dbb37.js";import{e as w}from"./economic-activity-1e9d9a31.js";import"./helpers-4c156364.js";import"./index.esm-d0811cb6.js";const le={__name:"index",setup(Z){const y=W();$();let s=d(!1),u=d([]),p=d([]),b=d(r.tableSelectedState.none),a=S(v()),g=d(f.createEmptyDataSource());S({});let I=d(0);function v(){return{pageNumber:1,sortBy:"economicActivityId",economicActivityId:null,economicActivityIds:[],caeDesignation:null}}q(async()=>{await m()});function E(e){y.push({name:T.router.BACKOFFICE_SETTINGS_EDIT_ECONOMICACTIVITY_PAGE.name,params:{economicActivityId:f.encodeId(e.economicActivityId)}})}async function V(){Object.assign(a,v()),await A()}async function A(){a.pageNumber=1,await m()}function D(){y.push({name:T.router.BACKOFFICE_SETTINGS_CREATE_ECONOMICACTIVITY_PAGE.name})}async function N(e){a.sortBy=e,await m()}async function B(e){a.pageNumber=e,await m()}async function m(){s.value=!0,a.economicActivityId?a.economicActivityIds=[a.economicActivityId]:a.economicActivityIds=[];let e=await w.search(a);f.validateResponse(e,null,()=>{g.value=e.data}),s.value=!1}async function O(e){I.value=e.economicActivityId}async function M(){f.closeModalById("confirm-delete"),await m()}return(e,i)=>{const F=l("breadcrumb-item"),U=l("breadcrumb"),h=l("cbutton"),C=l("form-field"),G=l("row"),P=l("cfilter"),k=l("ccolumn"),R=l("table-action-edit"),z=l("table-action-delete"),K=l("ctable"),Y=l("card"),j=l("page");return x(),J(j,{title:e._lang.backoffice.settings.economicActivity.pageTitle},{breadcrumb:c(()=>[o(U,{"has-home":!0},{default:c(()=>[o(F,{label:e._lang.backoffice.settings.economicActivity.breadcrumbTitle},null,8,["label"])]),_:1})]),actions:c(()=>[o(h,{class:"col-12 col-sm-auto",type:t(r).buttonType.secondary,size:t(r).buttonSize.medium,title:e._lang.common.toAdd,icon:Q,onClick:D},null,8,["type","size","title"])]),default:c(()=>[o(Y,{shadow:!0},{body:c(()=>[o(P,{title:e._lang.common.filter,disabled:t(s),"clear-click":V,"apply-click":A,loading:t(s),collapsed:!0},{default:c(()=>[o(G,null,{default:c(()=>[o(C,{id:"economicActivityIds",modelValue:t(a).economicActivityId,"onUpdate:modelValue":i[0]||(i[0]=n=>t(a).economicActivityId=n),class:"mb-3 col-12 col-md-6",label:e._lang.label.id,type:t(r).inputs.number,maxlength:45,disabled:t(s)},null,8,["modelValue","label","type","disabled"]),o(C,{id:"caeDesignation",modelValue:t(a).caeDesignation,"onUpdate:modelValue":i[1]||(i[1]=n=>t(a).caeDesignation=n),class:"mb-3 col-12 col-md-6",label:e._lang.label.designation,type:t(r).inputs.text,maxlength:45,disabled:t(s)},null,8,["modelValue","label","type","disabled"])]),_:1})]),_:1},8,["title","disabled","loading"]),o(X,null,{default:c(()=>[o(K,{onSort:N,onChangePage:B,selectedItems:t(u),"onUpdate:selectedItems":i[2]||(i[2]=n=>_(u)?u.value=n:u=n),unselectedItems:t(p),"onUpdate:unselectedItems":i[3]||(i[3]=n=>_(p)?p.value=n:p=n),selectedState:t(b),"onUpdate:selectedState":i[4]||(i[4]=n=>_(b)?b.value=n:b=n),data:t(g),checkbox:!1,loading:t(s),defaultSort:"economicActivityId"},{columns:c(()=>[o(k,{name:e._lang.label.id,field:"economicActivityId",sortable:!0},null,8,["name"]),o(k,{name:e._lang.label.designation,field:"caeDesignation",sortable:!0},null,8,["name"])]),actions:c(n=>[o(R,{onClick:H=>E(n.item)},null,8,["onClick"]),o(z,{onClick:H=>O(n.item)},null,8,["onClick"])]),_:1},8,["selectedItems","unselectedItems","selectedState","data","loading"])]),_:1})]),_:1}),o(L,{"item-id":t(I),resource:e._lang.backoffice.settings.economicActivity,action:M,service:t(w)},null,8,["item-id","resource","service"])]),_:1},8,["title"])}}};export{le as default};
