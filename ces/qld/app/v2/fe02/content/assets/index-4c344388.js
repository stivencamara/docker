import{_ as H}from"./delete-confirm-c7c4e24d.js";import{m as W,x as q,K as z,r as d,A as f,y as w,n as m,o as J,L as Q,a as o,b as X,c as Y,w as c,d as l,f as a,H as Z,i as _,s as $}from"./index-920dbb37.js";import{u as ee,p as g}from"./params-6cc31971.js";import"./helpers-4c156364.js";import"./index.esm-d0811cb6.js";const re={__name:"index",setup(ae){const B=W();q();const L=ee(),V=z();let r=d(!1),u=d([]),p=d([]),b=d(f.tableSelectedState.none),n=w(k()),I=d(m.createEmptyDataSource());w({});let y=d(0);function k(){return{pageNumber:1,sortBy:"parameterId",parameterId:null,name:null}}J(async()=>{await i()});function M(e){B.push({name:$.router.BACKOFFICE_SETTINGS_EDIT_PARAMS_PAGE.name,params:{parameterId:m.encodeId(e.parameterId)}})}async function T(){Object.assign(n,k()),await S()}async function S(){n.pageNumber=1,await i()}async function A(e){n.sortBy=e,await i()}async function E(e){n.pageNumber=e,await i()}async function i(){r.value=!0,n.parameterId?n.parameterIds=[n.parameterId]:n.parameterIds=[];let e=await g.search(n);m.validateResponse(e,null,()=>{I.value=e.data}),r.value=!1}async function N(e){y.value=e.parameterId}async function P(){m.closeModalById("confirm-delete"),await i()}return Q(async()=>{r.value=!0;const e=await g.getLists(V.getLanguage);m.validateResponse(e,null,()=>{L.setLists(e.data)}),r.value=!1}),(e,s)=>{const R=o("breadcrumb-item"),U=o("breadcrumb"),v=o("form-field"),h=o("row"),D=o("cfilter"),C=o("ccolumn"),F=o("table-action-edit"),G=o("table-action-delete"),K=o("ctable"),O=o("card"),j=o("page");return X(),Y(j,{title:e._lang.backoffice.settings.params.pageTitle},{breadcrumb:c(()=>[l(U,{"has-home":!0},{default:c(()=>[l(R,{label:e._lang.backoffice.settings.params.breadcrumbTitle},null,8,["label"])]),_:1})]),default:c(()=>[l(O,{shadow:!0},{body:c(()=>[l(D,{title:e._lang.common.filter,disabled:a(r),"clear-click":T,"apply-click":S,loading:a(r),collapsed:!0},{default:c(()=>[l(h,null,{default:c(()=>[l(v,{id:"parameterIds",modelValue:a(n).parameterId,"onUpdate:modelValue":s[0]||(s[0]=t=>a(n).parameterId=t),class:"mb-3 col-12 col-md-6",label:e._lang.label.id,type:a(f).inputs.number,maxlength:45,disabled:a(r)},null,8,["modelValue","label","type","disabled"]),l(v,{id:"parameterLevel1",modelValue:a(n).name,"onUpdate:modelValue":s[1]||(s[1]=t=>a(n).name=t),class:"mb-3 col-12 col-md-6",label:e._lang.label.name,type:a(f).inputs.text,maxlength:45,disabled:a(r)},null,8,["modelValue","label","type","disabled"])]),_:1})]),_:1},8,["title","disabled","loading"]),l(Z,null,{default:c(()=>[l(K,{onSort:A,onChangePage:E,selectedItems:a(u),"onUpdate:selectedItems":s[2]||(s[2]=t=>_(u)?u.value=t:u=t),unselectedItems:a(p),"onUpdate:unselectedItems":s[3]||(s[3]=t=>_(p)?p.value=t:p=t),selectedState:a(b),"onUpdate:selectedState":s[4]||(s[4]=t=>_(b)?b.value=t:b=t),data:a(I),checkbox:!1,loading:a(r),defaultSort:"parameterId"},{columns:c(()=>[l(C,{name:e._lang.label.id,field:"parameterId",sortable:!0},null,8,["name"]),l(C,{name:e._lang.label.name,field:"name",sortable:!0},null,8,["name"])]),actions:c(t=>[l(F,{onClick:x=>M(t.item)},null,8,["onClick"]),l(G,{onClick:x=>N(t.item)},null,8,["onClick"])]),_:1},8,["selectedItems","unselectedItems","selectedState","data","loading"])]),_:1})]),_:1}),l(H,{"item-id":a(y),resource:e._lang.backoffice.settings.params,action:P,service:a(g)},null,8,["item-id","resource","service"])]),_:1},8,["title"])}}};export{re as default};
