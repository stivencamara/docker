import{g as G,i as I,r as w,H as m,k as o,c as A,l as R,m as s,p as l,q as e,A as n,t as i,J as U,u as p,R as B}from"./index-af43a57b.js";import{u as z}from"./users-311f2670.js";import{h as N,p as O}from"./form-77173580.js";import{_ as V}from"./cancel-confirm-3c568d61.js";import{u as K}from"./index.esm-26e5e98d.js";import"./helpers-0b287b89.js";import"./index.esm-7a0fc0c5.js";import"./users-6486a9b1.js";const Q={__name:"create",setup(P){const c=G(),d=I(),f="confirm-cancel";let r=w(!1),a=m({name:null,email:null,profiles:[],active:!0,isGraUser:!1,password:null}),S=m({name:null,email:null,profiles:[],active:!0,isGraUser:!1,password:null}),E=m(N.formRulesCreate(a.isGraUser)),u=K(E,a);function v(){p.compareObjectIsDirty(a,S)?p.showModalById(f):c.push({name:n.router.BACKOFFICE_SETTINGS_USERS_PAGE.name})}async function T(){if(r.value=!0,await u.value.$validate(),u.value.$error)B.warning(d.common.requiredFields);else{let t=await z.create(a);p.validateResponse(t,d.backoffice.settings.users.create.created,()=>{c.push({name:n.router.BACKOFFICE_SETTINGS_USERS_PAGE.name})})}r.value=!1}function h(){c.push({name:n.router.BACKOFFICE_SETTINGS_USERS_PAGE.name})}return(t,_)=>{const b=o("breadcrumb-item"),k=o("breadcrumb"),g=o("cbutton"),y=o("card"),F=o("page");return A(),R(F,{title:t._lang.backoffice.settings.users.create.pageTitle},{breadcrumb:s(()=>[l(k,{"has-home":!0},{default:s(()=>[l(b,{label:t._lang.backoffice.settings.users.pageTitle,"router-path":e(n).router.BACKOFFICE_SETTINGS_USERS_PAGE.path},null,8,["label","router-path"]),l(b,{label:t._lang.backoffice.settings.users.create.pageTitle},null,8,["label"])]),_:1})]),actions:s(()=>[l(g,{class:"col-12 col-sm-auto",type:e(i).buttonType.secondary,size:e(i).buttonSize.large,title:t._lang.common.cancel,onClick:v,disabled:e(r)},null,8,["type","size","title","disabled"]),l(g,{class:"col-12 col-sm-auto",title:t._lang.common.create,type:e(i).buttonType.primary,size:e(i).buttonSize.large,onClick:T,disabled:e(r)},null,8,["title","type","size","disabled"])]),default:s(()=>[l(y,{shadow:!0},{body:s(()=>[l(O,{modelValue:e(a),"onUpdate:modelValue":_[0]||(_[0]=C=>U(a)?a.value=C:a=C),required:!0,vuelidator:e(u),loading:e(r),isCreate:!0},null,8,["modelValue","vuelidator","loading"])]),_:1}),l(V,{id:f,title:t._lang.common.cancel,action:h},null,8,["title"])]),_:1},8,["title"])}}};export{Q as default};
