import{_ as se,a as ue,b as ce}from"./contacts-5142be00.js";import{i as P,r as C,j as w,u as s,N as G,s as t,k as p,c as h,l as L,w as I,n as l,p as e,I as B,O as H,P as W,_ as me,e as Q,m as ne,Q as ge,y as N,F as oe,h as pe,G as K,R as ae,S as be,T as Y,U as fe,M as J,K as X,g as Z,L as x,z as D}from"./index-a14ad215.js";import{u as j}from"./organization-4f7bdfd2.js";import{u as ee}from"./index.esm-97dcd533.js";import{b as E}from"./helpers-71142cd6.js";import{_ as ye}from"./address-809a8351.js";import{o as de}from"./helpers-d171baff.js";import{_ as ve,a as Ie}from"./refusal-4e803a93.js";import{r as _e}from"./index.esm-88a1129f.js";import{_ as Ve}from"./generic-90322b29.js";import{p as le}from"./point-of-care-4055b36e.js";import{p as ze}from"./helpers-bdeacb10.js";import{s as te}from"./service-a0c37778.js";import{s as Te}from"./helpers-11fd24aa.js";import{d as ie}from"./document-fd012777.js";import{d as Ce}from"./helpers-682b85b1.js";import{o as re}from"./organization-b89a586c.js";const Se={__name:"base-information",props:{modelValue:{type:Object,required:!0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},validateForm:{type:Boolean,default:!1},selectedLang:{type:[String,Number],required:!0},rules:{type:Object,default:{}},canCreate:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(v,{emit:d}){const o=v,c=j(),y=P(),i=ee(o.rules,o.modelValue);let r=C(!0),u=C(!1);const n=w({get(){return o.modelValue},set(m){d("update:modelValue",m)}}),T=w(()=>s.convertEnumToArray(y.enums.groupType)),V=w(()=>o.selectedLang),S=w({get(){return E.getFieldByLangAndName(n.value,V.value,"abreviation")},set(m){E.setFieldByLangAndName(n.value,V.value,"abreviation",m)}}),b=w({get(){return E.getFieldByLangAndName(n.value,V.value,"name")},set(m){E.setFieldByLangAndName(n.value,V.value,"name",m)}});G(()=>n.value.groupName,()=>{F()}),G(()=>i.value.$error,()=>{i.value.$error&&(r.value=!0)}),G(()=>n.value.startDate,(m,a)=>{new Date(m)>new Date(n.value.endDate)&&(n.value.endDate=null)});let g=C([]);function F(){switch(u.value=!1,n.value.groupName||(n.value.organizationTypeId=null),n.value.groupName){case t.organizationGroupType.notApplicable:case t.organizationGroupType.folder:g.value=[{label:y.enums.objectType[1],value:1}],n.value.organizationTypeId=1,u.value=!0;break;case t.organizationGroupType.regionalPublicAdministration:g.value=c.organizationRegionalPublicAdministrationTypeList;break;case t.organizationGroupType.localAuthorities:g.value=c.organizationLocalAuthoritiesTypeList;break;case t.organizationGroupType.legislativeAssembly:g.value=c.organizationLegislativeAssemblyTypeList;break;case t.organizationGroupType.regionalPublicBusinessSector:g.value=c.organizationRegionalPublicBusinessSectorTypeList;break}}w(()=>o.modelValue.recordStateTypeId);const z=w(()=>o.selectedLang===t.language.en);return(m,a)=>{const _=p("form-field"),k=p("row"),A=p("accordion");return h(),L(A,{id:"base-information",title:m._lang.common.baseInformation,collapsed:e(r),class:"mb-4"},{default:I(()=>[l(k,null,{default:I(()=>[l(_,{id:"code",class:"mb-3 col-12 col-md-6 col-lg-4",modelValue:e(n).code,"onUpdate:modelValue":a[0]||(a[0]=f=>e(n).code=f),label:m._lang.label.entityCode,disabled:!0,loading:o.loading,type:e(t).inputs.text,maxlength:45,required:o.validateForm,showError:o.validateForm&&e(i).code.$error,"error-message":m._errorMessageField(e(i).code)},null,8,["modelValue","label","loading","type","required","showError","error-message"]),l(_,{id:"state",class:"mb-3 col-12 col-md-6 col-lg-4",modelValue:m._lang.enums.recordStateType[e(n).recordStateTypeId],"onUpdate:modelValue":a[1]||(a[1]=f=>m._lang.enums.recordStateType[e(n).recordStateTypeId]=f),label:m._lang.label.state,disabled:!0,loading:o.loading,type:e(t).inputs.text},null,8,["modelValue","label","loading","type"]),l(_,{id:"nipc",class:"mb-3 col-12 col-lg-4",modelValue:e(n).nipc,"onUpdate:modelValue":a[2]||(a[2]=f=>e(n).nipc=f),label:m._lang.label.nipc,disabled:o.disabled||e(z),loading:o.loading,type:e(t).inputs.text,maxlength:9,required:o.validateForm,placeholder:"ex: 123456789",showError:o.validateForm&&e(i).nipc.$error,"error-message":m._errorMessageField(e(i).nipc),changeLogField:"Nipc",changeLog:e(n).changeLog,showDiference:e(n).recordStateTypeId==e(t).recordStateType.approval},null,8,["modelValue","label","disabled","loading","type","required","showError","error-message","changeLog","showDiference"])]),_:1}),l(k,null,{default:I(()=>[l(_,{id:"groupName",class:"mb-3 col-12 col-md-6 col-lg-4",modelValue:e(n).groupName,"onUpdate:modelValue":a[3]||(a[3]=f=>e(n).groupName=f),label:m._lang.label.groupName,disabled:o.disabled||e(z),loading:o.loading,type:e(t).inputs.multiselect,options:e(T),required:o.validateForm,showError:o.validateForm&&e(i).groupName.$error,"error-message":m._errorMessageField(e(i).groupName),changeLogField:"groupName",changeLog:e(n).changeLog,showDiference:e(n).recordStateTypeId==e(t).recordStateType.approval},null,8,["modelValue","label","disabled","loading","type","options","required","showError","error-message","changeLog","showDiference"]),l(_,{id:"organizationTypeId",class:"mb-3 col-12 col-md-6 col-lg-4",modelValue:e(n).organizationTypeId,"onUpdate:modelValue":a[4]||(a[4]=f=>e(n).organizationTypeId=f),label:m._lang.label.organizationTypeId,disabled:o.disabled||!e(n).groupName||e(z)||e(u),loading:o.loading,type:e(t).inputs.multiselect,options:e(g),required:o.validateForm,showError:o.validateForm&&e(i).organizationTypeId.$error,"error-message":m._errorMessageField(e(i).organizationTypeId),changeLogField:"organizationTypeId",changeLog:e(n).changeLog,showDiference:e(n).recordStateTypeId==e(t).recordStateType.approval},null,8,["modelValue","label","disabled","loading","type","options","required","showError","error-message","changeLog","showDiference"]),l(_,{id:"abreviation",class:"mb-3 col-12 col-lg-4",modelValue:e(S),"onUpdate:modelValue":a[5]||(a[5]=f=>B(S)?S.value=f:null),label:m._lang.label.abreviation,disabled:o.disabled,loading:o.loading,type:e(t).inputs.text,maxlength:45,language:e(V),changeLogField:"Texts[0].Abreviation",changeLog:e(n).changeLog,showDiference:e(n).recordStateTypeId==e(t).recordStateType.approval},null,8,["modelValue","label","disabled","loading","type","language","changeLog","showDiference"])]),_:1}),l(k,null,{default:I(()=>[l(_,{id:"name",class:"mb-3 col-12",modelValue:e(b),"onUpdate:modelValue":a[6]||(a[6]=f=>B(b)?b.value=f:null),label:m._lang.label.name,disabled:o.disabled,loading:o.loading,type:e(t).inputs.text,maxlength:255,required:o.validateForm,showError:o.validateForm&&m._showErrorFieldWhenTexts(e(i).texts,"name"),"error-message":m._errorMessageFieldWhenTexts(e(i).texts,"name"),language:e(V),changeLogField:"Texts[0].Name",changeLog:e(n).changeLog,showDiference:e(n).recordStateTypeId==e(t).recordStateType.approval},null,8,["modelValue","label","disabled","loading","type","required","showError","error-message","language","changeLog","showDiference"])]),_:1}),l(k,null,{default:I(()=>[l(_,{id:"parentOrganization",class:"mb-3 col-12 col-lg-4",modelValue:e(n).parentOrganization,"onUpdate:modelValue":a[7]||(a[7]=f=>e(n).parentOrganization=f),label:m._lang.label.parentOrganization,disabled:o.disabled||e(z),loading:o.loading,type:e(t).inputs.multiselect,required:o.validateForm,placeholder:m._lang.common.selectOption,showError:o.validateForm&&e(i).parentOrganization.$error,"error-message":m._errorMessageField(e(i).parentOrganization),options:e(c).organizationList,valueProp:e(t).multiselectValueProp.value3,changeLogField:"ParentOrganization",changeLog:e(n).changeLog,showDiference:e(n).recordStateTypeId==e(t).recordStateType.approval},null,8,["modelValue","label","disabled","loading","type","required","placeholder","showError","error-message","options","valueProp","changeLog","showDiference"]),l(_,{id:"startDate",class:"mb-3 col-12 col-md-6 col-lg-4",modelValue:e(n).startDate,"onUpdate:modelValue":a[8]||(a[8]=f=>e(n).startDate=f),label:m._lang.label.startDate,disabled:o.disabled||e(z),loading:o.loading,type:e(t).inputs.datepicker,required:o.validateForm,placeholder:"dd/mm/aaaa",showError:o.validateForm&&e(i).startDate.$error,"error-message":m._errorMessageField(e(i).startDate),changeLogField:"startDate",changeLog:e(n).changeLog,showDiference:e(n).recordStateTypeId==e(t).recordStateType.approval},null,8,["modelValue","label","disabled","loading","type","required","showError","error-message","changeLog","showDiference"]),l(_,{id:"endDate",class:"mb-3 col-12 col-md-6 col-lg-4",modelValue:e(n).endDate,"onUpdate:modelValue":a[9]||(a[9]=f=>e(n).endDate=f),label:m._lang.label.endDate,disabled:o.disabled||e(z),loading:o.loading,type:e(t).inputs.datepicker,placeholder:"dd/mm/aaaa",minDate:e(n).startDate,changeLogField:"endDate",changeLog:e(n).changeLog,showDiference:e(n).recordStateTypeId==e(t).recordStateType.approval},null,8,["modelValue","label","disabled","loading","type","minDate","changeLog","showDiference"]),H(l(_,{id:"organizationPublic",class:"mb-3 col-12 col-lg-4",modelValue:e(n).organizationPublic,"onUpdate:modelValue":a[10]||(a[10]=f=>e(n).organizationPublic=f),label:m._lang.label.public,disabled:o.disabled||e(z),loading:o.loading,type:e(t).inputs.checkbox,changeLogField:"organizationPublic",changeLog:e(n).changeLog,showDiference:e(n).recordStateTypeId==e(t).recordStateType.approval},null,8,["modelValue","label","disabled","loading","type","changeLog","showDiference"]),[[W,o.canCreate]]),H(l(_,{id:"canHavePointsOfCare",class:"mb-3 col-12 col-lg-4",modelValue:e(n).canHavePointsOfCare,"onUpdate:modelValue":a[11]||(a[11]=f=>e(n).canHavePointsOfCare=f),label:m._lang.label.canHavePointsOfCare,disabled:o.disabled||e(z),loading:o.loading,type:e(t).inputs.checkbox,changeLogField:"canHavePointsOfCare",changeLog:e(n).changeLog,showDiference:e(n).recordStateTypeId==e(t).recordStateType.approval},null,8,["modelValue","label","disabled","loading","type","changeLog","showDiference"]),[[W,o.canCreate]]),H(l(_,{id:"canHaveServices",class:"mb-3 col-12 col-lg-4",modelValue:e(n).canHaveServices,"onUpdate:modelValue":a[12]||(a[12]=f=>e(n).canHaveServices=f),label:m._lang.label.canHaveServices,disabled:o.disabled||e(z),loading:o.loading,type:e(t).inputs.checkbox,changeLogField:"canHaveServices",changeLog:e(n).changeLog,showDiference:e(n).recordStateTypeId==e(t).recordStateType.approval},null,8,["modelValue","label","disabled","loading","type","changeLog","showDiference"]),[[W,o.canCreate]])]),_:1})]),_:1},8,["title","collapsed"])}}},Fe={__name:"description",props:{modelValue:{type:Object,required:!0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},selectedLang:{type:[String,Number],required:!0},validateForm:{type:Boolean,default:!1},rules:{type:Object,default:{}},canCreate:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(v,{emit:d}){const o=v,c=j(),y=ee(o.rules,o.modelValue),i=w({get(){return o.modelValue},set(b){d("update:modelValue",b)}}),r=w(()=>o.selectedLang),u=w({get(){return E.getFieldByLangAndName(i.value,r.value,"description")},set(b){E.setFieldByLangAndName(i.value,r.value,"description",b)}}),n=w({get(){return E.getFieldByLangAndName(i.value,r.value,"legislation")},set(b){E.setFieldByLangAndName(i.value,r.value,"legislation",b)}}),T=w({get(){return E.getFieldByLangAndName(i.value,r.value,"mission")},set(b){E.setFieldByLangAndName(i.value,r.value,"mission",b)}}),V=w({get(){return E.getFieldByLangAndName(i.value,r.value,"keywords")},set(b){E.setFieldByLangAndName(i.value,r.value,"keywords",b)}}),S=w(()=>o.selectedLang===t.language.en);return(b,g)=>{const F=p("form-field"),z=p("accordion");return h(),L(z,{id:"description",title:b._lang.common.description,collapsed:!1,class:"mb-4"},{default:I(()=>[l(F,{id:"economicActivityId",class:"mb-3 col-12",modelValue:e(i).economicActivityId,"onUpdate:modelValue":g[0]||(g[0]=m=>e(i).economicActivityId=m),label:b._lang.label.economicActivityId,disabled:o.disabled||e(S),loading:o.loading,type:e(t).inputs.multiselect,options:e(c).economicActivityList,required:o.validateForm,showError:o.validateForm&&e(y).economicActivityId.$error,"error-message":b._errorMessageField(e(y).economicActivityId)},null,8,["modelValue","label","disabled","loading","type","options","required","showError","error-message"]),l(F,{id:"description",class:"mb-3 col-12",modelValue:e(u),"onUpdate:modelValue":g[1]||(g[1]=m=>B(u)?u.value=m:null),label:b._lang.label.description,disabled:o.disabled,loading:o.loading,type:e(t).inputs.text,maxlength:255,language:e(r)},null,8,["modelValue","label","disabled","loading","type","language"]),l(F,{id:"legislation",class:"mb-3 col-12",modelValue:e(n),"onUpdate:modelValue":g[2]||(g[2]=m=>B(n)?n.value=m:null),label:b._lang.label.legislation,disabled:o.disabled,loading:o.loading,type:e(t).inputs.text,maxlength:255,language:e(r)},null,8,["modelValue","label","disabled","loading","type","language"]),l(F,{id:"mission",class:"mb-3 col-12",modelValue:e(T),"onUpdate:modelValue":g[3]||(g[3]=m=>B(T)?T.value=m:null),label:b._lang.label.mission,disabled:o.disabled,loading:o.loading,type:e(t).inputs.text,maxlength:255,language:e(r)},null,8,["modelValue","label","disabled","loading","type","language"]),l(F,{id:"keyWords",class:"mb-3 col-12",modelValue:e(V),"onUpdate:modelValue":g[4]||(g[4]=m=>B(V)?V.value=m:null),label:b._lang.label.keyWords,disabled:o.disabled,loading:o.loading,type:e(t).inputs.text,maxlength:255,language:e(r)},null,8,["modelValue","label","disabled","loading","type","language"]),l(F,{id:"logo",class:"mb-3 col-12",modelValue:e(i).icon,"onUpdate:modelValue":g[5]||(g[5]=m=>e(i).icon=m),label:b._lang.label.logo,disabled:o.disabled,loading:o.loading,type:e(t).inputs.file,required:!1,showPreview:!0,accept:".jpeg,.svg,.jpg"},null,8,["modelValue","label","disabled","loading","type"])]),_:1},8,["title"])}}},he={__name:"territorial-scope",props:{modelValue:{type:Object,required:!0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},validateForm:{type:Boolean,default:!1},canCreate:{type:Boolean,default:!1},rules:{type:Object,default:{}}},emits:["update:modelValue"],setup(v,{emit:d}){const o=v,c=ee(o.rules,o.modelValue),y=j(),i=P(),r=w({get(){return o.modelValue},set(V){d("update:modelValue",V)}});let u=C([]),n=C(!1);G(()=>r.value.divisionTypeId,()=>{T()});function T(){(!r.value.divisionTypeId||n.value)&&(r.value.divisionId=null),r.value.divisionTypeId===t.divisionType.notApplicable?(r.value.divisionId=t.divisionType.notApplicable,u.value=[{label:i.enums.objectType[t.divisionType.notApplicable],value:t.divisionType.notApplicable}]):r.value.divisionTypeId===t.divisionType.island?u.value=y.divisionIslandList:r.value.divisionTypeId===t.divisionType.county?u.value=y.divisionCountyList:r.value.divisionTypeId===t.divisionType.parish&&(u.value=y.divisionParishList),n.value=!0}return(V,S)=>{const b=p("form-field"),g=p("row"),F=p("accordion");return h(),L(F,{id:"territorial-scope",title:V._lang.backoffice.entities.territorialScope,collapsed:!1,class:"mb-4"},{default:I(()=>[l(g,null,{default:I(()=>[l(b,{id:"divisionTypeId",class:"mb-3 col-12 col-md-6",modelValue:e(r).divisionTypeId,"onUpdate:modelValue":S[0]||(S[0]=z=>e(r).divisionTypeId=z),label:V._lang.label.divisionTypeId,disabled:o.disabled,loading:o.loading,type:e(t).inputs.multiselect,required:o.validateForm,showError:o.validateForm&&e(c).divisionTypeId.$error,"error-message":V._errorMessageField(e(c).divisionTypeId),options:e(y).divisionTypeList},null,8,["modelValue","label","disabled","loading","type","required","showError","error-message","options"]),l(b,{id:"divisionId",class:"mb-3 col-12 col-md-6",modelValue:e(r).divisionId,"onUpdate:modelValue":S[1]||(S[1]=z=>e(r).divisionId=z),label:V._lang.label.divisionId,disabled:o.disabled||e(r).divisionTypeId===e(t).notApplicable,loading:o.loading,type:e(t).inputs.multiselect,required:o.validateForm,showError:o.validateForm&&e(c).divisionId.$error,"error-message":V._errorMessageField(e(c).divisionId),options:e(u)},null,8,["modelValue","label","disabled","loading","type","required","showError","error-message","options"])]),_:1})]),_:1},8,["title"])}}};const ke={key:0,class:"input-group mb-3"},Le=["aria-describedby"],we=["id","disabled"],Oe={__name:"address",props:{modelValue:{type:Object,required:!0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},validateForm:{type:Boolean,default:!1},rules:{type:Object,default:{}},vuelidate:{type:Object,default:null},canCreate:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(v,{emit:d}){const o=v,c=j(),y=s.uuid();let i=C(0),r=C(0),u=C(null);const n=C(!1);C(!1);const T=w({get(){return o.modelValue},set(g){d("update:modelValue",g)}}),V="search-location";function S(g){Object.assign(T.value.address,g),i.value++,u.value.updateMap()}function b(){r.value++,window.setTimeout(function(){s.showModalById(V)},5)}return G(T.value,g=>{g.address.locationId!=null&&(n.value?(g.address.locationId=null,g.address.code=null,n.value=!1):n.value=!0)}),(g,F)=>{const z=p("icon-search"),m=p("accordion");return h(),Q(oe,null,[l(m,{id:"address-accordion",title:g._lang.backoffice.entities.address,collapsed:!1,class:"mb-4"},{default:I(()=>[o.canCreate?(h(),Q("div",ke,[H(ne("input",{ref:"locationQuery",id:"location-query",type:"text",class:"form-control",placeholder:"Código do património","aria-label":"placeholder","aria-describedby":e(y),disabled:"","onUpdate:modelValue":F[0]||(F[0]=a=>e(T).address.code=a)},null,8,Le),[[ge,e(T).address.code]]),ne("button",{class:"btn btn-primary",type:"button",id:e(y),disabled:o.disabled,onClick:b},[l(z,{color:"#FFF"})],8,we)])):N("",!0),(h(),L(ye,{key:e(i),ref_key:"addressRef",ref:u,modelValue:e(T).address,"onUpdate:modelValue":F[1]||(F[1]=a=>e(T).address=a),disabled:o.disabled,rules:o.rules,loading:o.loading,"validate-form":o.validateForm,store:e(c),vuelidate:o.vuelidate},null,8,["modelValue","disabled","rules","loading","validate-form","store","vuelidate"]))]),_:1},8,["title"]),(h(),L(se,{key:e(r),onApply:S}))],64)}}},Ee=me(Oe,[["__scopeId","data-v-939c5a41"]]),Ae={__name:"create",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(v,{emit:d}){const o=v,c=j(),y=P();pe();const i="create-related-entity";let r=K(V()),u=C(!1);const n=ee(de.organizationRelatedFormRules(),r,{$scope:!1}),T=w({get(){return o.modelValue},set(g){d("update:modelValue",g)}});function V(){return{organizationId:null,organizationRelatedTypeId:null}}function S(){r=Object.assign(r,V()),n.value.$reset()}async function b(){if(u.value=!0,await n.value.$validate(),!n.value.$error){const g={organizationId:r.organizationId,organizationName:E.getLabel(c.organizationList,r.organizationId),organizationRelatedTypeId:r.organizationRelatedTypeId,organizationRelatedTypeName:E.getLabel(c.organizationRelatedTypeList,r.organizationRelatedTypeId)};T.value.find(z=>z.organizationId===r.organizationId&&z.organizationRelatedTypeId===r.organizationRelatedTypeId)?ae.warning(y.backoffice.entities.relatedOrganizationExists):(T.value.push(g),r=Object.assign(r,V()),n.value.$reset(),s.closeModalById(i),ae.success(y.backoffice.entities.relatedOrganizationAdded))}u.value=!1}return(g,F)=>{const z=p("form-field"),m=p("row"),a=p("cbutton"),_=p("modal");return h(),L(_,{id:i,title:g._lang.backoffice.entities.addRelatedOrganizations,size:e(t).modalSize.extraLarge},{body:I(()=>[l(m,null,{default:I(()=>[l(z,{id:"name",class:"mb-3 mb-lg-0 col-12 col-md-12 col-lg-6",modelValue:e(r).organizationId,"onUpdate:modelValue":F[0]||(F[0]=k=>e(r).organizationId=k),label:g._lang.label.organization,loading:e(u),type:e(t).inputs.multiselect,required:!0,"show-error":e(n).organizationId.$error,"error-message":g._errorMessageField(e(n).organizationId),options:e(c).organizationList,valueProp:e(t).multiselectValueProp.value3},null,8,["modelValue","label","loading","type","show-error","error-message","options","valueProp"]),l(z,{id:"relationshipType",class:"mb-3 mb-lg-0 col-12 col-md-12 col-lg-6",modelValue:e(r).organizationRelatedTypeId,"onUpdate:modelValue":F[1]||(F[1]=k=>e(r).organizationRelatedTypeId=k),label:g._lang.label.relationshipType,loading:e(u),type:e(t).inputs.multiselect,required:!0,"show-error":e(n).organizationRelatedTypeId.$error,"error-message":g._errorMessageField(e(n).organizationRelatedTypeId),options:e(c).organizationRelatedTypeList},null,8,["modelValue","label","loading","type","show-error","error-message","options"])]),_:1})]),footer:I(()=>[l(a,{title:g._lang.common.cancel,type:e(t).buttonType.secondary,"data-bs-dismiss":"modal","aria-label":"Close",disabled:e(u),onClick:S},null,8,["title","type","disabled"]),l(a,{title:g._lang.common.save,onClick:b,disabled:e(u)},null,8,["title","disabled"])]),_:1},8,["title","size"])}}},Be={__name:"related-entities",props:{modelValue:{type:Array,required:!0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},rules:{type:Object,default:{}},validateForm:{type:Boolean,default:!1},canCreate:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(v,{emit:d}){const o=v,c=P();let y=C(!1);const i=w(()=>s.createEmptyDataSource(u.value)),r="confirm-delete",u=w({get(){return o.modelValue},set(b){d("update:modelValue",b)}});let n=C(null);function T(b){n.value=b}function V(){n.value&&(s.removeItemOfArray(u.value,n),ae.success(c.backoffice.entities.organizationRelatedRemoved),n.value=null)}function S(b){s.sortArrayOffline(b,i.value.items)}return(b,g)=>{const F=p("table-actions"),z=p("ccolumn"),m=p("table-action-delete"),a=p("ctable"),_=p("confirm-delete-modal");return h(),Q(oe,null,[l(fe,{id:"related-entities",title:b._lang.backoffice.entities.relatedEntities,collapsed:!1,class:"mb-4"},{default:I(()=>[H(l(F,null,{default:I(()=>[l(be,{target:"create-related-entity",class:"d-inline",type:e(t).buttonType.secondary,title:b._lang.common.toAdd,disabled:o.disabled,icon:Y},null,8,["type","title","disabled"])]),_:1},512),[[W,o.canCreate]]),l(a,{data:e(i),loading:e(y),checkbox:!1,showPagination:!1,onSort:S},{columns:I(()=>[l(z,{name:b._lang.common.organization,fieldSort:"organizationId",field:"organizationName",sortable:!0},null,8,["name"]),l(z,{name:b._lang.backoffice.entities.relationshipType,field:"organizationRelatedTypeName",fieldSort:"organizationRelatedTypeId",sortable:!0},null,8,["name"])]),actions:I(k=>[l(m,{id:r,onClick:A=>T(k.item),disabled:o.disabled},null,8,["onClick","disabled"])]),_:1},8,["data","loading"])]),_:1},8,["title"]),l(Ae,{modelValue:e(u),"onUpdate:modelValue":g[0]||(g[0]=k=>B(u)?u.value=k:null)},null,8,["modelValue"]),l(_,{id:r,title:b._lang.backoffice.entities.deleteOrganizationRelated,message:b._lang.backoffice.entities.deleteOrganizationRelatedQuestion,action:V},null,8,["title","message"])],64)}}},Ne={__name:"general",props:{modelValue:{type:Object,required:!0},selectedLang:_e,disabled:{Boolean,default:!0},rules:{Boolean,default:!0},validateForm:{Boolean,default:!1},canCreate:{Boolean,default:!1},loading:{Object,default:{}},vuelidate:{Object,default:null}},setup(v){const d=v,o=j(),c=w({get(){return d.modelValue},set(r){emit("update:modelValue",r)}}),y=w(()=>d.selectedLang),i=w(()=>d.selectedLang===t.language.en);return(r,u)=>(h(),Q(oe,null,[l(ve,{modelValue:e(c),"onUpdate:modelValue":u[0]||(u[0]=n=>B(c)?c.value=n:null),store:e(o)},null,8,["modelValue","store"]),l(e(Se),{modelValue:e(c),"onUpdate:modelValue":u[1]||(u[1]=n=>B(c)?c.value=n:null),disabled:d.disabled,loading:v.loading,selectedLang:e(y),validateForm:d.validateForm,rules:d.rules,canCreate:d.canCreate},null,8,["modelValue","disabled","loading","selectedLang","validateForm","rules","canCreate"]),l(e(Fe),{modelValue:e(c),"onUpdate:modelValue":u[2]||(u[2]=n=>B(c)?c.value=n:null),disabled:d.disabled,loading:v.loading,selectedLang:e(y),validateForm:d.validateForm,rules:d.rules,canCreate:d.canCreate},null,8,["modelValue","disabled","loading","selectedLang","validateForm","rules","canCreate"]),l(e(he),{modelValue:e(c),"onUpdate:modelValue":u[3]||(u[3]=n=>B(c)?c.value=n:null),disabled:d.disabled||e(i),loading:v.loading,validateForm:d.validateForm,rules:d.rules,selectedLang:e(y),canCreate:d.canCreate},null,8,["modelValue","disabled","loading","validateForm","rules","selectedLang","canCreate"]),l(e(Ee),{modelValue:e(c),"onUpdate:modelValue":u[4]||(u[4]=n=>B(c)?c.value=n:null),disabled:d.disabled||e(i),loading:v.loading,rules:d.rules,validateForm:d.validateForm,vuelidate:d.vuelidate,canCreate:d.canCreate},null,8,["modelValue","disabled","loading","rules","validateForm","vuelidate","canCreate"]),l(e(ce),{modelValue:e(c).contacts,"onUpdate:modelValue":u[5]||(u[5]=n=>e(c).contacts=n),disabled:d.disabled||e(i),modal:ue,store:e(o),loading:v.loading,canCreate:d.canCreate},null,8,["modelValue","disabled","store","loading","canCreate"]),l(e(Be),{modelValue:e(c).organizationRelated,"onUpdate:modelValue":u[6]||(u[6]=n=>e(c).organizationRelated=n),disabled:d.disabled||e(i),loading:v.loading,canCreate:d.canCreate},null,8,["modelValue","disabled","loading","canCreate"]),l(e(Ie),{modelValue:e(c),"onUpdate:modelValue":u[7]||(u[7]=n=>B(c)?c.value=n:null),disabled:d.disabled,loading:v.loading,selectedLang:e(y),rules:d.rules.baseInformations,canCreate:d.canCreate},null,8,["modelValue","disabled","loading","selectedLang","rules","canCreate"]),l(Ve,{modelValue:e(c),"onUpdate:modelValue":u[8]||(u[8]=n=>B(c)?c.value=n:null),disabled:d.disabled,loading:v.loading,selectedLang:e(y),canCreate:d.canCreate},null,8,["modelValue","disabled","loading","selectedLang","canCreate"])],64))}},De={__name:"points-of-care",props:{organizationId:{type:[Number,String],required:!0},organizationVersion:{type:[Number,String],required:!0},disabled:{Boolean,default:!0}},setup(v){const d=v,o=C(J.havePermission(t.permissions.organization.createEdit));X(async()=>{await S(),T.value=s.convertEnumToArray(c.enums.recordStateType),n.value=s.concatItemsBadge(T.value,E.recordStateTypeBadgeOptions)});const c=P(),y=Z();let i=C(!1),r=K(V()),u=C(s.createEmptyDataSource()),n=C([]),T=C([]);function V(){return{pageNumber:0,sortBy:"Code",code:null,channelTypeIds:null,abreviation:null,name:null,organization:{id:d.organizationId,version:null},organizationHostId:null,recordStateIds:null,active:!0}}async function S(){i.value=!0;let a=await le.search(r);s.validateResponse(a,null,()=>{u.value=a.data}),i.value=!1}async function b(a){r.sortBy=a,await S()}async function g(a){r.pageNumber=a,await S()}function F(a){y.push({name:D.router.BACKOFFICE_DETAIL_POINT_OF_CARE_PAGE.name,params:{pointOfCareId:s.encodeId(a.pointOfCareId),pointOfCareVersion:s.encodeId(a.pointOfCareVersion)}})}async function z(){i.value=!0;const a={id:d.organizationId,version:d.organizationVersion},_=await le.create(ze.newForm(a));s.validateResponseAsync(_,null,async()=>{const k=s.encodeId(_.data.pointOfCareId),A=s.encodeId(_.data.pointOfCareVersion);y.push({name:D.router.BACKOFFICE_EDIT_ENTITY_POINT_OF_CARE_PAGE.name,params:{pointOfCareId:k,pointOfCareVersion:A,organizationId:s.encodeId(d.organizationId),organizationVersion:s.encodeId(d.organizationVersion)}})}),i.value=!1}function m(a){y.push({name:D.router.BACKOFFICE_EDIT_ENTITY_POINT_OF_CARE_PAGE.name,params:{pointOfCareId:s.encodeId(a.pointOfCareId),pointOfCareVersion:s.encodeId(a.pointOfCareVersion),organizationId:s.encodeId(d.organizationId),organizationVersion:s.encodeId(d.organizationVersion)}})}return(a,_)=>{const k=p("cbutton"),A=p("table-actions"),f=p("ccolumn"),$=p("table-action-edit"),q=p("table-action-detail"),R=p("ctable"),U=p("container-wrapper");return h(),L(U,null,{default:I(()=>[o.value?(h(),L(A,{key:0},{default:I(()=>[l(k,{class:"col-12 col-sm-auto",type:e(t).buttonType.secondary,size:e(t).buttonSize.medium,title:a._lang.common.toAdd,icon:Y,onClick:z},null,8,["type","size","title"])]),_:1})):N("",!0),l(R,{onSort:b,onChangePage:g,data:e(u),checkbox:!1,loading:e(i),defaultSort:"pointOfCareId"},{columns:I(()=>[l(f,{name:a._lang.label.code,field:"code",sortable:!0},null,8,["name"]),l(f,{name:a._lang.label.channelTypeId,field:"channelTypeId",sortField:"channelTypeId",sortable:!0},null,8,["name"]),l(f,{name:a._lang.label.abreviation,field:"abreviation",sortable:!0},null,8,["name"]),l(f,{name:a._lang.label.name,field:"name",sortable:!0},null,8,["name"]),l(f,{name:a._lang.label.state,field:"recordStateTypeId",sortField:"recordStateTypeId",align:e(t).columnAlign.center,custom:x,options:e(n),sortable:!0},null,8,["name","align","options"])]),actions:I(O=>[O.item.recordStateTypeId==e(t).recordStateType.draft?(h(),L($,{key:0,onClick:M=>m(O.item)},null,8,["onClick"])):N("",!0),O.item.recordStateTypeId>e(t).recordStateType.draft?(h(),L(q,{key:1,onClick:M=>F(O.item)},null,8,["onClick"])):N("",!0)]),_:1},8,["data","loading"])]),_:1})}}},Pe={__name:"services",props:{organizationId:{type:[Number,String],required:!0},organizationVersion:{type:[Number,String],required:!0},disabled:{Boolean,default:!0}},setup(v){const d=v,o=C(J.havePermission(t.permissions.organization.createEdit));X(async()=>{await S(),T.value=s.convertEnumToArray(c.enums.recordStateType),n.value=s.concatItemsBadge(T.value,E.recordStateTypeBadgeOptions)});const c=P(),y=Z();let i=C(!1),r=K(V()),u=C(s.createEmptyDataSource()),n=C([]),T=C([]);function V(){return{pageNumber:0,sortBy:"Code",code:null,channelTypeIds:null,abreviation:null,name:null,organization:{id:d.organizationId,version:null},organizationHostId:null,recordStateIds:null,active:!0}}async function S(){i.value=!0;let a=await te.search(r);s.validateResponse(a,null,()=>{u.value=a.data}),i.value=!1}async function b(a){r.sortBy=a,await S()}async function g(a){r.pageNumber=a,await S()}function F(a){y.push({name:D.router.BACKOFFICE_DETAIL_SERVICE_PAGE.name,params:{serviceId:s.encodeId(a.serviceId),serviceVersion:s.encodeId(a.serviceVersion)}})}async function z(){i.value=!0;const a={id:d.organizationId,version:d.organizationVersion},_=await te.create(Te.newForm(a));s.validateResponseAsync(_,null,async()=>{const k=s.encodeId(_.data.serviceId),A=s.encodeId(_.data.serviceVersion);y.push({name:D.router.BACKOFFICE_EDIT_ENTITY_SERVICE_PAGE.name,params:{serviceId:k,serviceVersion:A,organizationId:s.encodeId(d.organizationId),organizationVersion:s.encodeId(d.organizationVersion)}})}),i.value=!1}function m(a){y.push({name:D.router.BACKOFFICE_EDIT_ENTITY_SERVICE_PAGE.name,params:{serviceId:s.encodeId(a.serviceId),serviceVersion:s.encodeId(a.serviceVersion),organizationId:s.encodeId(d.organizationId),organizationVersion:s.encodeId(d.organizationVersion)}})}return(a,_)=>{const k=p("cbutton"),A=p("table-actions"),f=p("ccolumn"),$=p("table-action-edit"),q=p("table-action-detail"),R=p("ctable"),U=p("container-wrapper");return h(),L(U,null,{default:I(()=>[o.value?(h(),L(A,{key:0},{default:I(()=>[l(k,{class:"col-12 col-sm-auto",type:e(t).buttonType.secondary,size:e(t).buttonSize.medium,title:a._lang.common.toAdd,icon:Y,onClick:z},null,8,["type","size","title"])]),_:1})):N("",!0),l(R,{onSort:b,onChangePage:g,data:e(u),checkbox:!1,loading:e(i),defaultSort:"code"},{columns:I(()=>[l(f,{name:a._lang.label.code,field:"code",sortable:!0},null,8,["name"]),l(f,{name:a._lang.label.serviceTypeId,field:"serviceType",sortField:"serviceTypeId",sortable:!0},null,8,["name"]),l(f,{name:a._lang.label.abreviation,field:"abreviation",sortable:!0},null,8,["name"]),l(f,{name:a._lang.label.name,field:"name",sortable:!0},null,8,["name"]),l(f,{name:a._lang.label.state,field:"recordStateTypeId",align:e(t).columnAlign.center,custom:x,options:e(n),sortable:!0},null,8,["name","align","options"])]),actions:I(O=>[O.item.recordStateTypeId==e(t).recordStateType.draft?(h(),L($,{key:0,onClick:M=>m(O.item)},null,8,["onClick"])):N("",!0),O.item.recordStateTypeId>e(t).recordStateType.draft?(h(),L(q,{key:1,onClick:M=>F(O.item)},null,8,["onClick"])):N("",!0)]),_:1},8,["data","loading"])]),_:1})}}},$e={__name:"documents",props:{organizationId:{type:[Number,String],required:!0},organizationVersion:{type:[Number,String],required:!0},disabled:{Boolean,default:!0}},setup(v){const d=v,o=C(J.havePermission(t.permissions.organization.createEdit));X(async()=>{await S(),T.value=s.convertEnumToArray(c.enums.recordStateType),n.value=s.concatItemsBadge(T.value,E.recordStateTypeBadgeOptions)});const c=P(),y=Z();let i=C(!1),r=K(V()),u=C(s.createEmptyDataSource()),n=C([]),T=C([]);function V(){return{pageNumber:0,sortBy:"Code",code:null,documentTypeIds:null,abreviation:null,name:null,recordStateIds:null,active:!0,organization:{id:d.organizationId,version:null}}}async function S(){i.value=!0;let a=await ie.search(r);s.validateResponse(a,null,()=>{u.value=a.data}),i.value=!1}async function b(a){r.sortBy=a,await S()}async function g(a){r.pageNumber=a,await S()}function F(a){y.push({name:D.router.BACKOFFICE_DETAIL_DOCUMENT_PAGE.name,params:{documentId:s.encodeId(a.documentId),documentVersion:s.encodeId(a.documentVersion)}})}async function z(){i.value=!0;const a={id:d.organizationId,version:d.organizationVersion},_=await ie.create(Ce.newForm(a));s.validateResponseAsync(_,null,async()=>{const k=s.encodeId(_.data.documentId),A=s.encodeId(_.data.documentVersion);y.push({name:D.router.BACKOFFICE_EDIT_ENTITY_DOCUMENT_PAGE.name,params:{documentId:k,documentVersion:A,organizationId:s.encodeId(d.organizationId),organizationVersion:s.encodeId(d.organizationVersion)}})}),i.value=!1}function m(a){y.push({name:D.router.BACKOFFICE_EDIT_ENTITY_DOCUMENT_PAGE.name,params:{documentId:s.encodeId(a.documentId),documentVersion:s.encodeId(a.documentVersion),organizationId:s.encodeId(d.organizationId),organizationVersion:s.encodeId(d.organizationVersion)}})}return(a,_)=>{const k=p("cbutton"),A=p("table-actions"),f=p("ccolumn"),$=p("table-action-edit"),q=p("table-action-detail"),R=p("ctable"),U=p("container-wrapper");return h(),L(U,null,{default:I(()=>[o.value?(h(),L(A,{key:0},{default:I(()=>[l(k,{class:"col-12 col-sm-auto",type:e(t).buttonType.secondary,size:e(t).buttonSize.medium,title:a._lang.common.toAdd,icon:Y,onClick:z},null,8,["type","size","title"])]),_:1})):N("",!0),l(R,{onSort:b,onChangePage:g,data:e(u),checkbox:!1,loading:e(i),defaultSort:"code"},{columns:I(()=>[l(f,{name:a._lang.label.code,field:"code",sortable:!0},null,8,["name"]),l(f,{name:a._lang.label.documentTypeId,field:"documentType",sortField:"documentTypeId",sortable:!0},null,8,["name"]),l(f,{name:a._lang.label.abreviation,field:"abreviation",sortable:!0},null,8,["name"]),l(f,{name:a._lang.label.name,field:"name",sortable:!0},null,8,["name"]),l(f,{name:a._lang.label.state,field:"recordStateTypeId",align:e(t).columnAlign.center,custom:x,options:e(n),sortable:!0},null,8,["name","align","options"])]),actions:I(O=>[O.item.recordStateTypeId==e(t).recordStateType.draft?(h(),L($,{key:0,onClick:M=>m(O.item)},null,8,["onClick"])):N("",!0),O.item.recordStateTypeId>e(t).recordStateType.draft?(h(),L(q,{key:1,onClick:M=>F(O.item)},null,8,["onClick"])):N("",!0)]),_:1},8,["data","loading"])]),_:1})}}},qe={__name:"sub-entities",props:{organizationId:{type:[Number,String],required:!0},organizationVersion:{type:[Number,String],required:!0},disabled:{Boolean,default:!0}},setup(v){const d=v,o=C(J.havePermission(t.permissions.organization.createEdit));X(async()=>{await S(),T.value=s.convertEnumToArray(c.enums.recordStateType),n.value=s.concatItemsBadge(T.value,E.recordStateTypeBadgeOptions)});const c=P(),y=Z();let i=C(!1),r=K(V()),u=C(s.createEmptyDataSource()),n=C([]),T=C([]);function V(){return{pageNumber:0,sortBy:"Code",parentOrganization:{id:d.organizationId,version:null},active:!0}}async function S(){i.value=!0;let a=await re.search(r);s.validateResponse(a,null,()=>{u.value=a.data}),i.value=!1}async function b(a){r.sortBy=a,await S()}async function g(a){r.pageNumber=a,await S()}function F(a){y.push({name:D.router.BACKOFFICE_DETAIL_ENTITY_PAGE.name,params:{organizationId:s.encodeId(a.organizationId),organizationVersion:s.encodeId(a.organizationVersion)}})}async function z(){i.value=!0;const a={id:d.organizationId,version:d.organizationVersion},_=await re.create(de.newForm(a));s.validateResponseAsync(_,null,async()=>{y.push({name:D.router.BACKOFFICE_EDIT_ENTITY_PAGE.name,params:{organizationId:s.encodeId(_.data.organizationId),organizationVersion:s.encodeId(_.data.organizationVersion)}})}),i.value=!1}function m(a){y.push({name:D.router.BACKOFFICE_EDIT_ENTITY_PAGE.name,params:{organizationId:s.encodeId(a.organizationId),organizationVersion:s.encodeId(a.organizationVersion)}})}return(a,_)=>{const k=p("cbutton"),A=p("table-actions"),f=p("ccolumn"),$=p("table-action-edit"),q=p("table-action-detail"),R=p("ctable"),U=p("container-wrapper");return h(),L(U,null,{default:I(()=>[o.value?(h(),L(A,{key:0},{default:I(()=>[l(k,{class:"col-12 col-sm-auto",type:e(t).buttonType.secondary,size:e(t).buttonSize.medium,title:a._lang.common.toAdd,icon:Y,onClick:z},null,8,["type","size","title"])]),_:1})):N("",!0),l(R,{onSort:b,onChangePage:g,data:e(u),checkbox:!1,loading:e(i),defaultSort:"code"},{columns:I(()=>[l(f,{name:a._lang.label.code,field:"code",sortable:!0},null,8,["name"]),l(f,{name:a._lang.label.organizationTypeId,field:"organizationType",sortField:"organizationTypeId",sortable:!0},null,8,["name"]),l(f,{name:a._lang.label.abreviation,field:"abreviation",sortable:!0},null,8,["name"]),l(f,{name:a._lang.common.name,field:"name",sortable:!0},null,8,["name"]),l(f,{name:a._lang.label.parentOrganization,field:"organizationParent",sortField:"organizationParentId",sortable:!0},null,8,["name"]),l(f,{name:a._lang.common.state,field:"recordStateTypeId",align:e(t).columnAlign.center,custom:x,options:e(n),sortable:!0},null,8,["name","align","options"])]),actions:I(O=>[O.item.recordStateTypeId==e(t).recordStateType.draft?(h(),L($,{key:0,onClick:M=>m(O.item)},null,8,["onClick"])):N("",!0),O.item.recordStateTypeId>e(t).recordStateType.draft?(h(),L(q,{key:1,onClick:M=>F(O.item)},null,8,["onClick"])):N("",!0)]),_:1},8,["data","loading"])]),_:1})}}},na={__name:"form",props:{formModel:{Object,required:!0},selectedLang:{type:[Number,String],required:!0},loading:{type:Boolean,required:!0},disabled:{type:Boolean,required:!0},validateForm:{type:Boolean,required:!0},rules:{type:Object,required:!0},organizationId:{type:[Number,String],required:!0},organizationVersion:{type:[Number,String],required:!0},progressValue:{type:[Number],required:!1},showProgress:{type:Boolean,default:!0},canCreate:{type:Boolean,default:!1},vuelidate:{Object,default:null}},emits:["update:formModel"],setup(v,{emit:d}){const o=v,c=w({get(){return o.formModel},set(y){d("update:formModel",y)}});return(y,i)=>{const r=p("progress-bar"),u=p("container-wrapper"),n=p("tab-content"),T=p("tabs");return h(),L(T,null,{default:I(()=>[l(n,{id:"general",title:y._lang.common.general,active:!0},{default:I(()=>[l(u,{"margin-top":!1},{default:I(()=>[o.showProgress?(h(),L(r,{key:0,value:o.progressValue,label:y._lang.common.fill,class:"mb-4 col-12 float-end"},null,8,["value","label"])):N("",!0)]),_:1}),l(Ne,{modelValue:e(c),"onUpdate:modelValue":i[0]||(i[0]=V=>B(c)?c.value=V:null),disabled:o.disabled,loading:o.loading,selectedLang:o.selectedLang,validateForm:o.validateForm,rules:o.rules,vuelidate:o.vuelidate,canCreate:o.canCreate},null,8,["modelValue","disabled","loading","selectedLang","validateForm","rules","vuelidate","canCreate"])]),_:1},8,["title"]),l(n,{id:"pontosatendimento",title:y._lang.backoffice.menu.servicePoints,active:!1,disabled:!1},{default:I(()=>[l(De,{organizationId:v.organizationId,organizationVersion:v.organizationVersion,disabled:o.disabled},null,8,["organizationId","organizationVersion","disabled"])]),_:1},8,["title"]),l(n,{id:"servicos",title:y._lang.backoffice.menu.services,active:!1,disabled:!1},{default:I(()=>[l(Pe,{organizationId:v.organizationId,organizationVersion:v.organizationVersion,disabled:o.disabled},null,8,["organizationId","organizationVersion","disabled"])]),_:1},8,["title"]),l(n,{id:"documentos",title:y._lang.backoffice.menu.documents,active:!1,disabled:!1},{default:I(()=>[l($e,{organizationId:v.organizationId,organizationVersion:v.organizationVersion,disabled:o.disabled},null,8,["organizationId","organizationVersion","disabled"])]),_:1},8,["title"]),l(n,{id:"sub-entities",title:y._lang.backoffice.menu.subEntities,active:!1,disabled:!1},{default:I(()=>[l(qe,{organizationId:v.organizationId,organizationVersion:v.organizationVersion,disabled:o.disabled},null,8,["organizationId","organizationVersion","disabled"])]),_:1},8,["title"])]),_:1})}}};export{na as _};
