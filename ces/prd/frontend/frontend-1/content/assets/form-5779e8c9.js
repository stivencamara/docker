import{r as _,j as h,E as me,L as ae,t as c,u as I,k as d,c as O,l as U,m as y,p as l,q as e,J as M,z as P,i as J,h as pe,H as R,o as Y,R as H,W as Ve,N as re,e as W,S as ge,U as fe,V as be,F as te,v as ve,K as Se,A as ke,f as Ce,g as Ie,x as we,M as Le}from"./index-46c4d077.js";import{u as Z}from"./service-51912818.js";import{r as Oe}from"./index.esm-b6ca17d6.js";import{b as G}from"./helpers-27fc0e50.js";import{a as Te,_ as Fe}from"./address.vue_vue_type_style_index_0_scoped_5480b292_lang-fd5f0bc7.js";import{s as le}from"./service-edcd5951.js";import{_ as ye}from"./form-e71cf272.js";import{s as Ee}from"./settings-ebdc96d5.js";import{u as ue}from"./index.esm-f67cd286.js";import{s as Q}from"./helpers-20c31d0c.js";import{l as ce}from"./legislation-03a4027c.js";import{u as Be}from"./organization-24fa2b68.js";import{h as se}from"./helpers-af068aed.js";import{_ as he,a as Ue}from"./refusal-3203cb17.js";import{_ as $e}from"./generic-07e89e05.js";import{p as de}from"./point-of-care-222ccd8c.js";import{u as qe}from"./point-of-care-16c9f4ed.js";import{p as Ae}from"./helpers-b8cc9de1.js";const Me={__name:"description",props:{modelValue:{type:Object,required:!0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},selectedLang:{type:[String,Number],required:!0},validateForm:{type:Boolean,default:!1},rules:{type:Object,default:{}},vuelidate:{type:Object,default:null}},emits:["update:modelValue"],setup(w,{emit:r}){const n=w,t=Z();let b=_(!0),g=_([]);const a=h(()=>{let s=me.getUser();return!s||!s.name?!1:s.name.toLowerCase()==="guest"});ae(async()=>{a.value||await v()});const o=h({get(){return n.modelValue},set(s){r("update:modelValue",s)}}),u=h(()=>n.selectedLang),k=h({get(){return G.getFieldByLangAndName(o.value,u.value,"description")},set(s){G.setFieldByLangAndName(o.value,u.value,"description",s)}});h({get(){return G.getFieldByLangAndName(o.value,u.value,"serviceProcedure")},set(s){G.setFieldByLangAndName(o.value,u.value,"serviceProcedure",s)}});const p=h(()=>u.value===c.language.en);async function v(){b.value=!0;const s=await le.checklist();I.validateResponse(s,null,()=>{g.value=s.data}),b.value=!1}return(s,C)=>{const m=d("form-field"),V=d("row"),L=d("accordion");return O(),U(L,{id:"description",title:s._lang.common.description,collapsed:!1,class:"mb-4"},{default:y(()=>[l(V,null,{default:y(()=>{var T,F,N;return[l(m,{id:"economicActivityId",class:"mb-3 col-12",modelValue:e(o).economicActivityId,"onUpdate:modelValue":C[0]||(C[0]=i=>e(o).economicActivityId=i),label:s._lang.label.economicActivityId,disabled:n.disabled||e(p),loading:n.loading,type:e(c).inputs.multiselect,required:n.validateForm,placeholder:s._lang.common.selectOption,showError:n.validateForm&&((F=(T=n.vuelidate)==null?void 0:T.economicActivityId)==null?void 0:F.$error),"error-message":s._errorMessageField((N=n.vuelidate)==null?void 0:N.economicActivityId),options:e(t).economicActivityList},null,8,["modelValue","label","disabled","loading","type","required","placeholder","showError","error-message","options"])]}),_:1}),e(b)?P("",!0):(O(),U(m,{key:0,id:"description",class:"mb-3 col-12",modelValue:e(k),"onUpdate:modelValue":C[1]||(C[1]=T=>M(k)?k.value=T:null),label:s._lang.label.description,disabled:n.disabled,loading:n.loading,type:e(c).inputs.richtext,language:e(u),maxlength:4e3,templates:e(g)},null,8,["modelValue","label","disabled","loading","type","language","templates"]))]),_:1},8,["title"])}}},Ne={__name:"create",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(w,{emit:r}){const n=w,t=J();pe();const b="create-legislation";let g=_([]),a=R(Q.legislationNewForm()),o=_(!1),u=_(c.language.pt);const k=ue(Q.legislationFormRules(),a,{$scope:!1}),p=h({get(){return n.modelValue},set(m){r("update:modelValue",m)}});async function v(){o.value=!0;let m=await Ee.getLanguages();I.validateResponse(m,null,()=>{g.value=m.data}),o.value=!1}function s(){a=Object.assign(a,Q.legislationNewForm()),k.value.$reset()}async function C(){if(o.value=!0,await k.value.$validate(),!k.value.$error){const m={legislationId:a.legislationId,name:a.texts[0].name,code:a.code,document:a.document,texts:a.texts};p.value.find(L=>L.name===m.name&&L.description===m.description)?H.warning(t.backoffice.service.legislationExists):(p.value.push(m),a=Object.assign(a,Q.legislationNewForm()),k.value.$reset(),I.closeModalById(b),H.success(t.backoffice.service.legislationAdded))}o.value=!1}return Y(async()=>{await v()}),(m,V)=>{const L=d("lang-selector"),T=d("top-actions"),F=d("cbutton"),N=d("modal");return O(),U(N,{id:b,title:m._lang.backoffice.service.addLegislation,size:e(c).modalSize.extraLarge},{body:y(()=>[l(T,null,{default:y(()=>[l(L,{options:e(g),selectedLang:e(u),"onUpdate:selectedLang":V[0]||(V[0]=i=>M(u)?u.value=i:u=i),disabled:e(o)},null,8,["options","selectedLang","disabled"])]),_:1}),l(ye,{modelValue:e(a),"onUpdate:modelValue":V[1]||(V[1]=i=>M(a)?a.value=i:a=i),selectedLang:e(u),loading:e(o),disabled:e(o),vuelidate:e(k)},null,8,["modelValue","selectedLang","loading","disabled","vuelidate"])]),footer:y(()=>[l(F,{title:m._lang.common.cancel,type:e(c).buttonType.secondary,"data-bs-dismiss":"modal","aria-label":"Close",disabled:e(o),onClick:s},null,8,["title","type","disabled"]),l(F,{title:m._lang.common.save,onClick:C,disabled:e(o)},null,8,["title","disabled"])]),_:1},8,["title","size"])}}},je={__name:"search-legislation",props:{modelValue:{type:Object,required:!0},selectedLang:{type:[String,Number],required:!0},vuelidate:{type:Object,default:null}},emits:["update:modelValue","apply"],setup(w,{emit:r}){const n=w;Be();const t="search-legislation";let b=_(!1),g=_(0),a=_(!1),o=R(I.createEmptyDataSource()),u=R(C()),k=R(n.modelValue);ae(async()=>{await L()});const p=h({get(){return n.modelValue},set(i){r("update:modelValue",i)}});async function v(i){u.sortBy=i,await L()}async function s(i){u.pageIndex=i,await L()}function C(){return{pageNumber:1,sortBy:"legislationId",name:null,code:null}}async function m(){Object.assign(u,C()),await N()}async function V(){await L()}async function L(){b.value=!0,u.legislationId?u.legislationIds=[u.legislationId]:u.legislationIds=[];let i=await ce.search(u);I.validateResponse(i,null,()=>{o=i.data}),b.value=!1}async function T(i){const E=await ce.getById(i.legislationId,i.legislationVersion);I.validateResponse(E,null,()=>{Object.assign(k,E.data),p.value=E.data,a.value=!0}),g.value++}function F(){}function N(){r("apply")}return(i,E)=>{const $=d("form-field"),z=d("row"),K=d("cfilter"),D=d("ccolumn"),S=d("table-action-detail"),B=d("ctable"),f=d("accordion"),j=d("cbutton"),X=d("modal");return O(),U(X,{id:t,title:i._lang.backoffice.settings.legislation.searchTitle,size:e(c).modalSize.extraLarge,"remove-padding":!0},{body:y(()=>[l(K,{title:i._lang.common.filter,"clear-click":m,"apply-click":V,loading:e(b),collapsed:!1},{default:y(()=>[l(z,null,{default:y(()=>[l($,{id:"code-filter",class:"mb-3 col-12 col-md-6",label:i._lang.label.code,type:e(c).inputs.text,maxlength:45,modelValue:e(u).organizationId,"onUpdate:modelValue":E[0]||(E[0]=q=>e(u).organizationId=q)},null,8,["label","type","modelValue"]),l($,{id:"name-filter",class:"mb-3 col-12 col-md-6",label:i._lang.label.name,type:e(c).inputs.text,maxlength:45,modelValue:e(u).name,"onUpdate:modelValue":E[1]||(E[1]=q=>e(u).name=q)},null,8,["label","type","modelValue"])]),_:1})]),_:1},8,["title","loading"]),l(Ve,null,{default:y(()=>[l(B,{onSort:v,onChangePage:s,data:e(o),loading:e(b),checkbox:!1},{columns:y(()=>[l(D,{name:i._lang.label.code,field:"code",sortable:!0},null,8,["name"]),l(D,{name:i._lang.label.name,field:"name",sortable:!0},null,8,["name"])]),actions:y(q=>[l(S,{onClick:x=>T(q.item)},null,8,["onClick"])]),_:1},8,["data","loading"])]),_:1}),(O(),U(f,{id:"legislation",title:i._lang.backoffice.entities.legislation,collapsed:e(a),class:"mt-4",key:e(g)},{default:y(()=>[l(ye,{modelValue:e(k),"onUpdate:modelValue":E[2]||(E[2]=q=>M(k)?k.value=q:k=q),disabled:!1,validateForm:!1,vuelidate:n.vuelidate,selectedLang:n.selectedLang},null,8,["modelValue","vuelidate","selectedLang"])]),_:1},8,["title","collapsed"]))]),footer:y(()=>[l(j,{type:"primary",size:"large",title:i._lang.common.apply,"data-bs-dismiss":"modal",onClick:N},null,8,["title"]),l(j,{type:"secondary",size:"large",title:i._lang.common.cancel,"data-bs-dismiss":"modal",onClick:F},null,8,["title"])]),_:1},8,["title","size"])}}},ze={__name:"legislations",props:{modelValue:{type:Array,required:!0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},rules:{type:Object,default:{}},selectedLang:{type:[String,Number],required:!0}},emits:["update:modelValue"],setup(w,{emit:r}){const n=w,t=J();let b=_(!1),g=_(0),a=R(se.newForm()),o=R(se.formRules());const u=h(()=>I.createEmptyDataSource(v.value)),k=ue(o,a,{$scope:!1}),p="confirm-delete-legislation",v=h({get(){return n.modelValue},set(i){r("update:modelValue",i)}});let s=_(null);const C=_(re.havePermission(c.permissions.service.createEdit));function m(i){s.value=i}function V(){s.value&&(I.removeItemOfArray(v.value,s),H.success(t.backoffice.service.legislationRemoved),s.value=null)}function L(i){I.sortArrayOffline(i,u.value.items)}function T(i){i.download&&I.downloadFile(i.download)}async function F(){if(b.value=!0,await k.value.$validate(),!k.value.$error){const i={legislationId:a.legislationId,name:a.texts[0].name,code:a.code,document:a.document,texts:a.texts};v.value.find($=>$.name===i.name&&$.description===i.description)?H.warning(t.backoffice.service.legislationExists):(v.value.push(i),a=Object.assign(a,Q.legislationNewForm()),k.value.$reset(),H.success(t.backoffice.service.legislationAdded))}b.value=!1}function N(){Object.assign(a,se.newForm())}return(i,E)=>{const $=d("table-actions"),z=d("ccolumn"),K=d("table-action-download"),D=d("table-action-delete"),S=d("ctable"),B=d("confirm-delete-modal");return O(),W(te,null,[l(be,{id:"legislations",title:i._lang.backoffice.service.legislations,collapsed:!1,class:"mb-4"},{default:y(()=>[C.value?(O(),U($,{key:0},{default:y(()=>[l(ge,{target:"search-legislation",class:"d-inline",type:e(c).buttonType.secondary,title:i._lang.common.toAdd,disabled:n.disabled,icon:fe,onClick:N},null,8,["type","title","disabled"])]),_:1})):P("",!0),l(S,{data:e(u),loading:e(b),checkbox:!1,showPagination:!1,onSort:L},{columns:y(()=>[l(z,{name:i._lang.label.code,field:"code",sortable:!0},null,8,["name"]),l(z,{name:i._lang.common.name,field:"name",sortable:!0},null,8,["name"])]),actions:y(f=>[f.item.download?(O(),U(K,{key:0,onClick:j=>T(f.item)},null,8,["onClick"])):P("",!0),l(D,{id:p,onClick:j=>m(f.item)},null,8,["onClick"])]),_:1},8,["data","loading"])]),_:1},8,["title"]),l(Ne,{modelValue:e(v),"onUpdate:modelValue":E[0]||(E[0]=f=>M(v)?v.value=f:null)},null,8,["modelValue"]),l(B,{id:p,title:i._lang.backoffice.service.deleteLegislation,message:i._lang.backoffice.service.deleteLegislationQuestion,action:V},null,8,["title","message"]),(O(),U(je,{modelValue:e(a),"onUpdate:modelValue":E[1]||(E[1]=f=>M(a)?a.value=f:a=f),key:e(g),onApply:F,selectedLang:n.selectedLang,vuelidate:e(k)},null,8,["modelValue","selectedLang","vuelidate"]))],64)}}},Pe={__name:"create",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(w,{emit:r}){const n=w,t=Z(),b=J();pe();const g="create-recipient";let a=R(p()),o=_(!1);const u=ue(Q.recipientFormRules(),a,{$scope:!1}),k=h({get(){return n.modelValue},set(C){r("update:modelValue",C)}});function p(){return{recipientId:null,name:null,description:null,informationLevel:!1,recipientTypeId:null,recipientType:null}}function v(){a=Object.assign(a,p()),u.value.$reset()}async function s(){if(o.value=!0,await u.value.$validate(),!u.value.$error){const C={recipientId:a.recipientId,recipientTypeId:a.recipientTypeId,recipientType:G.getLabel(t.recipientTypeList,a.recipientTypeId),name:a.name,description:a.description,document:a.document};k.value.find(V=>V.name===a.name&&V.description===a.description)?H.warning(b.backoffice.service.recipientExists):(k.value.push(C),a=Object.assign(a,p()),u.value.$reset(),I.closeModalById(g),H.success(b.backoffice.service.recipientAdded))}o.value=!1}return(C,m)=>{const V=d("form-field"),L=d("cbutton"),T=d("modal");return O(),U(T,{id:g,title:C._lang.backoffice.service.addRecipient,size:e(c).modalSize.extraLarge},{body:y(()=>[l(V,{id:"name",class:"mb-3 col-12",modelValue:e(a).name,"onUpdate:modelValue":m[0]||(m[0]=F=>e(a).name=F),label:C._lang.label.name,disabled:n.disabled,loading:n.loading,type:e(c).inputs.text,maxlength:255,required:!0,"show-error":e(u).name.$error,"error-message":C._errorMessageField(e(u).name)},null,8,["modelValue","label","disabled","loading","type","show-error","error-message"]),l(V,{id:"description",class:"mb-3 col-12",modelValue:e(a).description,"onUpdate:modelValue":m[1]||(m[1]=F=>e(a).description=F),label:C._lang.label.description,disabled:n.disabled,loading:n.loading,type:e(c).inputs.text,maxlength:255},null,8,["modelValue","label","disabled","loading","type"]),l(V,{id:"recipientTypeId",class:"mb-3 col-12",modelValue:e(a).recipientTypeId,"onUpdate:modelValue":m[2]||(m[2]=F=>e(a).recipientTypeId=F),label:C._lang.label.recipientTypeId,disabled:n.disabled,loading:n.loading,type:e(c).inputs.multiselect,placeholder:C._lang.common.selectOption,options:e(t).recipientTypeList},null,8,["modelValue","label","disabled","loading","type","placeholder","options"])]),footer:y(()=>[l(L,{title:C._lang.common.cancel,type:e(c).buttonType.secondary,"data-bs-dismiss":"modal","aria-label":"Close",disabled:e(o),onClick:v},null,8,["title","type","disabled"]),l(L,{title:C._lang.common.save,onClick:s,disabled:e(o)},null,8,["title","disabled"])]),_:1},8,["title","size"])}}},Re={__name:"recipients",props:{modelValue:{type:Array,required:!0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},rules:{type:Object,default:{}}},emits:["update:modelValue"],setup(w,{emit:r}){const n=w,t=J();let b=_(!1);const g=h(()=>I.createEmptyDataSource(o.value)),a="confirm-delete",o=h({get(){return n.modelValue},set(m){r("update:modelValue",m)}});let u=_(null);const k=_(re.havePermission(c.permissions.service.createEdit));function p(m){u.value=m}function v(){u.value&&(I.removeItemOfArray(o.value,u),H.success(t.backoffice.service.recipientRemoved),u.value=null)}function s(m){I.sortArrayOffline(m,g.value.items)}function C(m){m.download&&I.downloadFile(m.download)}return(m,V)=>{const L=d("table-actions"),T=d("ccolumn"),F=d("table-action-download"),N=d("table-action-delete"),i=d("ctable"),E=d("confirm-delete-modal");return O(),W(te,null,[l(be,{id:"recipients",title:m._lang.backoffice.service.recipients,collapsed:!1,class:"mb-4"},{default:y(()=>[k.value?(O(),U(L,{key:0},{default:y(()=>[l(ge,{target:"create-recipient",class:"d-inline",type:e(c).buttonType.secondary,title:m._lang.common.toAdd,disabled:n.disabled,icon:fe},null,8,["type","title","disabled"])]),_:1})):P("",!0),l(i,{data:e(g),loading:e(b),checkbox:!1,showPagination:!1,onSort:s},{columns:y(()=>[l(T,{name:m._lang.label.name,field:"name",sortable:!0},null,8,["name"]),l(T,{name:m._lang.label.description,field:"description",sortable:!0},null,8,["name"]),l(T,{name:m._lang.label.recipientTypeId,sortField:"recipientTypeId",field:"recipientType",sortable:!0},null,8,["name"])]),actions:y($=>[$.item.download?(O(),U(F,{key:0,onClick:z=>C($.item)},null,8,["onClick"])):P("",!0),l(N,{id:a,onClick:z=>p($.item),disabled:n.disabled},null,8,["onClick","disabled"])]),_:1},8,["data","loading"])]),_:1},8,["title"]),l(Pe,{modelValue:e(o),"onUpdate:modelValue":V[0]||(V[0]=$=>M(o)?o.value=$:null)},null,8,["modelValue"]),l(E,{id:a,title:m._lang.backoffice.service.deleteRecipient,message:m._lang.backoffice.service.deleteRecipientQuestion,action:v},null,8,["title","message"])],64)}}},xe={__name:"state-support",props:{vuelidate:{type:Object,default:{}},modelValue:{type:Object,required:!0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},validateForm:{type:Boolean,default:!1},rules:{type:Object,default:{}},selectedLang:{type:[String,Number],required:!0}},emits:["update:modelValue"],setup(w,{emit:r}){const n=w;Z(),_(!1),Y(async()=>{});const t=h({get(){return n.modelValue},set(g){r("update:modelValue",g)}}),b=h(()=>n.selectedLang===c.language.en);return(g,a)=>{const o=d("form-field"),u=d("row"),k=d("accordion");return O(),U(k,{id:"stateSupport",title:g._lang.backoffice.service.stateSupport,collapsed:!1,class:"mb-4"},{default:y(()=>[l(u,null,{default:y(()=>{var p,v;return[l(o,{id:"stateSupport",class:"mb-3 col-12 col-md-6 col-lg-3",modelValue:e(t).stateSupport.isStateSupport,"onUpdate:modelValue":a[0]||(a[0]=s=>e(t).stateSupport.isStateSupport=s),label:g._lang.label.stateSupport,disabled:n.disabled||e(b),loading:n.loading,type:e(c).inputs.checkbox},null,8,["modelValue","label","disabled","loading","type"]),l(o,{id:"stateSupportUrl",class:"mb-3 col-12",modelValue:e(t).stateSupport.url,"onUpdate:modelValue":a[1]||(a[1]=s=>e(t).stateSupport.url=s),required:e(t).stateSupport.isStateSupport,label:g._lang.label.serviceUrl,disabled:n.disabled||e(b)||!e(t).stateSupport.isStateSupport,loading:n.loading,type:e(c).inputs.text,showError:n.validateForm&&((p=n.vuelidate)==null?void 0:p.stateSupport.url.$error),"error-message":g._errorMessageField((v=n.vuelidate)==null?void 0:v.stateSupport.url),maxlength:2048},null,8,["modelValue","required","label","disabled","loading","type","showError","error-message"]),l(o,{id:"externalSystemId",class:"mb-3 col-12 col-md-6",modelValue:e(t).stateSupport.externalSystemId,"onUpdate:modelValue":a[2]||(a[2]=s=>e(t).stateSupport.externalSystemId=s),required:!1,label:g._lang.label.externalSystemId,disabled:n.disabled||e(b)||!e(t).stateSupport.isStateSupport,loading:n.loading,type:e(c).inputs.text,maxlength:1024},null,8,["modelValue","label","disabled","loading","type"]),l(o,{id:"processId",class:"mb-3 col-12 col-md-6",modelValue:e(t).stateSupport.processId,"onUpdate:modelValue":a[3]||(a[3]=s=>e(t).stateSupport.processId=s),required:!1,label:g._lang.label.processId,disabled:n.disabled||e(b)||!e(t).stateSupport.isStateSupport,loading:n.loading,type:e(c).inputs.text,maxlength:1024},null,8,["modelValue","label","disabled","loading","type"])]}),_:1})]),_:1},8,["title"])}}},De={key:0,class:"mb-3 col-12"},He={__name:"virtual",props:{vuelidate:{type:Object,default:{}},modelValue:{type:Object,required:!0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},validateForm:{type:Boolean,default:!1},rules:{type:Object,default:{}},selectedLang:{type:[String,Number],required:!0}},emits:["update:modelValue"],setup(w,{emit:r}){const n=w;Z(),Y(async()=>{}),_(null),_(null),_(null),_(null);const t=h({get(){return n.modelValue},set(g){r("update:modelValue",g)}}),b=h(()=>n.selectedLang===c.language.en);return(g,a)=>{const o=d("form-field"),u=d("row"),k=d("accordion");return O(),U(k,{id:"virtual",title:g._lang.backoffice.service.virtual,collapsed:!1,class:"mb-4"},{default:y(()=>[l(u,null,{default:y(()=>{var p,v;return[l(o,{id:"virtual",class:"col-12 col-md-6 col-lg-3",modelValue:e(t).virtual.isVirtual,"onUpdate:modelValue":a[0]||(a[0]=s=>e(t).virtual.isVirtual=s),label:g._lang.label.virtual,disabled:n.disabled||e(b),loading:n.loading,type:e(c).inputs.checkbox},null,8,["modelValue","label","disabled","loading","type"]),e(t).virtual.isVirtual?(O(),W("span",De,ve(g._lang.backoffice.service.virtualText),1)):P("",!0),l(o,{id:"virtualUrl",class:"mb-3 col-12",modelValue:e(t).virtual.url,"onUpdate:modelValue":a[1]||(a[1]=s=>e(t).virtual.url=s),required:e(t).virtual.isVirtual,label:g._lang.label.serviceUrl,disabled:n.disabled||e(b)||!e(t).virtual.isVirtual,loading:n.loading,type:e(c).inputs.text,showError:n.validateForm&&((p=n.vuelidate)==null?void 0:p.virtual.url.$error),"error-message":g._errorMessageField((v=n.vuelidate)==null?void 0:v.virtual.url),maxlength:2048},null,8,["modelValue","required","label","disabled","loading","type","showError","error-message"]),l(o,{id:"externalSystemId",class:"mb-3 col-12 col-md-6",modelValue:e(t).virtual.externalSystemId,"onUpdate:modelValue":a[2]||(a[2]=s=>e(t).virtual.externalSystemId=s),required:!1,label:g._lang.label.externalSystemId,disabled:n.disabled||e(b)||!e(t).virtual.isVirtual,loading:n.loading,type:e(c).inputs.text,maxlength:1024},null,8,["modelValue","label","disabled","loading","type"]),l(o,{id:"processId",class:"mb-3 col-12 col-md-6",modelValue:e(t).virtual.processId,"onUpdate:modelValue":a[3]||(a[3]=s=>e(t).virtual.processId=s),required:!1,label:g._lang.label.processId,disabled:n.disabled||e(b)||!e(t).virtual.isVirtual,loading:n.loading,type:e(c).inputs.text,maxlength:1024},null,8,["modelValue","label","disabled","loading","type"]),l(o,{id:"canExecutedByThirdParty",class:"mb-3 col-12",modelValue:e(t).virtual.canExecutedByThirdParty,"onUpdate:modelValue":a[4]||(a[4]=s=>e(t).virtual.canExecutedByThirdParty=s),required:!1,label:g._lang.label.canExecutedByThirdParty,disabled:n.disabled||e(b)||!e(t).virtual.isVirtual,loading:n.loading,type:e(c).inputs.checkbox,maxlength:1024},null,8,["modelValue","label","disabled","loading","type"])]}),_:1})]),_:1},8,["title"])}}},Ke={__name:"general",props:{modelValue:{type:Object,required:!0},selectedLang:Oe,disabled:{Boolean,default:!0},rules:{Boolean,default:!0},validateForm:{Boolean,default:!1},loading:{Object,default:{}},isExternalEdit:{type:Boolean,default:!1},showProgress:{type:Boolean,default:!0},progressValue:{type:Number,default:0},vuelidate:{type:Object,default:{}}},setup(w){const r=w,n=Z(),t=h({get(){return r.modelValue},set(a){emit("update:modelValue",a)}}),b=h(()=>r.selectedLang),g=h(()=>b.value===c.language.en);return(a,o)=>{const u=d("progress-bar"),k=d("container-wrapper");return O(),W(te,null,[r.showProgress?(O(),U(k,{key:0,"margin-top":!1},{default:y(()=>[l(u,{value:w.progressValue,label:a._lang.common.fill,class:"mb-4 col-12 float-end"},null,8,["value","label"])]),_:1})):P("",!0),l(he,{modelValue:e(t),"onUpdate:modelValue":o[0]||(o[0]=p=>M(t)?t.value=p:null),store:e(n)},null,8,["modelValue","store"]),l(e(Te),{modelValue:e(t),"onUpdate:modelValue":o[1]||(o[1]=p=>M(t)?t.value=p:null),disabled:r.disabled,loading:w.loading,selectedLang:r.selectedLang,validateForm:r.validateForm,rules:r.rules,isExternalEdit:r.isExternalEdit,vuelidate:r.vuelidate},null,8,["modelValue","disabled","loading","selectedLang","validateForm","rules","isExternalEdit","vuelidate"]),l(e(xe),{modelValue:e(t),"onUpdate:modelValue":o[2]||(o[2]=p=>M(t)?t.value=p:null),disabled:r.disabled,loading:w.loading,selectedLang:r.selectedLang,validateForm:r.validateForm,rules:r.rules,isExternalEdit:r.isExternalEdit,vuelidate:r.vuelidate},null,8,["modelValue","disabled","loading","selectedLang","validateForm","rules","isExternalEdit","vuelidate"]),l(e(He),{modelValue:e(t),"onUpdate:modelValue":o[3]||(o[3]=p=>M(t)?t.value=p:null),disabled:r.disabled,loading:w.loading,selectedLang:r.selectedLang,validateForm:r.validateForm,rules:r.rules,isExternalEdit:r.isExternalEdit,vuelidate:r.vuelidate},null,8,["modelValue","disabled","loading","selectedLang","validateForm","rules","isExternalEdit","vuelidate"]),l(e(Me),{modelValue:e(t),"onUpdate:modelValue":o[4]||(o[4]=p=>M(t)?t.value=p:null),disabled:r.disabled,loading:w.loading,selectedLang:r.selectedLang,validateForm:r.validateForm,rules:r.rules,vuelidate:r.vuelidate},null,8,["modelValue","disabled","loading","selectedLang","validateForm","rules","vuelidate"]),l(e(Re),{modelValue:e(t).recipients,"onUpdate:modelValue":o[5]||(o[5]=p=>e(t).recipients=p),disabled:r.disabled||e(g),loading:w.loading},null,8,["modelValue","disabled","loading"]),l(e(ze),{modelValue:e(t).legislations,"onUpdate:modelValue":o[6]||(o[6]=p=>e(t).legislations=p),disabled:r.disabled,loading:w.loading,selectedLang:r.selectedLang},null,8,["modelValue","disabled","loading","selectedLang"]),l(e(Ue),{modelValue:e(t),"onUpdate:modelValue":o[7]||(o[7]=p=>M(t)?t.value=p:null),disabled:r.disabled,loading:w.loading,selectedLang:r.selectedLang},null,8,["modelValue","disabled","loading","selectedLang"]),l($e,{modelValue:e(t),"onUpdate:modelValue":o[8]||(o[8]=p=>M(t)?t.value=p:null),disabled:r.disabled,loading:w.loading,selectedLang:e(b)},null,8,["modelValue","disabled","loading","selectedLang"])],64)}}},Ge={__name:"search-service-points-modal",props:{serviceId:{Number,required:!0},serviceVersion:{Number,required:!0}},emits:["apply"],setup(w,{emit:r}){const n=w,t=qe(),b="search-pointOfCare-modal",g=J(),a=Se();let o=R(T()),u=_([]),k=_([]),p=_(I.createEmptyDataSource()),v=_(!1),s=_(!1),C=_(0),m=_("pt"),V=R(L());function L(){return Ae.newForm()}function T(){return{pageNumber:1,sortBy:"Code",recordStateIds:[c.recordStateType.published],active:!0}}ae(async()=>{v.value=!0,u.value=I.convertEnumToArray(g.enums.recordStateType);const S=await de.getLists(a.getLanguage);I.validateResponse(S,null,()=>{t.setLists(S.data),u.value=I.convertEnumToArray(g.enums.recordStateType),k.value=I.concatItemsBadge(u.value,G.recordStateTypeBadgeOptions)}),v.value=!1}),Y(async()=>{await i()});async function F(S){o.sortBy=S,await i()}async function N(S){o.pageNumber=S,await i()}async function i(){v.value=!0;let S=await de.search(o);I.validateResponse(S,null,()=>{p.value=S.data}),v.value=!1}async function E(){Object.assign(o,T()),await i()}async function $(){await i()}async function z(S){const B=await de.getById(S.pointOfCareId,S.pointOfCareVersion);I.validateResponse(B,null,()=>{Object.assign(V,B.data),s.value=!0}),C.value++}function K(){}async function D(){v.value=!0;const S=await le.associationCreate(n.serviceId,n.serviceVersion,V.pointOfCareId,V.pointOfCareVersion);I.validateResponse(S,g.backoffice.pointOfCare.serviceAdded,()=>{r("apply")}),v.value=!1}return(S,B)=>{const f=d("form-field"),j=d("row"),X=d("cfilter"),q=d("ccolumn"),x=d("table-action-detail"),oe=d("ctable"),ne=d("container-wrapper"),ee=d("cbutton"),ie=d("modal");return O(),U(ie,{id:b,title:S._lang.backoffice.pointOfCare.searchTitle,size:e(c).modalSize.extraLarge,"remove-padding":!0},{body:y(()=>[l(X,{title:S._lang.common.filter,disabled:e(v),"clear-click":E,"apply-click":$,loading:e(v),collapsed:!0},{default:y(()=>[l(j,null,{default:y(()=>[l(f,{id:"code",modelValue:e(o).code,"onUpdate:modelValue":B[0]||(B[0]=A=>e(o).code=A),class:"mb-3 col-12 col-md-6 col-lg-4",label:S._lang.label.code,type:e(c).inputs.text,maxlength:45,disabled:e(v)},null,8,["modelValue","label","type","disabled"]),l(f,{id:"channelTypeIds",class:"mb-3 col-12 col-md-6 col-lg-4",modelValue:e(o).channelTypeIds,"onUpdate:modelValue":B[1]||(B[1]=A=>e(o).channelTypeIds=A),label:S._lang.label.channelTypeId,type:e(c).inputs.multiselect,options:e(t).channelTypeList,disabled:e(v),mode:e(c).multiselectMode.tags},null,8,["modelValue","label","type","options","disabled","mode"]),l(f,{id:"abreviation",class:"mb-3 col-12 col-lg-4",modelValue:e(o).abreviation,"onUpdate:modelValue":B[2]||(B[2]=A=>e(o).abreviation=A),label:S._lang.label.abreviation,type:e(c).inputs.text,maxlength:16,disabled:e(v)},null,8,["modelValue","label","type","disabled"]),l(f,{id:"name",class:"mb-3 col-12",modelValue:e(o).name,"onUpdate:modelValue":B[3]||(B[3]=A=>e(o).name=A),label:S._lang.label.name,type:e(c).inputs.text,maxlength:45,disabled:e(v)},null,8,["modelValue","label","type","disabled"]),l(f,{id:"organization",class:"mb-3 col-12 col-md-6",modelValue:e(o).organization,"onUpdate:modelValue":B[4]||(B[4]=A=>e(o).organization=A),label:S._lang.label.organizationHost,type:e(c).inputs.multiselect,options:e(t).organizationList,disabled:e(v),valueProp:e(c).multiselectValueProp.value3},null,8,["modelValue","label","type","options","disabled","valueProp"])]),_:1})]),_:1},8,["title","disabled","loading"]),l(ne,null,{default:y(()=>[l(oe,{onSort:F,onChangePage:N,data:e(p),checkbox:!1,loading:e(v),defaultSort:"Code"},{columns:y(()=>[l(q,{name:S._lang.label.code,field:"code",sortable:!0},null,8,["name"]),l(q,{name:S._lang.label.channelTypeId,field:"channelType",sortField:"channelTypeId",sortable:!0},null,8,["name"]),l(q,{name:S._lang.label.abreviation,field:"abreviation",sortable:!0},null,8,["name"]),l(q,{name:S._lang.label.name,field:"name",sortable:!0},null,8,["name"]),l(q,{name:S._lang.label.organizationHost,field:"organization",sortField:"organizationId",sortable:!0},null,8,["name"])]),actions:y(A=>[l(x,{onClick:_e=>z(A.item)},null,8,["onClick"])]),_:1},8,["data","loading"])]),_:1}),(O(),U(e(Fe),{collapsed:e(s),class:"mt-5",key:e(C),modelValue:e(V),"onUpdate:modelValue":B[5]||(B[5]=A=>M(V)?V.value=A:V=A),disabled:!0,loading:e(v),selectedLang:e(m),validateForm:!1},null,8,["collapsed","modelValue","loading","selectedLang"]))]),footer:y(()=>[l(ee,{type:"primary",size:"large",title:S._lang.common.apply,"data-bs-dismiss":"modal",onClick:D,disabled:!e(V).code},null,8,["title","disabled"]),l(ee,{type:"secondary",size:"large",title:S._lang.common.cancel,"data-bs-dismiss":"modal",onClick:K},null,8,["title"])]),_:1},8,["title","size"])}}},Qe=["id"],We={__name:"service-points",props:{formModel:{Object,required:!0}},setup(w){var S,B;const r=w,n=_(re.havePermission(c.permissions.service.createEdit)&&(((S=r.formModel)==null?void 0:S.recordStateTypeId)==c.recordStateType.draft||((B=r.formModel)==null?void 0:B.recordStateTypeId)==c.recordStateType.published)),t=h(()=>{let f=me.getUser();return!f||!f.name?!1:f.name.toLowerCase()==="guest"});Y(()=>{}),ae(async()=>{s.value=I.decodeId(o.params.serviceId),C.value=I.decodeId(o.params.serviceVersion),T.value=I.convertEnumToArray(u.enums.recordStateType),!s.value||!C.value?k.push({name:ke.router.BACKOFFICE_SERVICE_PAGE.name}):(V.serviceId=s.value,V.serviceVersion=C.value,await z(),T.value=I.convertEnumToArray(u.enums.recordStateType),F.value=I.concatItemsBadge(T.value,G.recordStateTypeBadgeOptions))});const b="search-pointOfCare-modal",g="delete-pointOfCare",a=I.uuid(),o=Ce(),u=J(),k=Ie();let p=_(!0),v=_(0),s=_(0),C=_(0),m=_(I.createEmptyDataSource()),V=R(N()),L=_(null),T=_([]),F=_([]);function N(){let f=null;return t.value&&(f=[c.recordStateType.published]),{pageNumber:1,sortBy:"pointOfCareName",active:!0,serviceId:null,serviceVersion:null,recordStateTypeIds:f}}function i(){v.value++,window.setTimeout(function(){I.showModalById(b)},5)}async function E(f){V.sortBy=f,await z()}async function $(f){V.pageNumber=f,await z()}async function z(){p.value=!0;let f=await le.associationSearch(V);I.validateResponse(f,null,()=>{m.value=f.data,m.value.items.forEach(j=>{j.recordStateTypeId=c.recordStateType.submitted,j.pointOfCareRecordStateTypeId==c.recordStateType.published&&j.serviceRecordStateTypeId==c.recordStateType.published?j.recordStateTypeId=c.recordStateType.published:(j.pointOfCareRecordStateTypeId==c.recordStateType.returned||j.serviceRecordStateTypeId==c.recordStateType.returned)&&(j.recordStateTypeId=c.recordStateType.returned)})}),p.value=!1}async function K(f){L.value=f}async function D(){if(L.value){p.value=!0;const f=await le.associationRemove(s.value,C.value,L.value.pointOfCareId,L.value.pointOfCareVersion);I.validateResponse(f,u.backoffice.service.pointOfCareRemoved,async()=>{await z()}),p.value=!1}}return(f,j)=>{const X=d("icon-plus"),q=d("table-actions"),x=d("ccolumn"),oe=d("table-action-delete"),ne=d("ctable"),ee=d("container-wrapper"),ie=d("confirm-delete-modal");return O(),W(te,null,[l(ee,null,{default:y(()=>[l(q,{title:f._lang.common.tableActionTitle},{default:y(()=>[n.value?(O(),W("button",{key:0,class:"btn btn-primary",type:"button",id:e(a),onClick:i},[l(X,{color:"#FFF"}),we(" "+ve(f._lang.common.addServicePoint),1)],8,Qe)):P("",!0)]),_:1},8,["title"]),l(ne,{onSort:E,onChangePage:$,data:e(m),checkbox:!1,loading:e(p),defaultSort:"pointOfCareCode",checkboxField:"code"},{columns:y(()=>[l(x,{name:f._lang.label.code,field:"pointOfCareCode",sortable:!0},null,8,["name"]),l(x,{name:f._lang.label.channelTypeId,field:"pointOfCareType",sortField:"pointOfCareTypeId",sortable:!0},null,8,["name"]),l(x,{name:f._lang.label.abreviation,field:"pointOfCareAbreviation",sortField:"pointOfCareAbreviation",sortable:!0},null,8,["name"]),l(x,{name:f._lang.label.name,field:"pointOfCareName",sortable:!0},null,8,["name"]),l(x,{name:f._lang.label.organizationHost,field:"pointOfCareOrganization",sortField:"pointOfCareOrganizationId",sortable:!0},null,8,["name"]),l(x,{name:f._lang.label.state,field:"recordStateTypeId",align:e(c).columnAlign.center,custom:Le,options:e(F),sortable:!0},null,8,["name","align","options"])]),actions:y(A=>[e(t)?P("",!0):(O(),U(oe,{key:0,id:g,onClick:_e=>K(A.item)},null,8,["onClick"]))]),_:1},8,["data","loading"])]),_:1}),e(p)?P("",!0):(O(),U(Ge,{key:e(v),serviceId:e(s),serviceVersion:e(C),onApply:z},null,8,["serviceId","serviceVersion"])),l(ie,{id:g,title:f._lang.backoffice.service.pointOfCareDeleteTitle,message:f._lang.backoffice.service.pointOfCareDeleteQuestion,action:D},null,8,["title","message"])],64)}}},gl={__name:"form",props:{formModel:{Object,required:!0},loading:{type:Boolean,required:!0},validateForm:{type:Boolean,required:!0},disabled:{type:Boolean,required:!0},isExternalEdit:{type:Boolean,required:!0},selectedLang:{type:[Number,String],required:!0},rules:{type:Object,required:!0},vuelidate:{Object,default:null},progressValue:{type:Number,default:0},showProgress:{type:Boolean,default:!0}},emits:["update:formModel"],setup(w,{emit:r}){const n=w,t=h({get(){return n.formModel},set(b){r("update:formModel",b)}});return(b,g)=>{const a=d("tab-content"),o=d("tabs");return O(),U(o,null,{default:y(()=>[l(a,{id:"general",title:b._lang.common.general,active:!0},{default:y(()=>[l(Ke,{modelValue:e(t),"onUpdate:modelValue":g[0]||(g[0]=u=>M(t)?t.value=u:null),disabled:n.disabled,validateForm:n.validateForm,loading:n.loading,selectedLang:n.selectedLang,rules:n.rules,progressValue:n.progressValue,showProgress:n.showProgress,vuelidate:n.vuelidate},null,8,["modelValue","disabled","validateForm","loading","selectedLang","rules","progressValue","showProgress","vuelidate"])]),_:1},8,["title"]),l(a,{id:"service-points",title:b._lang.backoffice.menu.servicePoints,active:!1,disabled:!1},{default:y(()=>[l(We,{formModel:e(t)},null,8,["formModel"])]),_:1},8,["title"])]),_:1})}}};export{gl as _};
